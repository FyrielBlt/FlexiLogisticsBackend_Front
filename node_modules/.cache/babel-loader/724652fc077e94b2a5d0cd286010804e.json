{"ast":null,"code":"import BreadCrumb from \"../../components/Intermediaire/BreadCrumb.vue\";\nimport { ref } from 'vue';\nimport axios from \"axios\";\nimport PaginationVue from \"../../components/Intermediaire/pagination/PaginationVue.vue\";\nimport FilesModal from \"./FilesModal.vue\";\nexport default {\n  components: {\n    BreadCrumb,\n    PaginationVue,\n    FilesModal\n  },\n\n  data() {\n    return {\n      demandes: [],\n      open: ref(false),\n      success: false,\n      description: '',\n      depart: '',\n      arrive: '',\n      num: '',\n      villes: [],\n      updateinputdisable: true,\n      update: true,\n      descupdate: \"\",\n      departupdate: \"\",\n      arriveupdate: \"\",\n      poids: \"\",\n      largeur: \"\",\n      hauteur: \"\",\n      datedemande: \"\",\n      page: 1,\n      perpage: 5,\n      departfilter: '',\n      arrivefilter: '',\n      today: new Date().toISOString().split(\"T\")[0],\n      Files: \"\"\n    };\n  },\n\n  created() {\n    axios.get(\"http://localhost:5000/api/EtatDemandeLivraisons/check?etat=livre\").then(response => {\n      this.livre = response.data.idEtatDemande;\n    }), axios.get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\")).then(response => {\n      this.demandes = response.data;\n    });\n    axios.get('http://localhost:5000/api/villes').then(resp => this.villes = resp.data);\n  },\n\n  methods: {\n    FileSelected(event) {\n      this.Files = event.target.files;\n      console.log(this.Files);\n    },\n\n    ChangePage(NumPage) {\n      this.page = NumPage;\n      axios.get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\") + \"?page=\" + this.page + \"&quantityPage=\" + this.perpage + \"&depart=\" + this.departfilter + \"&arrive=\" + this.arrivefilter + \"&num=\" + this.num).then(resp => {\n        this.demandes = resp.data;\n      });\n    },\n\n    livrer(u) {\n      axios.put(\"http://localhost:5000/api/demandelivraisons/\" + u.idDemande, {\n        idDemande: u.idDemande,\n        description: u.description,\n        datecreation: u.datecreation,\n        adressdepart: u.adressdepart,\n        adressarrive: u.adressarrive,\n        date: u.date,\n        poids: u.poids,\n        largeur: u.largeur,\n        hauteur: u.hauteur,\n        idEtatdemande: this.livre,\n        idclient: u.idclient\n      }).then(() => {\n        axios.get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\")).then(response => {\n          this.demandes = response.data;\n          Swal.fire('Updated!', 'Your offer has been updated.', 'success');\n        });\n      });\n    },\n\n    updatedemande(id, index) {\n      axios.put('http://localhost:5000/api/demandelivraisons/' + id, {\n        \"idDemande\": id,\n        \"description\": this.demandes[index].description,\n        \"datecreation\": this.demandes[index].datecreation,\n        \"adressdepart\": this.demandes[index].adressdepart,\n        \"poids\": this.demandes[index].poids,\n        \"largeur\": this.demandes[index].largeur,\n        \"hauteur\": this.demandes[index].hauteur,\n        \"date\": this.demandes[index].date,\n        \"adressarrive\": this.demandes[index].adressarrive,\n        \"idEtatdemande\": this.demandes[index].idEtatdemande,\n        \"idclient\": this.demandes[index].idclient\n      }).then(() => {\n        this.updateinputdisable = !this.updateinputdisable;\n      });\n    },\n\n    demandelivraisons() {\n      const date = new Date();\n\n      if (this.depart == this.arrive) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Adresse depart et arrivé doit etre different'\n        });\n      } else {\n        axios.post('http://localhost:5000/api/demandelivraisons', {\n          \"description\": this.description,\n          \"datecreation\": date.getFullYear() + '-' + date.getMonth() + '-' + date.getDate(),\n          \"adressdepart\": this.depart,\n          \"adressarrive\": this.arrive,\n          \"poids\": this.poids,\n          \"largeur\": this.largeur,\n          \"hauteur\": this.hauteur,\n          \"date\": this.datedemande,\n          \"idEtatdemande\": 2002,\n          \"idclient\": parseInt(localStorage.getItem(\"clientid\"))\n        }).then(r => {\n          for (let i = 0; i < this.Files.length; i++) {\n            let filedemande = new FormData();\n            filedemande.append(\"idDemande\", r.data.idDemande);\n            filedemande.append(\"File\", this.Files[i]);\n            axios.post(\"http://localhost:5000/api/filedemandelivraisons/\", filedemande);\n          }\n\n          axios.get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\")).then(response => {\n            this.demandes = response.data;\n          });\n          this.open = false;\n          Swal.fire('Ajouté!', 'Demande Ajouté Avec Succée', 'success');\n        }).catch(error => console.log(error));\n      }\n    },\n\n    supprimer(id) {\n      Swal.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.isConfirmed) {\n          axios.delete('http://localhost:5000/api/demandelivraisons/' + id).then(() => {\n            axios.get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\")).then(response => {\n              this.demandes = response.data;\n            });\n          });\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'Your file has been deleted.',\n            showConfirmButton: false,\n            timer: 800\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["BreadCrumb","ref","axios","PaginationVue","FilesModal","components","data","demandes","open","success","description","depart","arrive","num","villes","updateinputdisable","update","descupdate","departupdate","arriveupdate","poids","largeur","hauteur","datedemande","page","perpage","departfilter","arrivefilter","today","Date","toISOString","split","Files","created","get","then","response","livre","idEtatDemande","localStorage","getItem","resp","methods","FileSelected","event","target","files","console","log","ChangePage","NumPage","livrer","u","put","idDemande","datecreation","adressdepart","adressarrive","date","idEtatdemande","idclient","Swal","fire","updatedemande","id","index","demandelivraisons","icon","title","text","post","getFullYear","getMonth","getDate","parseInt","r","i","length","filedemande","FormData","append","catch","error","supprimer","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","result","isConfirmed","delete","position","showConfirmButton","timer"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Client\\demande.vue"],"sourcesContent":["<template>\n  <!-- Breadcrumb -->\n  <bread-crumb>\n    <template v-slot:bread1> Demandes </template>\n  </bread-crumb>\n  <!-- <Breadcrumb breadcrumb=\"Demandes\" /> -->\n  <button @click=\"open = true\" class=\"\n          px-6\n          py-2\n          mt-3\n          font-medium\n          tracking-wide\n          text-white\n          bg-indigo-600\n          hover:bg-indigo-900\n          focus:outline-none\n           animate__animated animate__shakeX animate__delay-1s\n        \" style=\"position: absolute;\n    right: 545px;\n    top: 40px;\n    height: 62px;\">\n    Demande Livraison\n  </button>\n  <div :class=\"`modal ${!open && 'opacity-0 pointer-events-none'\n  } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`\">\n    <div @click=\"open = false\" class=\"absolute w-full h-full bg-gray-900 opacity-50 modal-overlay\"></div>\n\n    <div class=\"\n        z-50\n        w-11/12\n        mx-auto\n        overflow-y-auto\n        bg-white\n        rounded\n        shadow-lg\n        modal-container\n        animate__animated animate__fadeInDown\n      \" style=\"width: 681px\">\n      <div class=\"\n          absolute\n          top-0\n          right-0\n          z-50\n          flex flex-col\n          items-center\n          mt-4\n          mr-4\n          text-sm text-white\n          cursor-pointer\n          modal-close\n        \">\n        <svg class=\"text-white fill-current\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\"\n          viewBox=\"0 0 18 18\">\n          <path\n            d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\" />\n        </svg>\n        <span class=\"text-sm\">(Esc)</span>\n      </div>\n\n      <!-- Add margin if you want to see some of the overlay behind the modal-->\n      <div class=\"px-6 py-4 text-left modal-content\">\n        <!--Title-->\n        <div class=\"flex items-center justify-between pb-3\">\n          <p class=\"text-2xl font-bold\">Demande Livraison</p>\n          <div class=\"z-50 cursor-pointer modal-close\" @click=\"open = false\">\n            <svg class=\"text-black fill-current\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\"\n              viewBox=\"0 0 18 18\">\n              <path\n                d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\" />\n            </svg>\n          </div>\n        </div>\n\n        <!--Body-->\n        <div class=\"\n            px-5\n            py-6\n            text-gray-700\n            bg-gray-200\n            border-b\n            grid grid-cols-2\n            gap-2\n          \">\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Description</label>\n\n            <textarea class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" v-model=\"description\" />\n          </div>\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Poids</label>\n\n            <input class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" type=\"number\" v-model=\"poids\" />\n          </div>\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Adresse depart</label>\n\n            <select name=\"\" class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" id=\"\" v-model=\"depart\">\n              <option v-for=\"ville in villes\" :key=\"ville\" :value=\"ville.nomVille\">\n                {{ ville.nomVille }}\n              </option>\n            </select>\n          </div>\n\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Adresse arrive</label>\n\n            <select name=\"\" class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" id=\"\" v-model=\"arrive\">\n              <option v-for=\"ville in villes\" :key=\"ville\" :value=\"ville.nomVille\">\n                {{ ville.nomVille }}\n              </option>\n            </select>\n          </div>\n\n\n\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Largeur</label>\n\n            <input class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" type=\"number\" v-model=\"largeur\" />\n          </div>\n\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Hauteur</label>\n\n            <input class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" type=\"number\" v-model=\"hauteur\" />\n          </div>\n\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Date</label>\n\n            <input class=\"\n                w-full\n                px-12\n                py-2\n                border-transparent\n                rounded-md\n                appearance-none\n                focus:border-indigo-600\n                focus:ring focus:ring-opacity-40 focus:ring-indigo-500\n              \" type=\"date\" :min=\"this.today\" v-model=\"datedemande\" />\n          </div>\n          <div class=\"relative mt-2 rounded-md shadow-sm\">\n            <label class=\"text-xs\">Fchiers</label>\n            <input type=\"file\" name=\"file\" id=\"file\" @change=\"FileSelected($event)\" multiple>\n          </div>\n        </div>\n\n        <!--Footer-->\n        <div class=\"flex justify-end pt-2\">\n          <button @click=\"open = false\" class=\"\n              p-3\n              px-6\n              py-3\n              mr-2\n              text-indigo-500\n              bg-transparent\n              rounded-lg\n              hover:bg-gray-100\n              hover:text-indigo-400\n              focus:outline-none\n            \">\n            Close\n          </button>\n          <button @click=\"demandelivraisons()\" class=\"\n              px-6\n              py-3\n              font-medium\n              tracking-wide\n              text-white\n              bg-indigo-600\n              rounded-md\n              hover:bg-indigo-500\n              focus:outline-none\n            \">\n            Valider\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"mt-6 animate__animated animate__fadeInDown\">\n    <div class=\"flex justify-center\">\n      <h4 class=\"font-semibold p-3\">Per Page :</h4>\n      <div class=\"mb-3 p-3\">\n        <select v-model=\"perpage\" @change=\"ChangePage(page)\" class=\"\n            form-select\n            appearance-none\n            block\n            w-full\n            px-3\n            py-1.5\n            text-base\n            font-normal\n            text-gray-700\n            bg-white bg-clip-padding bg-no-repeat\n            border border-solid border-gray-300\n            rounded\n            transition\n            ease-in-out\n            m-0\n            focus:text-gray-700\n            focus:bg-white\n            focus:border-blue-600\n            focus:outline-none\n          \" aria-label=\"Default select example\">\n          <option :value=\"2\">2</option>\n          <option :value=\"5\">5</option>\n          <option :value=\"10\">10</option>\n        </select>\n      </div>\n\n      <h4 class=\"font-semibold p-3\">Depart :</h4>\n      <div class=\"mb-3 xl:w-96 p-3\">\n        <select v-model=\"departfilter\" @change=\"ChangePage(page)\" class=\"\n            form-select\n            appearance-none\n            block\n            w-full\n            px-3\n            py-1.5\n            text-base\n            font-semibold\n            text-gray-700\n            bg-white bg-clip-padding bg-no-repeat\n            border border-solid border-gray-300\n            rounded\n            transition\n            ease-in-out\n            m-0\n            focus:text-gray-700\n            focus:bg-white\n            focus:border-blue-600\n            focus:outline-none\n          \" aria-label=\"Default select example\">\n          <option value=\"\" class=\"font-semibold\" selected>--Vide--</option>\n          <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n            --{{ v.nomVille }}--\n          </option>\n        </select>\n      </div>\n      <h4 class=\"font-semibold p-3\">Arrive :</h4>\n      <div class=\"mb-3 xl:w-96 p-3\">\n        <select v-model=\"arrivefilter\" @change=\"ChangePage(page)\" class=\"\n            form-select\n            appearance-none\n            block\n            w-full\n            px-3\n            py-1.5\n            text-base\n            font-semibold\n            text-gray-700\n            bg-white bg-clip-padding bg-no-repeat\n            border border-solid border-gray-300\n            rounded\n            transition\n            ease-in-out\n            m-0\n            focus:text-gray-700\n            focus:bg-white\n            focus:border-blue-600\n            focus:outline-none\n          \" aria-label=\"Default select example\">\n          <option value=\"\" class=\"font-semibold\" selected>--Vide--</option>\n          <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n            --{{ v.nomVille }}--\n          </option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\n\n      <div class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\">\n        <input v-model=\"num\" @keyup=\"ChangePage(page)\"\n          class=\"appearance-none block text-gray-700 border border-red-500 rounded py-2 px-2 mb-2 leading-tight focus:outline-none focus:bg-white\"\n          id=\"grid-first-name\" type=\"text\" placeholder=\"Num demande\">\n        <table class=\"divide-y divide-gray-300\" style=\"width: 100%\">\n          <thead class=\"bg-gray-100\">\n            <tr>\n              <th class=\"px-6 text-xs text-gray-500\">\n                NUM\n              </th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">\n                DESCRIPTION\n              </th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">ADRESSE DEPART</th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">ADRESSE ARRIVE</th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">\n                PONDS(KG)/DIMENSION(CM)\n              </th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">DATE</th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">FILE</th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">ETAT</th>\n              <th class=\"px-6 py-2 text-xs text-gray-500\">SETTINGS</th>\n            </tr>\n          </thead>\n          <tbody class=\"bg-white divide-y divide-gray-500\">\n            <tr class=\"whitespace-nowrap\" v-for=\"(u, index) in demandes\" :key=\"index\">\n              <td class=\"px-6 text-sm bg-white border-b border-gray-200\">{{ u.idDemande }}</td>\n              <td class=\"text-sm bg-white border-b border-gray-200\" style=\"padding: 30px 49px\">\n                <div class=\"flex items-center\">\n                  <div class=\"ml-3\">\n                    <p class=\"text-gray-900 whitespace-nowrap\">\n                      <input class=\"bg-white\" type=\"text\" v-model=\"u.description\" :disabled=\"updateinputdisable\" />\n                    </p>\n                  </div>\n                </div>\n              </td>\n              <td class=\"text-sm bg-white border-b border-gray-200\">\n                <span :hidden=\"!updateinputdisable\">{{ u.adressdepart }}</span>\n                <select v-model=\"u.adressdepart\" :hidden=\"updateinputdisable\">\n                  <option v-for=\"ville in villes\" :key=\"ville\" :value=\"ville.nomVille\">\n                    {{ ville.nomVille }}\n                  </option>\n                </select>\n              </td>\n              <td class=\"text-sm bg-white border-b border-gray-200\">\n                <span :hidden=\"!updateinputdisable\">{{ u.adressarrive }}</span>\n                <select v-model=\"u.adressarrive\" :hidden=\"updateinputdisable\">\n                  <option v-for=\"ville in villes\" :key=\"ville\" :value=\"ville.nomVille\">\n                    {{ ville.nomVille }}\n                  </option>\n                </select>\n              </td>\n              <td class=\"text-sm bg-white border-b border-gray-200\">\n                P :\n                <input style=\"text-align: center; width: 33px\" class=\"bg-white\" type=\"number\" v-model=\"u.poids\"\n                  :disabled=\"updateinputdisable\" />\n\n                L :\n                <input style=\"text-align: center; width: 33px\" class=\"bg-white\" type=\"number\" v-model=\"u.largeur\"\n                  :disabled=\"updateinputdisable\" />\n\n                H :<input style=\"text-align: center; width: 33px\" class=\"bg-white\" type=\"number\" v-model=\"u.hauteur\"\n                  :disabled=\"updateinputdisable\" />\n              </td>\n              <td class=\"text-sm bg-white border-b border-gray-200\">\n                <input style=\"text-align: center\" class=\"bg-white\" type=\"date\" v-model=\"u.date\"\n                  :hidden=\"updateinputdisable\" />\n                <span :hidden=\"!updateinputdisable\">{{ u.date.substr(0, 10) }}</span>\n              </td>\n              <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\" style=\"padding: 30px 49px\">\n                <files-modal :u=\"u\"></files-modal>\n\n              </td>\n\n              <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                {{ u.idEtatdemandeNavigation.etatDemande }}\n              </td>\n              <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                <div class=\"flex justify-around\">\n                  <span class=\"text-yellow-500 flex justify-center\" v-if=\"u.offre.length == 0\">\n                    <button @click=\"updateinputdisable = false\" :hidden=\"!updateinputdisable\"\n                      class=\"mx-2 px-2 rounded-md\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-green-700\" viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\">\n                        <path d=\"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z\" />\n                        <path fill-rule=\"evenodd\"\n                          d=\"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\"\n                          clip-rule=\"evenodd\" />\n                      </svg>\n                    </button>\n                    <button @click=\"updatedemande(u.idDemande, index)\" :hidden=\"updateinputdisable\"\n                      class=\"mx-2 px-2 rounded-md\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-green-700\" viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\">\n                        <path d=\"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z\" />\n                        <path fill-rule=\"evenodd\"\n                          d=\"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\"\n                          clip-rule=\"evenodd\" />\n                      </svg>\n                    </button>\n                    <button @click=\"supprimer(u.idDemande)\" class=\"mx-2 px-2 rounded-md\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-red-700\" viewBox=\"0 0 20 20\"\n                        fill=\"currentColor\">\n                        <path fill-rule=\"evenodd\"\n                          d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\"\n                          clip-rule=\"evenodd\" />\n                      </svg>\n                    </button>\n                  </span>\n                  <div v-else>\n                    <button class=\"\n                        bg-white\n                        hover:bg-green-100\n                        text-green-800\n                        font-semibold\n                        py-2\n                        px-4\n                        border border-green-400\n                        rounded\n                        shadow\n                      \" @click=\"livrer(u)\" v-if=\"u.idEtatdemande != livre\">\n                      Livrer\n                    </button>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"\n            flex flex-col\n            items-center\n            px-2\n            py-2\n            bg-white\n            border-t\n            xs:flex-row\n            xs:justify-between\n          \">\n          <div class=\"inline-flex xs:mt-0\">\n            <!-- PAGINATION -->\n            <pagination-vue :current=\"page\" :total=\"this.demandes.length\" :per-page=\"perpage\"\n              @page-changed=\"ChangePage\"></pagination-vue>\n          </div>\n        </div>\n      </div>\n\n\n    </div>\n  </div>\n</template>\n<script lang=\"js\">\nimport BreadCrumb from \"../../components/Intermediaire/BreadCrumb.vue\";\nimport { ref } from 'vue'\nimport axios from \"axios\";\nimport PaginationVue from \"../../components/Intermediaire/pagination/PaginationVue.vue\";\nimport FilesModal from \"./FilesModal.vue\";\n\nexport default {\n  components: {\n    BreadCrumb,\n    PaginationVue,\n    FilesModal\n  },\n  data() {\n    return {\n      demandes: [],\n      open: ref(false),\n      success: false,\n      description: '',\n      depart: '',\n      arrive: '',\n      num: '',\n      villes: [],\n      updateinputdisable: true,\n      update: true,\n      descupdate: \"\",\n      departupdate: \"\",\n      arriveupdate: \"\",\n      poids: \"\",\n      largeur: \"\",\n      hauteur: \"\",\n      datedemande: \"\",\n      page: 1,\n      perpage: 5,\n      departfilter: '',\n      arrivefilter: '',\n      today: new Date().toISOString().split(\"T\")[0],\n      Files: \"\",\n    }\n  },\n\n  created() {\n    axios\n      .get(\n        \"http://localhost:5000/api/EtatDemandeLivraisons/check?etat=livre\"\n      )\n      .then((response) => {\n        this.livre = response.data.idEtatDemande;\n      }),\n      axios\n        .get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\"))\n        .then((response) => {\n          this.demandes = response.data\n        })\n\n    axios.get('http://localhost:5000/api/villes').then((resp) => this.villes = resp.data)\n\n\n  },\n  methods: {\n    FileSelected(event) {\n      this.Files = event.target.files;\n      console.log(this.Files);\n    },\n    ChangePage(NumPage) {\n      this.page = NumPage;\n\n      axios\n        .get(\n          \"http://localhost:5000/api/demandelivraisons/client/\" +\n          localStorage.getItem(\"iduser\") +\n          \"?page=\" +\n          this.page +\n          \"&quantityPage=\" +\n          this.perpage +\n          \"&depart=\" +\n          this.departfilter +\n          \"&arrive=\" +\n          this.arrivefilter +\n          \"&num=\" +\n          this.num\n        )\n        .then((resp) => {\n          this.demandes = resp.data;\n        });\n\n    },\n    livrer(u) {\n      axios.put(\n        \"http://localhost:5000/api/demandelivraisons/\" + u.idDemande,\n        {\n          idDemande: u.idDemande,\n          description: u.description,\n          datecreation: u.datecreation,\n          adressdepart: u.adressdepart,\n          adressarrive: u.adressarrive,\n          date: u.date,\n          poids: u.poids,\n          largeur: u.largeur,\n          hauteur: u.hauteur,\n          idEtatdemande: this.livre,\n          idclient: u.idclient,\n        }\n      ).then(() => {\n        axios\n          .get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\"))\n          .then((response) => {\n            this.demandes = response.data\n            Swal.fire(\n              'Updated!',\n              'Your offer has been updated.',\n              'success'\n            )\n          })\n\n      });\n    },\n    updatedemande(id, index) {\n      axios.put('http://localhost:5000/api/demandelivraisons/' + id, {\n        \"idDemande\": id,\n        \"description\": this.demandes[index].description,\n        \"datecreation\": this.demandes[index].datecreation,\n        \"adressdepart\": this.demandes[index].adressdepart,\n        \"poids\": this.demandes[index].poids,\n        \"largeur\": this.demandes[index].largeur,\n        \"hauteur\": this.demandes[index].hauteur,\n        \"date\": this.demandes[index].date,\n        \"adressarrive\": this.demandes[index].adressarrive,\n        \"idEtatdemande\": this.demandes[index].idEtatdemande,\n        \"idclient\": this.demandes[index].idclient,\n      }).then(() => {\n        this.updateinputdisable = !this.updateinputdisable\n      })\n    },\n    demandelivraisons() {\n      const date = new Date();\n      if (this.depart == this.arrive) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Adresse depart et arrivé doit etre different',\n        })\n      } else {\n\n\n        axios.post('http://localhost:5000/api/demandelivraisons', {\n          \"description\": this.description,\n          \"datecreation\": date.getFullYear() + '-' + date.getMonth() + '-' + date.getDate(),\n          \"adressdepart\": this.depart,\n          \"adressarrive\": this.arrive,\n          \"poids\": this.poids,\n          \"largeur\": this.largeur,\n          \"hauteur\": this.hauteur,\n          \"date\": this.datedemande,\n          \"idEtatdemande\": 2002,\n          \"idclient\": parseInt(localStorage.getItem(\"clientid\"))\n        }).then((r) => {\n      for (let i = 0; i < this.Files.length; i++) {\n            let filedemande = new FormData();\n            filedemande.append(\"idDemande\", r.data.idDemande);\n            filedemande.append(\"File\", this.Files[i]);\n            axios.post(\"http://localhost:5000/api/filedemandelivraisons/\", filedemande)\n      }\n\n\n\n          axios\n            .get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\"))\n            .then((response) => {\n              this.demandes = response.data\n            })\n\n          this.open = false;\n          Swal.fire(\n            'Ajouté!',\n            'Demande Ajouté Avec Succée',\n            'success'\n          )\n\n        })\n          .catch((error) => console.log(error))\n      }\n\n    },\n\n    supprimer(id) {\n      Swal.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          axios.delete('http://localhost:5000/api/demandelivraisons/' + id)\n            .then(() => {\n              axios\n                .get(\"http://localhost:5000/api/demandelivraisons/client/\" + localStorage.getItem(\"iduser\"))\n                .then((response) => {\n                  this.demandes = response.data\n                })\n            })\n\n          Swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: 'Your file has been deleted.',\n            showConfirmButton: false,\n            timer: 800\n          })\n        }\n      })\n\n    }\n  }\n}\n</script>\n<style>\n.modal {\n  transition: opacity 0.25s ease;\n}\n</style>"]},"metadata":{},"sourceType":"module"}
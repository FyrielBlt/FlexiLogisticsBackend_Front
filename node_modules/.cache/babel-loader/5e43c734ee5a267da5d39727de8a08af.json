{"ast":null,"code":"import axios from \"axios\";\nimport url from \"../../../store/Api\";\nexport default {\n  props: [\"trajettable\"],\n\n  data() {\n    return {\n      open: false,\n      exists: \"\",\n      sucess: false,\n      error: false,\n      dateheure: \"\",\n      today: new Date().toISOString().substr(0, 10) + \"T00:00:00.000\"\n    };\n  },\n\n  methods: {\n    ModifierTrajet() {\n      axios.get(url + \"Trajets/\" + this.trajettable.idCamion + \"/camion\" + \"?date=\" + this.dateheure.toString().substr(0, 10)).then(resp => {\n        console.log(resp.data);\n        this.exists = resp.data.length;\n\n        if (this.exists != 0) {\n          this.$swal({\n            position: \"top-end\",\n            icon: \"error\",\n            toast: true,\n            title: \"Camion occupé dans ce date\",\n            showConfirmButton: false,\n            timer: 2000\n          });\n        } else {\n          axios.put(url + \"Trajets/\" + this.trajettable.idTrajet, {\n            idTrajet: this.trajettable.idTrajet,\n            idVille1: this.trajettable.idVille1,\n            idVille2: this.trajettable.idVille2,\n            idCamion: this.trajettable.idCamion,\n            date: this.dateheure.toString().substr(0, 10),\n            heurdepart: this.dateheure.toString().substr(11, 16)\n          }).then(() => {\n            this.$swal({\n              position: \"top-end\",\n              icon: \"success\",\n              toast: true,\n              title: \"Date Trajet modifié \",\n              showConfirmButton: false,\n              timer: 2000\n            });\n            location.replace(\"trajets\");\n          }).catch(error => console.log(error));\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAoHA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,eAAe;AACbC,OAAK,EAAE,CAAC,aAAD,CADM;;AAEbC,MAAI,GAAG;AACL,WAAO;AACLC,UAAI,EAAE,KADD;AAELC,YAAM,EAAE,EAFH;AAGLC,YAAM,EAAE,KAHH;AAILC,WAAK,EAAE,KAJF;AAKLC,eAAS,EAAE,EALN;AAMLC,WAAK,EAAE,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,MAAzB,CAAgC,CAAhC,EAAmC,EAAnC,IAAyC;AAN3C,KAAP;AAQD,GAXY;;AAYbC,SAAO,EAAE;AACPC,kBAAc,GAAG;AACfd,WAAI,CACDe,GADH,CAEId,GAAG,GAAC,UAAJ,GACE,KAAKe,WAAL,CAAiBC,QADnB,GAEE,SAFF,GAGE,QAHF,GAIE,KAAKT,SAAL,CAAeU,QAAf,GAA0BN,MAA1B,CAAiC,CAAjC,EAAoC,EAApC,CANN,EAQGO,IARH,CAQSC,IAAD,IAAU;AACdC,eAAO,CAACC,GAAR,CAAYF,IAAI,CAACjB,IAAjB;AACA,aAAKE,MAAL,GAAce,IAAI,CAACjB,IAAL,CAAUoB,MAAxB;;AACA,YAAI,KAAKlB,MAAL,IAAe,CAAnB,EAAsB;AACpB,eAAKmB,KAAL,CAAW;AACTC,oBAAQ,EAAE,SADD;AAETC,gBAAI,EAAE,OAFG;AAGTC,iBAAK,EAAE,IAHE;AAITC,iBAAK,EAAE,4BAJE;AAKTC,6BAAiB,EAAE,KALV;AAMTC,iBAAK,EAAE;AANE,WAAX;AAQF,SATA,MASO;AACL9B,eAAI,CACD+B,GADH,CAEI9B,GAAG,GAAC,UAAJ,GACE,KAAKe,WAAL,CAAiBgB,QAHvB,EAII;AACEA,oBAAQ,EAAE,KAAKhB,WAAL,CAAiBgB,QAD7B;AAEEC,oBAAQ,EAAE,KAAKjB,WAAL,CAAiBiB,QAF7B;AAGEC,oBAAQ,EAAE,KAAKlB,WAAL,CAAiBkB,QAH7B;AAIEjB,oBAAQ,EAAE,KAAKD,WAAL,CAAiBC,QAJ7B;AAKEkB,gBAAI,EAAE,KAAK3B,SAAL,CAAeU,QAAf,GAA0BN,MAA1B,CAAiC,CAAjC,EAAoC,EAApC,CALR;AAMEwB,sBAAU,EAAE,KAAK5B,SAAL,CAAeU,QAAf,GAA0BN,MAA1B,CAAiC,EAAjC,EAAqC,EAArC;AANd,WAJJ,EAaGO,IAbH,CAaQ,MAAM;AACV,iBAAKK,KAAL,CAAW;AACTC,sBAAQ,EAAE,SADD;AAETC,kBAAI,EAAE,SAFG;AAGTC,mBAAK,EAAE,IAHE;AAITC,mBAAK,EAAE,sBAJE;AAKTC,+BAAiB,EAAE,KALV;AAMTC,mBAAK,EAAE;AANE,aAAX;AAQAO,oBAAQ,CAACC,OAAT,CAAiB,SAAjB;AACD,WAvBH,EAwBGC,KAxBH,CAwBUhC,KAAD,IAAWc,OAAO,CAACC,GAAR,CAAYf,KAAZ,CAxBpB;AAyBF;AACD,OA/CH;AAgDD;;AAlDM;AAZI,CAAf","names":["axios","url","props","data","open","exists","sucess","error","dateheure","today","Date","toISOString","substr","methods","ModifierTrajet","get","trajettable","idCamion","toString","then","resp","console","log","length","$swal","position","icon","toast","title","showConfirmButton","timer","put","idTrajet","idVille1","idVille2","date","heurdepart","location","replace","catch"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Transporteur\\Trajets\\ModalLayoutTrajetUpdate.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- Breadcrumb -->\n    <span class=\"text-blue-500 flex justify-center\">\n      <button @click=\"open = true\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"h-5 w-5 text-blue-700\"\n          viewBox=\"0 0 20 20\"\n          fill=\"currentColor\"\n        >\n          <path\n            d=\"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z\"\n          />\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\"\n            clip-rule=\"evenodd\"\n          />\n        </svg>\n      </button>\n    </span>\n\n    <div\n      :class=\"`modal ${\n        !open && 'opacity-0 pointer-events-none'\n      } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`\"\n    >\n      <div\n        @click=\"open = false\"\n        class=\"absolute w-full h-full bg-gray-900 opacity-50 modal-overlay\"\n      ></div>\n\n      <div\n        class=\"z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded shadow-lg modal-container md:max-w-md\"\n      >\n        <div\n          class=\"absolute top-0 right-0 z-50 flex flex-col items-center mt-4 mr-4 text-sm text-white cursor-pointer modal-close\"\n        >\n          <svg\n            class=\"text-white fill-current\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 18 18\"\n          >\n            <path\n              d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\"\n            />\n          </svg>\n          <span class=\"text-sm\">(Esc)</span>\n        </div>\n\n        <div class=\"px-6 py-4 text-center modal-content\">\n          <p class=\"text-2xl font-bold\">Modifier Trajet</p>\n\n          <form @submit.prevent=\"ModifierTrajet\">\n            <div class=\"relative block mt-2 sm:mt-0\">\n              <span> Ville depart :</span>\n              <select\n                class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                :class=\"[\n                  trajettable.idVille1 === ''\n                    ? ' focus:bg-red-100  focus:border-red-800 '\n                    : ' focus:bg-green-100  focus:border-green-800 ',\n                ]\"\n              >\n                <option selected disabled>\n                  {{ trajettable.idVille1Navigation.nomVille }}\n                </option>\n              </select>\n            </div>\n            <div class=\"relative block mt-2 sm:mt-0\">\n              <select\n                class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                :class=\"[\n                  prenom === ''\n                    ? ' focus:bg-red-100  focus:border-red-800 '\n                    : ' focus:bg-green-100  focus:border-green-800 ',\n                ]\"\n              >\n                <option selected disabled>\n                  {{ trajettable.idVille2Navigation.nomVille }}\n                </option>\n              </select>\n            </div>\n            <div class=\"relative block mt-2 sm:mt-0\">\n              <input\n                type=\"datetime-local\"\n                class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                :class=\"[\n                  dateheure === ''\n                    ? ' focus:bg-red-100  focus:border-red-800 '\n                    : ' focus:bg-green-100  focus:border-green-800 ',\n                ]\"\n                width=\"300px\"\n                v-model=\"dateheure\"\n                :min=\"this.today\"\n                required\n              />\n            </div>\n\n            <div class=\"flex justify-end mt-4\">\n              <button\n                class=\"px-2 py-3 font-medium tracking-wide text-white bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none\"\n              >\n                Modifier\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport url from \"../../../store/Api\";\nexport default {\n  props: [\"trajettable\"],\n  data() {\n    return {\n      open: false,\n      exists: \"\",\n      sucess: false,\n      error: false,\n      dateheure: \"\",\n      today: new Date().toISOString().substr(0, 10) + \"T00:00:00.000\",\n    };\n  },\n  methods: {\n    ModifierTrajet() {\n      axios\n        .get(\n          url+\"Trajets/\" +\n            this.trajettable.idCamion +\n            \"/camion\" +\n            \"?date=\" +\n            this.dateheure.toString().substr(0, 10)\n        )\n        .then((resp) => {\n          console.log(resp.data);\n          this.exists = resp.data.length;\n          if (this.exists != 0) {\n            this.$swal({\n              position: \"top-end\",\n              icon: \"error\",\n              toast: true,\n              title: \"Camion occupé dans ce date\",\n              showConfirmButton: false,\n              timer: 2000,\n            });\n          } else {\n            axios\n              .put(\n                url+\"Trajets/\" +\n                  this.trajettable.idTrajet,\n                {\n                  idTrajet: this.trajettable.idTrajet,\n                  idVille1: this.trajettable.idVille1,\n                  idVille2: this.trajettable.idVille2,\n                  idCamion: this.trajettable.idCamion,\n                  date: this.dateheure.toString().substr(0, 10),\n                  heurdepart: this.dateheure.toString().substr(11, 16),\n                }\n              )\n              .then(() => {\n                this.$swal({\n                  position: \"top-end\",\n                  icon: \"success\",\n                  toast: true,\n                  title: \"Date Trajet modifié \",\n                  showConfirmButton: false,\n                  timer: 2000,\n                });\n                location.replace(\"trajets\");\n              })\n              .catch((error) => console.log(error));\n          }\n        });\n    },\n  },\n};\n</script>\n\n<style>\n.modal {\n  transition: opacity 0.25s ease;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
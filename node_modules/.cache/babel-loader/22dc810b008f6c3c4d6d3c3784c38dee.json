{"ast":null,"code":"import { defineComponent } from \"vue\";\nimport axios from \"axios\";\nexport default defineComponent({\n  data() {\n    return {\n      email: \"\",\n      password: \"\"\n    };\n  },\n\n  methods: {\n    login() {\n      axios.post(\"http://localhost:5000/api/login\", {\n        Email: this.email,\n        Motdepasse: this.password\n      }).then(response => {\n        //console.log(response.data);\n        localStorage.setItem(\"type\", response.data.type);\n\n        if (localStorage.getItem(\"type\") == \"intermediaire\") {\n          localStorage.setItem(\"token\", response.data.type.token);\n          localStorage.setItem(\"id\", response.data.validUser.intermediaire[0].idIntermediaire);\n          localStorage.setItem(\"idRole\", response.data.validUser.intermediaire[0].idRole);\n          localStorage.setItem(\"jwt\", \"foo.bar.baz\");\n          console.log(localStorage.getItem(\"jwt\"));\n          this.$router.push({\n            name: \"Intermediaire\"\n          });\n          Swal.fire({\n            icon: 'success',\n            title: 'Hello ' + response.data.validUser.nom + \" \" + response.data.validUser.prenom,\n            text: 'Welcome'\n          });\n        } else if (localStorage.getItem(\"type\") == \"transporteur\") {\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"idtransporteur\", response.data.validUser.transporteur[0].idTransporteur);\n          localStorage.setItem(\"iduser\", response.data.validUser.idUser);\n          localStorage.setItem(\"name\", response.data.validUser.nom);\n          localStorage.setItem(\"prenom\", response.data.validUser.prenom);\n          localStorage.setItem(\"email\", response.data.validUser.email);\n          localStorage.setItem(\"societe\", response.data.validUser.societe);\n          localStorage.setItem(\"image\", response.data.validUser.image);\n          localStorage.setItem(\"jwtt\", 't');\n          this.$router.push({\n            name: \"DashboardTransporteur\"\n          });\n          Swal.fire({\n            icon: 'success',\n            title: 'Hello ' + response.data.validUser.nom + \" \" + response.data.validUser.prenom,\n            text: 'Welcome'\n          });\n        } else if (localStorage.getItem(\"type\") == \"\") {\n          this.$router.push({\n            name: \"Login\"\n          });\n        } else {\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"iduser\", response.data.validUser.idUser);\n          localStorage.setItem(\"name\", response.data.validUser.nom);\n          localStorage.setItem(\"prenom\", response.data.validUser.prenom);\n          localStorage.setItem(\"email\", response.data.validUser.email);\n          localStorage.setItem(\"societe\", response.data.validUser.societe);\n          localStorage.setItem(\"image\", response.data.validUser.image);\n          localStorage.setItem(\"clientid\", response.data.validUser.client[0].idclient);\n          localStorage.setItem(\"jwtc\", 'c');\n          this.$router.push({\n            name: \"DashboardClient\"\n          });\n        } //  console.log(localStorage.getItem(\"type\"));\n        //   else if(localStorage.getItem(\"type\")==\"\"){\n        //    this.$router.push({ name:\"Login\"});         \n        //   }\n        //   else{\n        //     this.$router.push({ name:\"DashboardClient\"});\n        //   }\n        //  console.log(localStorage.getItem(\"type\"));\n\n      }).catch(() => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Something went wrong!'\n        });\n      });\n    }\n\n  }\n});","map":{"version":3,"mappings":"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","names":["defineComponent","axios","data","email","password","methods","login","post","Email","Motdepasse","then","response","localStorage","setItem","type","getItem","token","validUser","intermediaire","idIntermediaire","idRole","console","log","$router","push","name","Swal","fire","icon","title","nom","prenom","text","transporteur","idTransporteur","idUser","societe","image","client","idclient","catch"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\pfe\\frontfinal\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex items-center justify-center h-screen px-6 bg-white r\" >\r\n    <div class=\"w-full max-w-sm p-6  rounded-md shadow-md \" style=\"opacity: 0.9;  background-color: #d2d7e0;\">\r\n      <div class=\"flex items-center justify-center\">\r\n      <div class=\"flex items-center\">\r\n          <svg\r\n            version=\"1.1\"\r\n            id=\"Icons\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            viewBox=\"0 0 32 32\"\r\n            style=\"enable-background: new 0 0 32 32\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <polyline class=\"st0\" points=\"2,9 19,9 19,24 10,24 \" />\r\n            <circle class=\"st0\" cx=\"24\" cy=\"24\" r=\"2\" />\r\n            <circle class=\"st0\" cx=\"8\" cy=\"24\" r=\"2\" />\r\n            <polyline\r\n              class=\"st0\"\r\n              points=\"19,24 19,13 25,13 29,18 29,24 26,24 \"\r\n            />\r\n            <line class=\"st0\" x1=\"4\" y1=\"13\" x2=\"13\" y2=\"13\" />\r\n            <line class=\"st0\" x1=\"2\" y1=\"17\" x2=\"11\" y2=\"17\" />\r\n            <rect x=\"-288\" y=\"-432\" class=\"st3\" width=\"536\" height=\"680\" />\r\n          </svg>\r\n\r\n          <span class=\"mx-2 text-2xl font-semibold \"  style=\"color:#385183\">P F E 2022</span>\r\n        </div>\r\n      </div>\r\n\r\n      <form class=\"mt-4\" @submit.prevent=\"login\">\r\n        <label class=\"block\">\r\n          <span class=\"text-sm text-gray-700\">Email</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"\r\n              block\r\n              w-full\r\n              mt-1\r\n              border-gray-200\r\n              rounded-md\r\n              focus:border-indigo-600\r\n              focus:ring\r\n              focus:ring-opacity-40\r\n              focus:ring-indigo-500\r\n            \"\r\n            v-model=\"email\"\r\n          />\r\n        </label>\r\n\r\n        <label class=\"block mt-3\">\r\n          <span class=\"text-sm text-gray-700\">Password</span>\r\n          <input\r\n            type=\"password\"\r\n            class=\"\r\n              block\r\n              w-full\r\n              mt-1\r\n              border-gray-200\r\n              rounded-md\r\n              focus:border-indigo-600\r\n              focus:ring\r\n              focus:ring-opacity-40\r\n              focus:ring-indigo-500\r\n            \"\r\n            v-model=\"password\"\r\n          />\r\n        </label>\r\n\r\n        <div class=\"flex items-center justify-between mt-4\">\r\n         \r\n          <div>\r\n            <a\r\n              class=\"block text-sm text-indigo-700 fontme hover:underline\"\r\n              href=\"#\"\r\n              >Forgot your password?</a\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-6\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"\r\n              w-full\r\n              px-4\r\n              py-2\r\n              text-sm text-center text-white\r\n              bg-indigo-600\r\n              rounded-md\r\n              focus:outline-none\r\n              hover:bg-indigo-500\r\n            \"\r\n          >\r\n            Sign in\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script >\r\nimport { defineComponent } from \"vue\";\r\nimport axios from \"axios\";\r\nexport default defineComponent({\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n    login() {\r\n      axios\r\n        .post(\"http://localhost:5000/api/login\", {\r\n          Email: this.email,\r\n          Motdepasse: this.password,\r\n        })\r\n        .then((response) => {\r\n          //console.log(response.data);\r\n\r\n          localStorage.setItem(\"type\", response.data.type);\r\n\r\n          if (localStorage.getItem(\"type\") == \"intermediaire\") {\r\n            localStorage.setItem(\"token\", response.data.type.token);\r\n            localStorage.setItem(\r\n              \"id\",\r\n              response.data.validUser.intermediaire[0].idIntermediaire\r\n            );\r\n            localStorage.setItem(\r\n              \"idRole\",\r\n              response.data.validUser.intermediaire[0].idRole\r\n            );\r\n              localStorage.setItem(\r\n              \"jwt\",\r\n             \"foo.bar.baz\"\r\n            );\r\n            console.log(localStorage.getItem(\"jwt\"));\r\n\r\n            this.$router.push({ name: \"Intermediaire\" });\r\n             Swal.fire({\r\n  icon: 'success',\r\n  title: 'Hello '+response.data.validUser.nom +\" \"+response.data.validUser.prenom,\r\n  text: 'Welcome',\r\n \r\n})\r\n          } else if (localStorage.getItem(\"type\") == \"transporteur\") {\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            localStorage.setItem(\"idtransporteur\", response.data.validUser.transporteur[0].idTransporteur);\r\n            localStorage.setItem(\"iduser\", response.data.validUser.idUser);\r\n            localStorage.setItem(\"name\", response.data.validUser.nom);\r\n            localStorage.setItem(\"prenom\", response.data.validUser.prenom);\r\n            localStorage.setItem(\"email\", response.data.validUser.email);\r\n            localStorage.setItem(\"societe\", response.data.validUser.societe);\r\n            localStorage.setItem(\"image\", response.data.validUser.image);\r\n            localStorage.setItem(\"jwtt\", 't');\r\n            this.$router.push({ name: \"DashboardTransporteur\" });\r\n             Swal.fire({\r\n  icon: 'success',\r\n  title: 'Hello '+response.data.validUser.nom +\" \"+response.data.validUser.prenom,\r\n  text: 'Welcome',\r\n \r\n})\r\n          } else if (localStorage.getItem(\"type\") == \"\") {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else {\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            localStorage.setItem(\"iduser\", response.data.validUser.idUser);\r\n            localStorage.setItem(\"name\", response.data.validUser.nom);\r\n            localStorage.setItem(\"prenom\", response.data.validUser.prenom);\r\n            localStorage.setItem(\"email\", response.data.validUser.email);\r\n            localStorage.setItem(\"societe\", response.data.validUser.societe);\r\n            localStorage.setItem(\"image\", response.data.validUser.image);\r\n            localStorage.setItem(\"clientid\", response.data.validUser.client[0].idclient);\r\n            localStorage.setItem(\"jwtc\", 'c');\r\n            this.$router.push({ name: \"DashboardClient\" });\r\n          }\r\n\r\n          //  console.log(localStorage.getItem(\"type\"));\r\n        //   else if(localStorage.getItem(\"type\")==\"\"){\r\n        //    this.$router.push({ name:\"Login\"});         \r\n        //   }\r\n        //   else{\r\n        //     this.$router.push({ name:\"DashboardClient\"});\r\n        //   }\r\n          \r\n        //  console.log(localStorage.getItem(\"type\"));\r\n         }).catch(()=>{\r\n           Swal.fire({\r\n  icon: 'error',\r\n  title: 'Oops...',\r\n  text: 'Something went wrong!',\r\n \r\n})\r\n         });\r\n    },\r\n  },\r\n});\r\n</script>\r\n<style>\r\n.r{\r\n\r\n background-image: url('../assets/malek.png');\r\n background-repeat:no-repeat;\r\n background-position:50% 50%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}
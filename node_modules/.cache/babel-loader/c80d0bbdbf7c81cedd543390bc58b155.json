{"ast":null,"code":"import Url from \"../Api.js\";\nimport axios from \"axios\";\nconst Token = localStorage.getItem('token');\nexport default {\n  state: {\n    //liste de transporteur\n    ListeTransporteursAll: [],\n    ListeTransporteurs: [],\n    currentTransporteur: 1,\n    perPageTransporteur: 1,\n    parPageTransporteur: 3,\n    totalTransporteur: 10,\n    ChercherTransporteur: \"\",\n    // trajet\n    ChercherVille1: \"\",\n    ChercherVille2: \"\"\n  },\n  getters: {\n    //return les transporteurs\n    ListeTransporteursAll(state) {\n      return state.ListeTransporteursAll;\n    },\n\n    ListeTransporteurs(state) {\n      return state.ListeTransporteurs;\n    },\n\n    currentTransporteur(state) {\n      return state.currentTransporteur;\n    },\n\n    perPageTransporteur(state) {\n      return state.perPageTransporteur;\n    },\n\n    parPageTransporteur(state) {\n      return state.parPageTransporteur;\n    },\n\n    totalTransporteur(state) {\n      return state.totalTransporteur;\n    },\n\n    //trajet\n    ListeTrajets(state) {\n      return state.ListeTrajets;\n    },\n\n    ChercherVille1(state) {\n      return state.ChercherVille1;\n    },\n\n    ChercherVille2(state) {\n      return state.ChercherVille2;\n    }\n\n  },\n  mutations: {\n    //trajet\n    GetTrajet(state, value) {\n      //state.ListeTrajets = value.data;\n      state.ListeTransporteurs = value.data.map(el => el.idCamionNavigation).map(el => el.idtransporteurNavigation);\n      state.totalTransporteur = parseInt(value.headers[\"x-wp-total\"]);\n    },\n\n    //   ModifierTransporteurTrajet(state, value) {   \n    //     console.log(value);       \n    //     state.ListeTransporteurs = value;\n    // },\n    // get all d'une page\n    GetTransporteur(state, value) {\n      state.ListeTransporteurs = value.data;\n      state.totalTransporteur = parseInt(value.headers[\"x-wp-total\"]);\n    },\n\n    GetTransporteurAll(state, value) {\n      state.ListeTransporteursAll = value;\n    },\n\n    // supprimer \n    DeleteTransporteur(state, transporteur) {\n      state.ListeTransporteurs.splice(state.ListeTransporteurs.indexOf(transporteur), 1);\n      axios.delete(Url + \"Transporteurs/\" + transporteur.idTransporteur, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then();\n      axios.delete(Url + \"Users/\" + transporteur.idUser, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then();\n    },\n\n    // Modifier\n    ModifierTransporteur(state, user) {\n      // state.ListeTransporteurs[transporteur.index] = transporteur;\n      // modifier users\n      // console.log(user.get(\"idUser\"));\n      axios.put(Url + \"users/\" + user.idUserNavigation.get(\"idUser\"), user.idUserNavigation, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        user.idUserNavigation = res.data;\n        user.imageSrc = res.data.imageSrc;\n        state.ListeTransporteurs[user.index] = user;\n        console.log(user);\n      }); // .catch((rer) => console.log(rer));\n    },\n\n    // Ajouter\n    AjouterTransporteur(state, transporteur) {\n      axios.post(Url + \"users\", transporteur, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(res.data);\n        let UserAjouter = res.data;\n        var Transporteur = {\n          \"idUser\": res.data.idUser\n        };\n        axios.post(Url + \"Transporteurs\", Transporteur, {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then(res => {\n          let TransporteurAjouter = res.data;\n          TransporteurAjouter.imageSrc = UserAjouter.imageSrc;\n          TransporteurAjouter.idUserNavigation = UserAjouter;\n          state.ListeTransporteurs.push(TransporteurAjouter);\n        });\n      });\n    }\n\n  },\n  actions: {\n    //Chercher transporteur a l'aide nom , ville1 ville2 \n    Chercher_Trajet({\n      commit,\n      state\n    }, chercher) {\n      state.ChercherVille1 = chercher.ville1;\n      state.ChercherVille2 = chercher.ville2;\n\n      if (chercher.ville1 != \"\" && chercher.ville2 != \"\") {\n        state.currentTransporteur = 1;\n      }\n\n      state.ChercherTransporteur = chercher.name;\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTrajet', res);\n      });\n    },\n\n    // get noveau page \n    Get_NoveauTrajet({\n      commit,\n      state\n    }, NumPage) {\n      state.currentTransporteur = NumPage;\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTrajet', res);\n      });\n    },\n\n    Changer_ParpageTrajet({\n      commit,\n      state\n    }, Parpage) {\n      state.currentTransporteur = 1;\n      state.parPageTransporteur = Parpage;\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTrajet', res);\n      });\n    },\n\n    //************************************ */\n    //get page :\n    Get_Transporteur({\n      commit,\n      state\n    }) {\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTransporteur', res);\n      });\n    },\n\n    // get noveau page \n    Get_NoveauTransporteur({\n      commit,\n      state\n    }, NumPage) {\n      state.currentTransporteur = NumPage;\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTransporteur', res);\n      });\n    },\n\n    Changer_ParpageTransporteur({\n      commit,\n      state\n    }, Parpage) {\n      state.currentTransporteur = 1;\n      state.parPageTransporteur = Parpage;\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTransporteur', res);\n      });\n    },\n\n    //recherche\n    Chercher_Transporteur({\n      commit,\n      state\n    }, chercher) {\n      state.currentTransporteur = 1;\n      state.ChercherTransporteur = chercher;\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        //  let tot=parseInt(res.headers[\"x-wp-total\"]);\n        commit('GetTransporteur', res);\n      });\n    },\n\n    //get all\n    Get_Transporteur_All({\n      commit\n    }) {\n      axios.get(Url + \"Transporteurs\", {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(res.data);\n        commit('GetTransporteurAll', res.data);\n      });\n    },\n\n    // delete\n    Delete_Transporteur({\n      commit\n    }, transporteur) {\n      commit('DeleteTransporteur', transporteur);\n    },\n\n    // modifier\n    Modifier_Transporteur({\n      commit\n    }, value) {\n      commit('ModifierTransporteur', value);\n    },\n\n    // Ajouter\n    Ajouter_Transporteur({\n      commit\n    }, transporteur) {\n      commit('AjouterTransporteur', transporteur);\n    } //sdfhsjdkf\n    //   Modifier_TransporteurTrajet({ commit }, l) {\n    //     commit('ModifierTransporteurTrajet', l);\n    // },\n\n\n  }\n};","map":{"version":3,"sources":["C:/Users/Karim Omrane/Desktop/PFE FI/FRONT/src/store/users/Transporteur.js"],"names":["Url","axios","Token","localStorage","getItem","state","ListeTransporteursAll","ListeTransporteurs","currentTransporteur","perPageTransporteur","parPageTransporteur","totalTransporteur","ChercherTransporteur","ChercherVille1","ChercherVille2","getters","ListeTrajets","mutations","GetTrajet","value","data","map","el","idCamionNavigation","idtransporteurNavigation","parseInt","headers","GetTransporteur","GetTransporteurAll","DeleteTransporteur","transporteur","splice","indexOf","delete","idTransporteur","Authorization","then","idUser","ModifierTransporteur","user","put","idUserNavigation","get","res","imageSrc","index","console","log","AjouterTransporteur","post","UserAjouter","Transporteur","TransporteurAjouter","push","actions","Chercher_Trajet","commit","chercher","ville1","ville2","name","Get_NoveauTrajet","NumPage","Changer_ParpageTrajet","Parpage","Get_Transporteur","Get_NoveauTransporteur","Changer_ParpageTransporteur","Chercher_Transporteur","Get_Transporteur_All","Delete_Transporteur","Modifier_Transporteur","Ajouter_Transporteur"],"mappings":"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","sourcesContent":["import Url from \"../Api.js\";\r\nimport axios from \"axios\";\r\nconst Token = localStorage.getItem('token');\r\nexport default {\r\n  state: {\r\n    //liste de transporteur\r\n    ListeTransporteursAll: [],\r\n    ListeTransporteurs: [],\r\n    currentTransporteur: 1,\r\n    perPageTransporteur: 1,\r\n    parPageTransporteur: 3,\r\n    totalTransporteur: 10,\r\n    ChercherTransporteur: \"\",\r\n    // trajet\r\n    ChercherVille1: \"\",\r\n    ChercherVille2: \"\"\r\n\r\n  },\r\n  getters: {\r\n    //return les transporteurs\r\n    ListeTransporteursAll(state) {\r\n      return state.ListeTransporteursAll;\r\n    },\r\n    ListeTransporteurs(state) {\r\n      return state.ListeTransporteurs;\r\n    },\r\n    currentTransporteur(state) {\r\n      return state.currentTransporteur;\r\n    },\r\n    perPageTransporteur(state) {\r\n      return state.perPageTransporteur;\r\n    },\r\n    parPageTransporteur(state) {\r\n      return state.parPageTransporteur;\r\n    },\r\n    totalTransporteur(state) {\r\n      return state.totalTransporteur;\r\n    },\r\n    //trajet\r\n    ListeTrajets(state) {\r\n      return state.ListeTrajets;\r\n    },\r\n    ChercherVille1(state) {\r\n      return state.ChercherVille1;\r\n    },\r\n    ChercherVille2(state) {\r\n      return state.ChercherVille2;\r\n    },\r\n\r\n  },\r\n  mutations: {\r\n    //trajet\r\n    GetTrajet(state, value) {\r\n     \r\n      //state.ListeTrajets = value.data;\r\n      state.ListeTransporteurs = value.data.map(el => el.idCamionNavigation)\r\n        .map(el => el.idtransporteurNavigation);\r\n      state.totalTransporteur = parseInt(value.headers[\"x-wp-total\"]);\r\n\r\n    },\r\n    //   ModifierTransporteurTrajet(state, value) {   \r\n    //     console.log(value);       \r\n    //     state.ListeTransporteurs = value;\r\n\r\n    // },\r\n    // get all d'une page\r\n    GetTransporteur(state, value) {\r\n      state.ListeTransporteurs = value.data;\r\n      state.totalTransporteur = parseInt(value.headers[\"x-wp-total\"]);\r\n    },\r\n    GetTransporteurAll(state, value) {\r\n      state.ListeTransporteursAll = value;\r\n    },\r\n    // supprimer \r\n    DeleteTransporteur(state, transporteur) {\r\n      state.ListeTransporteurs.splice(state.ListeTransporteurs.indexOf(transporteur), 1);\r\n      axios.delete(Url + \"Transporteurs/\" + transporteur.idTransporteur, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      }).then();\r\n      axios.delete(Url + \"Users/\" + transporteur.idUser, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      }).then();\r\n    },\r\n    // Modifier\r\n    ModifierTransporteur(state, user) {\r\n      // state.ListeTransporteurs[transporteur.index] = transporteur;\r\n      // modifier users\r\n     // console.log(user.get(\"idUser\"));\r\n      axios\r\n        .put(Url + \"users/\" + user.idUserNavigation.get(\"idUser\"), user.idUserNavigation, {\r\n          headers: {\r\n            Authorization: 'Bearer ' + Token\r\n          }\r\n        })\r\n        .then(res => {\r\n          user.idUserNavigation=res.data;\r\n          user.imageSrc=res.data.imageSrc;\r\n          state.ListeTransporteurs[user.index] = user;\r\n          console.log(user);\r\n        });\r\n        // .catch((rer) => console.log(rer));\r\n\r\n    },\r\n    // Ajouter\r\n    AjouterTransporteur(state, transporteur) {\r\n      axios.post(Url + \"users\", transporteur, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      }).then(res => {\r\n        console.log(res.data);\r\n        let UserAjouter = res.data;\r\n        var Transporteur = {\r\n          \"idUser\": res.data.idUser,\r\n        };\r\n\r\n        axios.post(Url + \"Transporteurs\", Transporteur, {\r\n          headers: {\r\n            Authorization: 'Bearer ' + Token\r\n          }\r\n        }).then(res => {\r\n          let TransporteurAjouter = res.data;\r\n          TransporteurAjouter.imageSrc = UserAjouter.imageSrc;\r\n          TransporteurAjouter.idUserNavigation = UserAjouter;\r\n          state.ListeTransporteurs.push(TransporteurAjouter);\r\n\r\n        });\r\n      });\r\n\r\n\r\n    }\r\n  },\r\n  actions: {\r\n    //Chercher transporteur a l'aide nom , ville1 ville2 \r\n    Chercher_Trajet({ commit, state }, chercher) {\r\n\r\n      state.ChercherVille1 = chercher.ville1;\r\n      state.ChercherVille2 = chercher.ville2;\r\n      if (chercher.ville1 != \"\" && chercher.ville2 != \"\") { state.currentTransporteur = 1; }\r\n      state.ChercherTransporteur = chercher.name;\r\n\r\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTrajet', res);\r\n        })\r\n    },\r\n    // get noveau page \r\n    Get_NoveauTrajet({ commit, state }, NumPage) {\r\n      state.currentTransporteur = NumPage;\r\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTrajet', res);\r\n        })\r\n    },\r\n    Changer_ParpageTrajet({ commit, state }, Parpage) {\r\n      state.currentTransporteur = 1;\r\n      state.parPageTransporteur = Parpage;\r\n      axios.get(Url + `Trajets?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}&ville1=${state.ChercherVille1}&ville2=${state.ChercherVille2}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTrajet', res);\r\n        })\r\n    },\r\n    //************************************ */\r\n    //get page :\r\n    Get_Transporteur({ commit, state }) {\r\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTransporteur', res);\r\n        })\r\n    },\r\n\r\n\r\n    // get noveau page \r\n    Get_NoveauTransporteur({ commit, state }, NumPage) {\r\n      state.currentTransporteur = NumPage;\r\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTransporteur', res);\r\n        })\r\n    },\r\n    Changer_ParpageTransporteur({ commit, state }, Parpage) {\r\n      state.currentTransporteur = 1;\r\n      state.parPageTransporteur = Parpage;\r\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTransporteur', res);\r\n        })\r\n    },\r\n    //recherche\r\n    Chercher_Transporteur({ commit, state }, chercher) {\r\n      state.currentTransporteur = 1;\r\n      state.ChercherTransporteur = chercher;\r\n      axios.get(Url + `Transporteurs?page=${state.currentTransporteur}&quantityPage=${state.parPageTransporteur}&name=${state.ChercherTransporteur}`, {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          //  let tot=parseInt(res.headers[\"x-wp-total\"]);\r\n          commit('GetTransporteur', res);\r\n        })\r\n    },\r\n    //get all\r\n    Get_Transporteur_All({ commit }) {\r\n      axios.get(Url + \"Transporteurs\", {\r\n        headers: {\r\n          Authorization: 'Bearer ' + Token\r\n        }\r\n      })\r\n        .then(res => {\r\n          console.log(res.data);\r\n          commit('GetTransporteurAll', res.data);\r\n        })\r\n    },\r\n    // delete\r\n    Delete_Transporteur({ commit }, transporteur) {\r\n      commit('DeleteTransporteur', transporteur);\r\n    },\r\n    // modifier\r\n    Modifier_Transporteur({ commit }, value) {\r\n      commit('ModifierTransporteur', value);\r\n    },\r\n    // Ajouter\r\n    Ajouter_Transporteur({ commit }, transporteur) {\r\n      commit('AjouterTransporteur', transporteur);\r\n    },\r\n    //sdfhsjdkf\r\n    //   Modifier_TransporteurTrajet({ commit }, l) {\r\n    //     commit('ModifierTransporteurTrajet', l);\r\n    // },\r\n  },\r\n};\r\n"]},"metadata":{},"sourceType":"module"}
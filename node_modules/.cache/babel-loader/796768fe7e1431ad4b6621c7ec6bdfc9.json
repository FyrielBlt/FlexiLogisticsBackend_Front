{"ast":null,"code":"const fileTempl = document.getElementById(\"file-template\"),\n      imageTempl = document.getElementById(\"image-template\"),\n      empty = document.getElementById(\"empty\"); // use to store pre selected files\n\nlet FILES = {}; // check if file is of type image and prepend the initialied\n// template to the target element\n\nfunction addFile(target, file) {\n  const isImage = file.type.match(\"image.*\"),\n        objectURL = URL.createObjectURL(file);\n  const clone = isImage ? imageTempl.content.cloneNode(true) : fileTempl.content.cloneNode(true);\n  clone.querySelector(\"h1\").textContent = file.name;\n  clone.querySelector(\"li\").id = objectURL;\n  clone.querySelector(\".delete\").dataset.target = objectURL;\n  clone.querySelector(\".size\").textContent = file.size > 1024 ? file.size > 1048576 ? Math.round(file.size / 1048576) + \"mb\" : Math.round(file.size / 1024) + \"kb\" : file.size + \"b\";\n  isImage && Object.assign(clone.querySelector(\"img\"), {\n    src: objectURL,\n    alt: file.name\n  });\n  empty.classList.add(\"hidden\");\n  target.prepend(clone);\n  FILES[objectURL] = file;\n}\n\nconst gallery = document.getElementById(\"gallery\"),\n      overlay = document.getElementById(\"overlay\"); // click the hidden input of type file if the visible button is clicked\n// and capture the selected files\n\nconst hidden = document.getElementById(\"hidden-input\");\n\ndocument.getElementById(\"button\").onclick = () => hidden.click();\n\nhidden.onchange = e => {\n  for (const file of e.target.files) {\n    addFile(gallery, file);\n  }\n}; // use to check if a file is being dragged\n\n\nconst hasFiles = ({\n  dataTransfer: {\n    types = []\n  }\n}) => types.indexOf(\"Files\") > -1; // use to drag dragenter and dragleave events.\n// this is to know if the outermost parent is dragged over\n// without issues due to drag events on its children\n\n\nlet counter = 0; // reset counter and append file to gallery when file is dropped\n\nfunction dropHandler(ev) {\n  ev.preventDefault();\n\n  for (const file of ev.dataTransfer.files) {\n    addFile(gallery, file);\n    overlay.classList.remove(\"draggedover\");\n    counter = 0;\n  }\n} // only react to actual files being dragged\n\n\nfunction dragEnterHandler(e) {\n  e.preventDefault();\n\n  if (!hasFiles(e)) {\n    return;\n  }\n\n  ++counter && overlay.classList.add(\"draggedover\");\n}\n\nfunction dragLeaveHandler(e) {\n  1 > --counter && overlay.classList.remove(\"draggedover\");\n}\n\nfunction dragOverHandler(e) {\n  if (hasFiles(e)) {\n    e.preventDefault();\n  }\n} // event delegation to caputre delete events\n// fron the waste buckets in the file preview cards\n\n\ngallery.onclick = ({\n  target\n}) => {\n  if (target.classList.contains(\"delete\")) {\n    const ou = target.dataset.target;\n    document.getElementById(ou).remove(ou);\n    gallery.children.length === 1 && empty.classList.remove(\"hidden\");\n    delete FILES[ou];\n  }\n}; // print all selected files\n\n\ndocument.getElementById(\"submit\").onclick = () => {\n  alert(`Submitted Files:\\n${JSON.stringify(FILES)}`);\n  console.log(FILES);\n}; // clear entire selection\n\n\ndocument.getElementById(\"cancel\").onclick = () => {\n  while (gallery.children.length > 0) {\n    gallery.lastChild.remove();\n  }\n\n  FILES = {};\n  empty.classList.remove(\"hidden\");\n  gallery.append(empty);\n};","map":{"version":3,"mappings":"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","names":["fileTempl","document","getElementById","imageTempl","empty","FILES","addFile","target","file","isImage","type","match","objectURL","URL","createObjectURL","clone","content","cloneNode","querySelector","textContent","name","id","dataset","size","Math","round","Object","assign","src","alt","classList","add","prepend","gallery","overlay","hidden","onclick","click","onchange","e","files","hasFiles","dataTransfer","types","indexOf","counter","dropHandler","ev","preventDefault","remove","dragEnterHandler","dragLeaveHandler","dragOverHandler","contains","ou","children","length","alert","JSON","stringify","console","log","lastChild","append"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Client\\components\\dragdropfile.vue"],"sourcesContent":["<!-- component -->\n<template>\n<div class=\"bg-gray-500 h-screen w-screen sm:px-8 md:px-16 sm:py-8\">\n      <main class=\"container mx-auto max-w-screen-lg h-full\">\n        <!-- file upload modal -->\n        <article aria-label=\"File Upload Modal\" class=\"relative h-full flex flex-col bg-white shadow-xl rounded-md\" ondrop=\"dropHandler(event);\" ondragover=\"dragOverHandler(event);\" ondragleave=\"dragLeaveHandler(event);\" ondragenter=\"dragEnterHandler(event);\">\n          <!-- overlay -->\n          <div id=\"overlay\" class=\"w-full h-full absolute top-0 left-0 pointer-events-none z-50 flex flex-col items-center justify-center rounded-md\">\n            <i>\n              <svg class=\"fill-current w-12 h-12 mb-3 text-blue-700\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M19.479 10.092c-.212-3.951-3.473-7.092-7.479-7.092-4.005 0-7.267 3.141-7.479 7.092-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.521-5.408zm-7.479-1.092l4 4h-3v4h-2v-4h-3l4-4z\" />\n              </svg>\n            </i>\n            <p class=\"text-lg text-blue-700\">Drop files to upload</p>\n          </div>\n\n          <!-- scroll area -->\n          <section class=\"h-full overflow-auto p-8 w-full h-full flex flex-col\">\n            <header class=\"border-dashed border-2 border-gray-400 py-12 flex flex-col justify-center items-center\">\n              <p class=\"mb-3 font-semibold text-gray-900 flex flex-wrap justify-center\">\n                <span>Drag and drop your</span>&nbsp;<span>files anywhere or</span>\n              </p>\n              <input id=\"hidden-input\" type=\"file\" multiple class=\"hidden\" />\n              <button id=\"button\" class=\"mt-2 rounded-sm px-3 py-1 bg-gray-200 hover:bg-gray-300 focus:shadow-outline focus:outline-none\">\n                Upload a file\n              </button>\n            </header>\n\n            <h1 class=\"pt-8 pb-3 font-semibold sm:text-lg text-gray-900\">\n              To Upload\n            </h1>\n\n            <ul id=\"gallery\" class=\"flex flex-1 flex-wrap -m-1\">\n              <li id=\"empty\" class=\"h-full w-full text-center flex flex-col items-center justify-center items-center\">\n                <img class=\"mx-auto w-32\" src=\"https://user-images.githubusercontent.com/507615/54591670-ac0a0180-4a65-11e9-846c-e55ffce0fe7b.png\" alt=\"no data\" />\n                <span class=\"text-small text-gray-500\">No files selected</span>\n              </li>\n            </ul>\n          </section>\n\n          <!-- sticky footer -->\n          <footer class=\"flex justify-end px-8 pb-8 pt-4\">\n            <button id=\"submit\" class=\"rounded-sm px-3 py-1 bg-blue-700 hover:bg-blue-500 text-white focus:shadow-outline focus:outline-none\">\n              Upload now\n            </button>\n            <button id=\"cancel\" class=\"ml-3 rounded-sm px-3 py-1 hover:bg-gray-300 focus:shadow-outline focus:outline-none\">\n              Cancel\n            </button>\n          </footer>\n        </article>\n      </main>\n    </div>\n\n    <!-- using two similar templates for simplicity in js code -->\n    <template id=\"file-template\">\n      <li class=\"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24\">\n        <article tabindex=\"0\" class=\"group w-full h-full rounded-md focus:outline-none focus:shadow-outline elative bg-gray-100 cursor-pointer relative shadow-sm\">\n          <img alt=\"upload preview\" class=\"img-preview hidden w-full h-full sticky object-cover rounded-md bg-fixed\" />\n\n          <section class=\"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3\">\n            <h1 class=\"flex-1 group-hover:text-blue-800\"></h1>\n            <div class=\"flex\">\n              <span class=\"p-1 text-blue-800\">\n                <i>\n                  <svg class=\"fill-current w-4 h-4 ml-auto pt-1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                    <path d=\"M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z\" />\n                  </svg>\n                </i>\n              </span>\n              <p class=\"p-1 size text-xs text-gray-700\"></p>\n              <button class=\"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md text-gray-800\">\n                <svg class=\"pointer-events-none fill-current w-4 h-4 ml-auto\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                  <path class=\"pointer-events-none\" d=\"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z\" />\n                </svg>\n              </button>\n            </div>\n          </section>\n        </article>\n      </li>\n    </template>\n\n    <template id=\"image-template\">\n      <li class=\"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24\">\n        <article tabindex=\"0\" class=\"group hasImage w-full h-full rounded-md focus:outline-none focus:shadow-outline bg-gray-100 cursor-pointer relative text-transparent hover:text-white shadow-sm\">\n          <img alt=\"upload preview\" class=\"img-preview w-full h-full sticky object-cover rounded-md bg-fixed\" />\n\n          <section class=\"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3\">\n            <h1 class=\"flex-1\"></h1>\n            <div class=\"flex\">\n              <span class=\"p-1\">\n                <i>\n                  <svg class=\"fill-current w-4 h-4 ml-auto pt-\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                    <path d=\"M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z\" />\n                  </svg>\n                </i>\n              </span>\n\n              <p class=\"p-1 size text-xs\"></p>\n              <button class=\"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md\">\n                <svg class=\"pointer-events-none fill-current w-4 h-4 ml-auto\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                  <path class=\"pointer-events-none\" d=\"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z\" />\n                </svg>\n              </button>\n            </div>\n          </section>\n        </article>\n      </li>\n    </template>\n</template>\n<script>\nconst fileTempl = document.getElementById(\"file-template\"),\n  imageTempl = document.getElementById(\"image-template\"),\n  empty = document.getElementById(\"empty\");\n\n// use to store pre selected files\nlet FILES = {};\n\n// check if file is of type image and prepend the initialied\n// template to the target element\nfunction addFile(target, file) {\n  const isImage = file.type.match(\"image.*\"),\n    objectURL = URL.createObjectURL(file);\n\n  const clone = isImage\n    ? imageTempl.content.cloneNode(true)\n    : fileTempl.content.cloneNode(true);\n\n  clone.querySelector(\"h1\").textContent = file.name;\n  clone.querySelector(\"li\").id = objectURL;\n  clone.querySelector(\".delete\").dataset.target = objectURL;\n  clone.querySelector(\".size\").textContent =\n    file.size > 1024\n      ? file.size > 1048576\n        ? Math.round(file.size / 1048576) + \"mb\"\n        : Math.round(file.size / 1024) + \"kb\"\n      : file.size + \"b\";\n\n  isImage &&\n    Object.assign(clone.querySelector(\"img\"), {\n      src: objectURL,\n      alt: file.name\n    });\n\n  empty.classList.add(\"hidden\");\n  target.prepend(clone);\n\n  FILES[objectURL] = file;\n}\n\nconst gallery = document.getElementById(\"gallery\"),\n  overlay = document.getElementById(\"overlay\");\n\n// click the hidden input of type file if the visible button is clicked\n// and capture the selected files\nconst hidden = document.getElementById(\"hidden-input\");\ndocument.getElementById(\"button\").onclick = () => hidden.click();\nhidden.onchange = (e) => {\n  for (const file of e.target.files) {\n    addFile(gallery, file);\n  }\n};\n\n// use to check if a file is being dragged\nconst hasFiles = ({ dataTransfer: { types = [] } }) =>\n  types.indexOf(\"Files\") > -1;\n\n// use to drag dragenter and dragleave events.\n// this is to know if the outermost parent is dragged over\n// without issues due to drag events on its children\nlet counter = 0;\n\n// reset counter and append file to gallery when file is dropped\nfunction dropHandler(ev) {\n  ev.preventDefault();\n  for (const file of ev.dataTransfer.files) {\n    addFile(gallery, file);\n    overlay.classList.remove(\"draggedover\");\n    counter = 0;\n  }\n}\n\n// only react to actual files being dragged\nfunction dragEnterHandler(e) {\n  e.preventDefault();\n  if (!hasFiles(e)) {\n    return;\n  }\n  ++counter && overlay.classList.add(\"draggedover\");\n}\n\nfunction dragLeaveHandler(e) {\n  1 > --counter && overlay.classList.remove(\"draggedover\");\n}\n\nfunction dragOverHandler(e) {\n  if (hasFiles(e)) {\n    e.preventDefault();\n  }\n}\n\n// event delegation to caputre delete events\n// fron the waste buckets in the file preview cards\ngallery.onclick = ({ target }) => {\n  if (target.classList.contains(\"delete\")) {\n    const ou = target.dataset.target;\n    document.getElementById(ou).remove(ou);\n    gallery.children.length === 1 && empty.classList.remove(\"hidden\");\n    delete FILES[ou];\n  }\n};\n\n// print all selected files\ndocument.getElementById(\"submit\").onclick = () => {\n  alert(`Submitted Files:\\n${JSON.stringify(FILES)}`);\n  console.log(FILES);\n};\n\n// clear entire selection\ndocument.getElementById(\"cancel\").onclick = () => {\n  while (gallery.children.length > 0) {\n    gallery.lastChild.remove();\n  }\n  FILES = {};\n  empty.classList.remove(\"hidden\");\n  gallery.append(empty);\n};\n\n</script>\n\n<style>\n.hasImage:hover section {\n  background-color: rgba(5, 5, 5, 0.4);\n}\n.hasImage:hover button:hover {\n  background: rgba(5, 5, 5, 0.45);\n}\n\n#overlay p,\ni {\n  opacity: 0;\n}\n\n#overlay.draggedover {\n  background-color: rgba(255, 255, 255, 0.7);\n}\n#overlay.draggedover p,\n#overlay.draggedover i {\n  opacity: 1;\n}\n\n.group:hover .group-hover\\:text-blue-800 {\n  color: #2b6cb0;\n}\n</style>"]},"metadata":{},"sourceType":"script"}
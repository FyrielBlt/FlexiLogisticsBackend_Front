{"ast":null,"code":"import Url from \"../Api.js\";\nimport axios from \"axios\";\nconst Token = localStorage.getItem('token');\nexport default {\n  state: {\n    ListeOffres: []\n  },\n  getters: {\n    ListeOffres(state) {\n      return state.ListeOffres;\n    }\n\n  },\n  mutations: {\n    GetListeOffre(state, value) {\n      state.ListeOffres = value;\n    },\n\n    AccepterOffre(state, ListeOffresId) {\n      //refuser tout les offres puis accepter juste les choisit s\n      for (var j = 0; j < state.ListeOffres.length; j++) {\n        state.ListeOffres[j].idEtat = ListeOffresId.idEtatRefuser;\n        axios.put(Url + \"offres/\" + state.ListeOffres[j].idOffre, state.ListeOffres[j], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then();\n      } //accepter les choisits + donner l'offre au client \n\n\n      for (var i = 0; i < ListeOffresId.ListeOffresId.length; i++) {\n        state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].idEtat = ListeOffresId.idEtatEnCours;\n        state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].prixFinale = state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].prix + 10;\n        console.log(state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0]);\n        axios.put(Url + \"offres/\" + state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].idOffre, state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then(res => {\n          console.log(\"en cour\");\n        });\n      }\n\n      console.log(\"bravo\");\n    },\n\n    AnnulerAccepter(state, annuler) {\n      state.ListeOffres[annuler.index].idEtat = annuler.idEtatRefuser;\n      axios.put(Url + \"offres/\" + annuler.idOffre, state.ListeOffres[annuler.index], {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(\"AnnulerAccepter\");\n      });\n    },\n\n    ValiderAccepter(state, valider) {\n      //refuser tout les offres puis accepter juste les choisit s\n      for (var j = 0; j < state.ListeOffres.length; j++) {\n        state.ListeOffres[j].idEtat = valider.idEtatRefuser;\n        axios.put(Url + \"offres/\" + state.ListeOffres[j].idOffre, state.ListeOffres[j], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then();\n      }\n\n      state.ListeOffres[valider.index].idEtat = valider.idEtatAccepter;\n      axios.put(Url + \"offres/\" + valider.idOffre, state.ListeOffres[valider.index], {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(\"ValiderAccepter\");\n      });\n    }\n\n  },\n  actions: {\n    Accepter_Offre({\n      commit\n    }, ListeOffresId) {\n      commit('AccepterOffre', ListeOffresId);\n    },\n\n    Get_ListeOffre({\n      commit\n    }, value) {\n      commit('GetListeOffre', value);\n    },\n\n    Annuler_Accepter({\n      commit\n    }, annuler) {\n      commit('AnnulerAccepter', annuler);\n    },\n\n    Valider_Accepter({\n      commit\n    }, valider) {\n      commit('ValiderAccepter', valider);\n    }\n\n  }\n};","map":{"version":3,"sources":["C:/Users/Karim Omrane/Desktop/PFE FI/FRONT/src/store/offreRecu/Offre.js"],"names":["Url","axios","Token","localStorage","getItem","state","ListeOffres","getters","mutations","GetListeOffre","value","AccepterOffre","ListeOffresId","j","length","idEtat","idEtatRefuser","put","idOffre","headers","Authorization","then","i","filter","el","idEtatEnCours","prixFinale","prix","console","log","res","AnnulerAccepter","annuler","index","ValiderAccepter","valider","idEtatAccepter","actions","Accepter_Offre","commit","Get_ListeOffre","Annuler_Accepter","Valider_Accepter"],"mappings":"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","sourcesContent":["import Url from \"../Api.js\";\nimport axios from \"axios\";\nconst Token = localStorage.getItem('token');\nexport default {\n  state: {\n    ListeOffres: [],\n\n  },\n  getters: {\n    ListeOffres(state) {\n      return state.ListeOffres;\n    }\n  },\n  mutations: {\n    GetListeOffre(state, value) {\n      state.ListeOffres = value;\n    },\n\n    AccepterOffre(state, ListeOffresId) {\n      //refuser tout les offres puis accepter juste les choisit s\n      for (var j = 0; j < state.ListeOffres.length; j++) {\n        state.ListeOffres[j].idEtat = ListeOffresId.idEtatRefuser;\n        axios.put(Url + \"offres/\" + state.ListeOffres[j].idOffre, state.ListeOffres[j], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then();\n      }\n\n      //accepter les choisits + donner l'offre au client \n      for (var i = 0; i < ListeOffresId.ListeOffresId.length; i++) {\n        state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].idEtat = ListeOffresId.idEtatEnCours;\n        state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].prixFinale =\n          state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].prix + 10;\n        console.log(state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0])\n        axios.put(Url + \"offres/\" + state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0].idOffre, state.ListeOffres.filter(el => el.idOffre == ListeOffresId.ListeOffresId[i])[0], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then(res => {\n          console.log(\"en cour\")\n        });\n      }\n\n      console.log(\"bravo\")\n\n\n\n    },\n    AnnulerAccepter(state, annuler){\n      \n      state.ListeOffres[annuler.index].idEtat=annuler.idEtatRefuser;\n      axios.put(Url + \"offres/\" +annuler.idOffre , state.ListeOffres[annuler.index],{\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(\"AnnulerAccepter\")\n      });\n    },\n    ValiderAccepter(state, valider){\n       //refuser tout les offres puis accepter juste les choisit s\n       for (var j = 0; j < state.ListeOffres.length; j++) {\n        state.ListeOffres[j].idEtat = valider.idEtatRefuser;\n        axios.put(Url + \"offres/\" + state.ListeOffres[j].idOffre, state.ListeOffres[j], {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then();\n      }\n\n      state.ListeOffres[valider.index].idEtat=valider.idEtatAccepter;\n      axios.put(Url + \"offres/\" +valider.idOffre , state.ListeOffres[valider.index],{\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        console.log(\"ValiderAccepter\")\n      });\n    },\n  },\n  actions: {\n\n\n    Accepter_Offre({ commit }, ListeOffresId) {\n      commit('AccepterOffre', ListeOffresId);\n    },\n    Get_ListeOffre({ commit }, value) {\n      commit('GetListeOffre', value);\n    },\n    Annuler_Accepter({ commit }, annuler) {\n      commit('AnnulerAccepter', annuler);\n    },\n    Valider_Accepter({ commit }, valider) {\n      commit('ValiderAccepter', valider);\n    },\n  },\n};\n\n"]},"metadata":{},"sourceType":"module"}
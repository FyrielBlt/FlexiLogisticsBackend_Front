{"ast":null,"code":"//import Breadcrumb from \"../../partials/Breadcrumb.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport ModalDemandeFiles from \"/src/views/Transporteur/Demandes/ModalDemandeFiles.vue\";\n;\nimport ModalLayoutOffre from \"/src/views/Transporteur/Offres/ModalLayoutOffre.vue\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport url from \"../../../store/Api\";\nexport default {\n  components: {\n    ModalLayoutOffre,\n    PaginationVue,\n    ModalDemandeFiles\n  },\n\n  data() {\n    return {\n      demandes: [],\n      datedemande: '',\n      num: '',\n      today: new Date().getFullYear() + \"-0\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      open: ref(false),\n      description: \"\",\n      depart: \"\",\n      arrive: \"\",\n      long: '',\n      success: false,\n      villes: [],\n      currentPage: 1,\n      date: '',\n      perPage: 5,\n      total: '',\n      refus: ''\n    };\n  },\n\n  created() {\n    //get etatdemandedevis where etat=refusé\n    axios.get(url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\").then(response => {\n      this.refus = response.data.idEtat;\n    }), axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n    axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\").then(response => {\n      this.long = response.data.length;\n    }).catch(error => console.log(error));\n    axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n      this.demandes = response.data;\n    }).catch(error => console.log(error));\n  },\n\n  methods: {\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + this.num + \"&depart=\" + this.depart + \"&arrive=\" + this.arrive + \"&date=\" + this.date + \"&today=\" + this.datedemande).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    searchfunction(mot) {\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + this.num).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    refuserdemande(demande) {\n      this.$swal({\n        title: \"Voulez vous réfusé cette demande?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\"\n      }).then(result => {\n        if (result.value) {\n          axios.put(url + \"DemandeDevis/\" + demande.idDemandeDevis, {\n            idDemandeDevis: demande.idDemandeDevis,\n            date: demande.date,\n            idIntermediaire: demande.idIntermediaire,\n            idDemande: demande.idDemande,\n            idTransporteur: demande.idTransporteur,\n            idEtat: this.refus\n          }).then(() => {\n            this.close();\n          });\n          this.$swal(\"supprimer!\", \"Demande réfusé\", \"reussi\");\n        }\n      });\n    },\n\n    close() {\n      axios.get(url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\").then(response => {\n        this.refus = response.data.idEtat;\n      }), axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\").then(response => {\n        this.long = response.data.length;\n      }).catch(error => console.log(error));\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA+eA;AACA,SAASA,GAAT,QAAoB,KAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,iBAAP,MAA8B,wDAA9B;AAAuF;AACvF,OAAOC,gBAAP,MAA6B,qDAA7B;AACA,OAAOC,aAAP,MAA0B,4DAA1B;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,eAAe;AACbC,YAAU,EAAE;AACVH,oBADU;AAEVC,iBAFU;AAGVF;AAHU,GADC;;AAMbK,MAAI,GAAG;AACL,WAAO;AACLC,cAAQ,EAAE,EADL;AAELC,iBAAW,EAAC,EAFP;AAGLC,SAAG,EAAC,EAHC;AAILC,WAAK,EAAC,IAAIC,IAAJ,GAAWC,WAAX,KAAyB,IAAzB,IAA+B,IAAID,IAAJ,GAAWE,QAAX,KAAsB,CAArD,IAAwD,GAAxD,GAA4D,IAAIF,IAAJ,GAAWG,OAAX,EAJ7D;AAKLC,UAAI,EAAEhB,GAAG,CAAC,KAAD,CALJ;AAMLiB,iBAAW,EAAE,EANR;AAOLC,YAAM,EAAE,EAPH;AAQLC,YAAM,EAAE,EARH;AASJC,UAAI,EAAC,EATD;AAULC,aAAO,EAAE,KAVJ;AAWLC,YAAM,EAAC,EAXF;AAYJC,iBAAW,EAAC,CAZR;AAaJC,UAAI,EAAC,EAbD;AAcLC,aAAO,EAAC,CAdH;AAeLC,WAAK,EAAC,EAfD;AAgBLC,WAAK,EAAC;AAhBD,KAAP;AAkBD,GAzBY;;AA2BbC,SAAO,GAAG;AACR;AACH3B,SAAI,CACE4B,GADN,CAEOxB,GAAG,GAAC,+CAFX,EAIMyB,IAJN,CAIYC,QAAD,IAAa;AACjB,WAAKJ,KAAL,GAAYI,QAAQ,CAACxB,IAAT,CAAcyB,MAA1B;AACD,KANN,GAQI/B,KAAI,CACF4B,GADF,CACMxB,GAAG,GAAC,QADV,EAEEyB,IAFF,CAEQG,IAAD,IAAW,KAAKX,MAAL,GAAcW,IAAI,CAAC1B,IAFrC,CARJ;AAWON,SAAI,CACD4B,GADH,CAEIxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAJN,EAOGL,IAPH,CAOSC,QAAD,IAAc;AAElB,WAAKX,IAAL,GAAWW,QAAQ,CAACxB,IAAT,CAAc6B,MAAzB;AACD,KAVH,EAWGC,KAXH,CAWUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAXpB;AAcArC,SAAI,CACD4B,GADH,CAEIxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAFF,GAEkB,QAFlB,GAE2B,KAAKZ,WAFhC,GAE4C,gBAF5C,GAE6D,KAAKE,OAJtE,EAOGK,IAPH,CAOSC,QAAD,IAAc;AAElB,WAAKvB,QAAL,GAAgBuB,QAAQ,CAACxB,IAAzB;AACD,KAVH,EAWG8B,KAXH,CAWUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAXpB;AAaL,GAnEY;;AAoEbG,SAAO,EAAE;AAENC,cAAU,CAACC,OAAD,EAAU;AACjB,WAAKpB,WAAL,GAAiBoB,OAAjB;AACA,WAAKlB,OAAL,GAAa,KAAKA,OAAlB;AAEAxB,WAAI,CACD4B,GADH,CAEIxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAFF,GAEkB,QAFlB,GAE2B,KAAKZ,WAFhC,GAE4C,gBAF5C,GAE6D,KAAKE,OAFlE,GAGI,UAHJ,GAGe,KAAKf,GAHpB,GAIG,UAJH,GAIc,KAAKQ,MAJnB,GAKG,UALH,GAKc,KAAKC,MALnB,GAK2B,QAL3B,GAKoC,KAAKK,IALzC,GAK8C,SAL9C,GAKwD,KAAKf,WAPjE,EAWGqB,IAXH,CAWSC,QAAD,IAAc;AAElB,aAAKvB,QAAL,GAAgBuB,QAAQ,CAACxB,IAAzB;AACD,OAdH,EAeG8B,KAfH,CAeUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAfpB;AAiBF,KAvBK;;AAwBLM,kBAAc,CAACC,GAAD,EAAM;AAC1B5C,WAAI,CACO4B,GADX,CAEYxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAFF,GAEkB,QAFlB,GAE2B,KAAKZ,WAFhC,GAE4C,gBAF5C,GAE6D,KAAKE,OAFlE,GAGI,UAHJ,GAGe,KAAKf,GALhC,EAUWoB,IAVX,CAUiBC,QAAD,IAAc;AAElB,aAAKvB,QAAL,GAAgBuB,QAAQ,CAACxB,IAAzB;AACD,OAbX,EAcW8B,KAdX,CAckBC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAd5B;AAeO,KAxCI;;AAyCRQ,kBAAc,CAACC,OAAD,EAAU;AAC1B,WAAKC,KAAL,CAAW;AACJC,aAAK,EAAE,mCADH;AAEJC,YAAI,EAAE,SAFF;AAGJC,wBAAgB,EAAE,IAHd;AAIJC,0BAAkB,EAAE,SAJhB;AAKJC,yBAAiB,EAAE,MALf;AAMJC,yBAAiB,EAAE,WANf;AAOJC,wBAAgB,EAAE;AAPd,OAAX,EAQQzB,IARR,CAQc0B,MAAD,IAAY;AAClB,YAAIA,MAAM,CAACC,KAAX,EAAkB;AACjBxD,eAAI,CACEyD,GADN,CACUrD,GAAG,GAAC,eAAJ,GAAoB0C,OAAO,CAACY,cADtC,EACsD;AAChDA,0BAAc,EAACZ,OAAO,CAACY,cADyB;AAEhDnC,gBAAI,EAACuB,OAAO,CAACvB,IAFmC;AAGhDoC,2BAAe,EAACb,OAAO,CAACa,eAHwB;AAIhDC,qBAAS,EAACd,OAAO,CAACc,SAJ8B;AAKhDC,0BAAc,EAACf,OAAO,CAACe,cALyB;AAMhD9B,kBAAM,EAAC,KAAKL;AANoC,WADtD,EAQQG,IARR,CAQa,MAAI;AACf,iBAAKiC,KAAL;AACI,WAVN;AAYC,eAAKf,KAAL,CACE,YADF,EAEE,gBAFF,EAGE,QAHF;AAKF;AACD,OA5BN;AAgCI,KA1EM;;AA2EPe,SAAK,GAAE;AACJ9D,WAAI,CACJ4B,GADA,CAECxB,GAAG,GAAC,+CAFL,EAIAyB,IAJA,CAIMC,QAAD,IAAa;AACjB,aAAKJ,KAAL,GAAYI,QAAQ,CAACxB,IAAT,CAAcyB,MAA1B;AACD,OANA,GAQF/B,KAAI,CACF4B,GADF,CACMxB,GAAG,GAAC,QADV,EAEEyB,IAFF,CAEQG,IAAD,IAAW,KAAKX,MAAL,GAAcW,IAAI,CAAC1B,IAFrC,CARE;AAWCN,WAAI,CACD4B,GADH,CAEIxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAJN,EAOGL,IAPH,CAOSC,QAAD,IAAc;AAElB,aAAKX,IAAL,GAAWW,QAAQ,CAACxB,IAAT,CAAc6B,MAAzB;AACD,OAVH,EAWGC,KAXH,CAWUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAXpB;AAcArC,WAAI,CACD4B,GADH,CAEIxB,GAAG,GAAC,eAAJ,GACE6B,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,eAFF,GAEkB,QAFlB,GAE2B,KAAKZ,WAFhC,GAE4C,gBAF5C,GAE6D,KAAKE,OAJtE,EAOGK,IAPH,CAOSC,QAAD,IAAc;AAElB,aAAKvB,QAAL,GAAgBuB,QAAQ,CAACxB,IAAzB;AACD,OAVH,EAWG8B,KAXH,CAWUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAXpB;AAaJ;;AAlHO;AApEI,CAAf","names":["ref","axios","ModalDemandeFiles","ModalLayoutOffre","PaginationVue","url","components","data","demandes","datedemande","num","today","Date","getFullYear","getMonth","getDate","open","description","depart","arrive","long","success","villes","currentPage","date","perPage","total","refus","created","get","then","response","idEtat","resp","localStorage","getItem","length","catch","error","console","log","methods","ChangePage","NumPage","searchfunction","mot","refuserdemande","demande","$swal","title","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","value","put","idDemandeDevis","idIntermediaire","idDemande","idTransporteur","close"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Transporteur\\Demandes\\Demande.vue"],"sourcesContent":["<template>\n  <div>\n  <span class=\"text-yellow-500 flex justify-center\">\n                       \n                        <router-link :to=\"'historiqueDemande'\"\n                        class=\"\n          px-6\n          py-2\n          mt-3\n          font-medium\n          tracking-wide\n          text-white\n          bg-indigo-600\n          hover:bg-indigo-900\n          focus:outline-none\n           animate__animated animate__shakeX animate__delay-1s mobilehistorique\n        \" style=\"position: absolute;\n    right: 600px;\n    top: 40px;\n    height: 62px;\"\n   >\n   Historique\n<i class=\"bi bi-box2\"></i>   \n  </router-link>\n                      </span>\n  <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.1.1/css/all.css\" integrity=\"sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ\" crossorigin=\"anonymous\">\n\n    <div class=\"mt-8 \">\n      <div class=\"mt-6\">\n        <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\n          <div\n            class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\"\n          >\n          <div class=\"flex flex-col mt-3 text-center sm:flex-row\">\n          <div class=\"flex\">\n            <div class=\"relative\">\n              <select\n                class=\"\n                  block\n                  w-full\n                  h-full\n                  px-4\n                  py-2\n                  pr-8\n                  leading-tight\n                  text-gray-700\n                  bg-white\n                  border border-gray-400\n                  rounded-l\n                  appearance-none\n                  focus:outline-none focus:bg-white focus:border-gray-500\n                \"\n                v-model=\"perPage\"\n                @change=\"ChangePage(this.currentPage)\"\n              >\n                <option value=\"5\">5</option>\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n              </select>\n\n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n            </div>\n<div class=\"relative\">\n             <select\n              v-model=\"depart\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \"\n              aria-label=\"Default select example\"\n            >\n              <option value=\"\" class=\"font-semibold\" selected>depart</option>\n              <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                --{{ v.nomVille }}--\n              </option>\n            </select>\n             \n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n              \n            </div>\n            <div class=\"relative\">\n             <select\n              v-model=\"arrive\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \"\n              aria-label=\"Default select example\"\n            >\n              <option value=\"\" class=\"font-semibold\" selected>Arrive</option>\n              <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                --{{ v.nomVille }}--\n              </option>\n            </select>\n             \n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n            </div>\n            <div class=\"relative\">\n             \n\n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n            </div>\n          </div>\n          <div class=\"relative\">\n             <input\n             type=\"date\"\n              v-model=\"date\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \"\n              aria-label=\"Default select example\"\n            />\n            </div>\n             <div class=\"relative\">\n              <select\n                class=\"\n                  block\n                  w-full\n                  h-full\n                  px-4\n                  py-2\n                  pr-8\n                  leading-tight\n                  text-gray-700\n                  bg-white\n                  border border-gray-400\n                  rounded-l\n                  appearance-none\n                  focus:outline-none focus:bg-white focus:border-gray-500\n                \"\n                v-model=\"datedemande\"\n                @change=\"ChangePage(this.currentPage)\"\n              >\n                \n                <option  value=''>All</option>\n                <option :value=\"this.today\">today</option>\n              </select>\n\n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n             </div>\n             <div class=\"relative\">\n              <input\n              v-model=\"num\"\n              placeholder=\"numéro demande\"\n              class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n              @keyup=\"searchfunction(this.searchby)\"\n            />\n             \n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n               \n              </div>\n              \n            </div>\n        </div>\n        \n            <table id=\"example\" class=\"min-w-full leading-normal\">\n              <thead>\n                <tr>\n                   <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Numero\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Description\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Adress depart\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Destination\n                  </th>\n                   <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Fichiers\n                  </th>\n                    <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Date\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Etat\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                     Paramétres\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(demande, index) in demandes\" :key=\"index\">\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.idDemande }}\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <p class=\"text-gray-900 whitespace-nowrap\">\n                          {{demande.idDemandeNavigation.description }}\n                          <br>\n                            {{\"Poids:\"+ demande.idDemandeNavigation.poids }}\n                            <br>\n                           {{\"Largeur:\"+ demande.idDemandeNavigation.largeur }}\n                           <br>\n                            {{\"Hauteur:\"+ demande.idDemandeNavigation.hauteur }}\n                        </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.adressdepart }}\n                      </div>\n                    </div>\n                  </td>\n                   <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.adressarrive }}\n                      </div>\n                    </div>\n                  </td>\n                    <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\"  >\n                <modal-demande-files :u=\"demande\"></modal-demande-files>\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.date.substr(0,10)}}\n                      </div>\n                    </div>\n                  </td>\n                 \n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idEtatNavigation.etat}}\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                      <span class=\"text-black-500 flex justify-center\" >\n                        <modal-layout-offre \n                          :tabledemande=\"demande\"\n                          :demandeid=\"demande.idDemande\"\n                        ></modal-layout-offre>\n                        <form @submit.prevent=\"refuserdemande(demande)\">\n                           <span class=\"text-orange-500 flex justify-center\">\n                     <button\n                            class=\"mx-2 px-2 rounded-md\"\n                          >\n<i class=\"bi bi-file-excel-fill\"></i>                          </button>\n                           </span>\n                        </form>\n                          \n                      </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n                         <div\n              class=\"\n                flex flex-col\n                items-center\n                px-2\n                py-2\n                bg-white\n                border-t\n                xs:flex-row xs:justify-between\n              \"\n            >\n              <div class=\"inline-flex xs:mt-0\">\n              <!-- PAGINATION -->\n                <pagination-vue\n                  :current=\"currentPage\"\n                  :total=\"this.long\"\n                  :per-page=\"perPage\"\n                  @page-changed=\"ChangePage\"\n                ></pagination-vue>\n              </div>\n          </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n//import Breadcrumb from \"../../partials/Breadcrumb.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport ModalDemandeFiles from \"/src/views/Transporteur/Demandes/ModalDemandeFiles.vue\";;\nimport ModalLayoutOffre from \"/src/views/Transporteur/Offres/ModalLayoutOffre.vue\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport url from \"../../../store/Api\";\nexport default {\n  components: {\n    ModalLayoutOffre,\n    PaginationVue,\n    ModalDemandeFiles\n  },\n  data() {\n    return {\n      demandes: [],\n      datedemande:'',\n      num:'',\n      today:new Date().getFullYear()+\"-0\"+(new Date().getMonth()+1)+\"-\"+new Date().getDate(),\n      open: ref(false),\n      description: \"\",\n      depart: \"\",\n      arrive: \"\",\n       long:'',\n      success: false,\n      villes:[],\n       currentPage:1,\n       date:'',\n      perPage:5,\n      total:'',\n      refus:'',\n    };\n  },\n\n  created() {\n    //get etatdemandedevis where etat=refusé\n axios\n      .get(\n        url+\"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\" \n          )\n      .then((response) =>{\n        this.refus= response.data.idEtat;\n      }),\n\n     axios\n      .get(url+\"villes\")\n      .then((resp) => (this.villes = resp.data));\n        axios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"\n              \n          )\n          .then((response) => {\n            \n            this.long= response.data.length;\n          })\n          .catch((error) => console.log(error));\n    \n       \n        axios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"+\"?page=\"+this.currentPage+\"&quantityPage=\"+this.perPage\n              \n          )\n          .then((response) => {\n            \n            this.demandes = response.data;\n          })\n          .catch((error) => console.log(error));\n      \n  },\n  methods: {\n     \n     ChangePage(NumPage) {\n        this.currentPage=NumPage;\n        this.perPage=this.perPage;\n       \n        axios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"+\"?page=\"+this.currentPage+\"&quantityPage=\"+this.perPage\n               +\"&search=\"+this.num\n              +\"&depart=\"+this.depart\n              +\"&arrive=\"+this.arrive +\"&date=\"+this.date+\"&today=\"+this.datedemande\n              \n              \n          )\n          .then((response) => {\n            \n            this.demandes = response.data;\n          })\n          .catch((error) => console.log(error));\n      \n     },\n      searchfunction(mot) {\naxios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"+\"?page=\"+this.currentPage+\"&quantityPage=\"+this.perPage\n               +\"&search=\"+this.num\n             \n              \n              \n          )\n          .then((response) => {\n            \n            this.demandes = response.data;\n          })\n          .catch((error) => console.log(error));\n      },\n   refuserdemande(demande) {\n this.$swal({\n        title: \"Voulez vous réfusé cette demande?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\",\n      }).then((result) => {\n        if (result.value) {\n         axios\n              .put(url+\"DemandeDevis/\"+demande.idDemandeDevis, {\n               idDemandeDevis:demande.idDemandeDevis,\n               date:demande.date,\n               idIntermediaire:demande.idIntermediaire,\n               idDemande:demande.idDemande,\n               idTransporteur:demande.idTransporteur,\n               idEtat:this.refus,\n              }).then(()=>{\n           this.close()\n              })\n\n          this.$swal(\n            \"supprimer!\",\n            \"Demande réfusé\",\n            \"reussi\"\n          );\n        } \n      });\n    \n      \n              \n    },\n    close(){\n       axios\n      .get(\n        url+\"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\" \n          )\n      .then((response) =>{\n        this.refus= response.data.idEtat;\n      }),\n\n     axios\n      .get(url+\"villes\")\n      .then((resp) => (this.villes = resp.data));\n        axios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"\n              \n          )\n          .then((response) => {\n            \n            this.long= response.data.length;\n          })\n          .catch((error) => console.log(error));\n    \n       \n        axios\n          .get(\n            url+\"DemandeDevis/\" +\n              localStorage.getItem(\"idtransporteur\") +\n              \"/transporteur\"+\"?page=\"+this.currentPage+\"&quantityPage=\"+this.perPage\n              \n          )\n          .then((response) => {\n            \n            this.demandes = response.data;\n          })\n          .catch((error) => console.log(error));\n      \n    }\n  },\n};\n</script>\n<style>\n.modal {\n  transition: opacity 0.25s ease;\n}\n@media only screen and (max-width: 991px) {\n  .mobilehistorique {\n      position: absolute;\n    right: 600px;\n    top: 40px;\n    height: 53px;\n    width: 143px;\n  }\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}
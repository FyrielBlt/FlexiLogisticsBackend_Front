{"ast":null,"code":"import Url from \"../Api.js\";\nimport axios from \"axios\"; //import { forEach } from \"core-js/core/array\";\n\nconst Token = localStorage.getItem('token');\nexport default {\n  state: {\n    //liste de client\n    ListeDemandeDevis: []\n  },\n  getters: {\n    //return les clients\n    ListeDemandeDevis(state) {\n      return state.ListeDemandeDevis;\n    }\n\n  },\n  mutations: {\n    // get all\n    GetDemandeDevi(state, value) {\n      state.ListeDemandeDevis = value;\n    },\n\n    // Ajouter\n    AjouterDemandeDevi(state, DemandeDevi) {\n      //recuperer les id du transporteur\n      let liste = [];\n      let i;\n\n      for (i = 0; i < DemandeDevi.IdTransporteur.length; i++) {\n        liste.push(DemandeDevi.IdTransporteur[i]);\n      }\n\n      DemandeDevi.IdTransporteur = null;\n      console.log(liste); // ajouter\n\n      state.ListeDemandeDevis = [];\n      liste.forEach(el => {\n        DemandeDevi.IdTransporteur = el;\n        console.log(DemandeDevi);\n        axios.post(Url + \"DemandeDevis\", DemandeDevi, {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then(res => {\n          state.ListeDemandeDevis.push(res.data);\n        });\n      });\n    },\n\n    // Modifier\n    ModifierDemandeDevi(state, DemandeDevi) {\n      //recuperer les id du transporteur\n      // let liste = [];\n      //let i;\n      // supprimer les Demandes anciens\n      // let idDemande = DemandeDevi.IdDemande;\n      let ListeDevi = state.ListeDemandeDevis.map(el => el.idDemandeDevis);\n      ListeDevi.forEach(el => {\n        axios.delete(Url + \"DemandeDevis/\" + el, {\n          headers: {\n            Authorization: 'Bearer ' + Token\n          }\n        }).then();\n      });\n    }\n\n  },\n  actions: {\n    // get all\n    Get_DemandeDevi({\n      commit\n    }, idDemande) {\n      axios.get(Url + `DemandeDevis/${idDemande}`, {\n        headers: {\n          Authorization: 'Bearer ' + Token\n        }\n      }).then(res => {\n        commit('GetDemandeDevi', res.data);\n      });\n    },\n\n    // Ajouter\n    Ajouter_DemandeDevi({\n      commit\n    }, DemandeDevi) {\n      commit('AjouterDemandeDevi', DemandeDevi);\n    },\n\n    //modifier\n    Modifier_DemandeDevi({\n      commit\n    }, DemandeDevi) {\n      commit('ModifierDemandeDevi', DemandeDevi);\n    }\n\n  }\n};","map":{"version":3,"sources":["C:/Users/Karim Omrane/Desktop/PFE FI/FRONT/src/store/demandeDevis/DemandeDevis.js"],"names":["Url","axios","Token","localStorage","getItem","state","ListeDemandeDevis","getters","mutations","GetDemandeDevi","value","AjouterDemandeDevi","DemandeDevi","liste","i","IdTransporteur","length","push","console","log","forEach","el","post","headers","Authorization","then","res","data","ModifierDemandeDevi","ListeDevi","map","idDemandeDevis","delete","actions","Get_DemandeDevi","commit","idDemande","get","Ajouter_DemandeDevi","Modifier_DemandeDevi"],"mappings":"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","sourcesContent":["import Url from \"../Api.js\";\r\nimport axios from \"axios\";\r\n//import { forEach } from \"core-js/core/array\";\r\nconst Token = localStorage.getItem('token');\r\nexport default {\r\n    state: {\r\n        //liste de client\r\n        ListeDemandeDevis: [],\r\n    },\r\n    getters: {\r\n        //return les clients\r\n        ListeDemandeDevis(state) {\r\n            return state.ListeDemandeDevis;\r\n        },\r\n    },\r\n    mutations: {\r\n        // get all\r\n        GetDemandeDevi(state, value) {\r\n            state.ListeDemandeDevis = value;\r\n        },\r\n        // Ajouter\r\n        AjouterDemandeDevi(state, DemandeDevi) {\r\n            //recuperer les id du transporteur\r\n            let liste = [];\r\n            let i;\r\n            for (i = 0; i < DemandeDevi.IdTransporteur.length; i++) {\r\n                liste.push(DemandeDevi.IdTransporteur[i]);\r\n            }\r\n            DemandeDevi.IdTransporteur = null;\r\n            console.log(liste);\r\n            // ajouter\r\n            state.ListeDemandeDevis=[];\r\n            liste.forEach(el => {\r\n                DemandeDevi.IdTransporteur = el;\r\n                console.log(DemandeDevi);\r\n                axios.post(Url + \"DemandeDevis\", DemandeDevi, {\r\n                    headers: {\r\n                        Authorization: 'Bearer ' + Token\r\n                    }\r\n                }).then(res => {\r\n                    state.ListeDemandeDevis.push(res.data);\r\n                });\r\n            });\r\n        },\r\n        // Modifier\r\n        ModifierDemandeDevi(state, DemandeDevi) {\r\n            //recuperer les id du transporteur\r\n           // let liste = [];\r\n            //let i;\r\n            // supprimer les Demandes anciens\r\n           // let idDemande = DemandeDevi.IdDemande;\r\n            let ListeDevi = state.ListeDemandeDevis\r\n                .map(el => el.idDemandeDevis);\r\n            ListeDevi.forEach(el => {\r\n                axios.delete(Url + \"DemandeDevis/\" + el, {\r\n                    headers: {\r\n                        Authorization: 'Bearer ' + Token\r\n                    }\r\n                }).then();\r\n            });\r\n         \r\n        }\r\n\r\n\r\n\r\n    },\r\n    actions: {\r\n        // get all\r\n        Get_DemandeDevi({ commit },idDemande) {\r\n            axios.get(Url + `DemandeDevis/${idDemande}`, {\r\n                headers: {\r\n                    Authorization: 'Bearer ' + Token\r\n                }\r\n            })\r\n                .then(res => {\r\n                    commit('GetDemandeDevi', res.data);\r\n                })\r\n        },\r\n       \r\n        // Ajouter\r\n        Ajouter_DemandeDevi({ commit }, DemandeDevi) {\r\n            commit('AjouterDemandeDevi', DemandeDevi);\r\n        },\r\n        //modifier\r\n        Modifier_DemandeDevi({ commit }, DemandeDevi) {\r\n            commit('ModifierDemandeDevi', DemandeDevi);\r\n        },\r\n    },\r\n};\r\n"]},"metadata":{},"sourceType":"module"}
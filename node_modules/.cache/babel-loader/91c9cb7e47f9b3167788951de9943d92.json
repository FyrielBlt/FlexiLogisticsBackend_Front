{"ast":null,"code":"//import Breadcrumb from \"../../partials/Breadcrumb.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport ModalDemandeFiles from \"/src/views/Transporteur/Demandes/ModalDemandeFiles.vue\";\n;\nimport ModalLayoutOffre from \"/src/views/Transporteur/Offres/ModalLayoutOffre.vue\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport url from \"../../../store/Api\";\nexport default {\n  components: {\n    ModalLayoutOffre,\n    PaginationVue,\n    ModalDemandeFiles\n  },\n\n  data() {\n    return {\n      demandes: [],\n      datedemande: '',\n      num: '',\n      today: new Date().getFullYear() + \"-0\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      open: ref(false),\n      description: \"\",\n      depart: \"\",\n      arrive: \"\",\n      long: '',\n      success: false,\n      villes: [],\n      currentPage: 1,\n      date: '',\n      perPage: 5,\n      total: '',\n      refus: ''\n    };\n  },\n\n  created() {\n    //get etatdemandedevis where etat=refusé\n    axios.get(url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\").then(response => {\n      this.refus = response.data.idEtat;\n    }), axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n    axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\").then(response => {\n      this.long = response.data.length;\n    }).catch(error => console.log(error));\n    axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n      this.demandes = response.data;\n    }).catch(error => console.log(error));\n  },\n\n  methods: {\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + this.num + \"&depart=\" + this.depart + \"&arrive=\" + this.arrive + \"&date=\" + this.date + \"&today=\" + this.datedemande).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    searchfunction(mot) {\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + this.num).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    refuserdemande(demande) {\n      this.$swal({\n        title: \"Voulez vous refuser cette demande ?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\"\n      }).then(result => {\n        if (result.value) {\n          axios.put(url + \"DemandeDevis/\" + demande.idDemandeDevis, {\n            idDemandeDevis: demande.idDemandeDevis,\n            date: demande.date,\n            idIntermediaire: demande.idIntermediaire,\n            idDemande: demande.idDemande,\n            idTransporteur: demande.idTransporteur,\n            idEtat: this.refus\n          }).then(() => {\n            this.close();\n          });\n          this.$swal(\"supprimer!\", \"Demande refusée\", \"reussi\");\n        }\n      });\n    },\n\n    close() {\n      axios.get(url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\").then(response => {\n        this.refus = response.data.idEtat;\n      }), axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\").then(response => {\n        this.long = response.data.length;\n      }).catch(error => console.log(error));\n      axios.get(url + \"DemandeDevis/\" + localStorage.getItem(\"idtransporteur\") + \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n        this.demandes = response.data;\n      }).catch(error => console.log(error));\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","axios","ModalDemandeFiles","ModalLayoutOffre","PaginationVue","url","components","data","demandes","datedemande","num","today","Date","getFullYear","getMonth","getDate","open","description","depart","arrive","long","success","villes","currentPage","date","perPage","total","refus","created","get","then","response","idEtat","resp","localStorage","getItem","length","catch","error","console","log","methods","ChangePage","NumPage","searchfunction","mot","refuserdemande","demande","$swal","title","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","value","put","idDemandeDevis","idIntermediaire","idDemande","idTransporteur","close"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Transporteur\\Demandes\\Demande.vue"],"sourcesContent":["<template>\n  <div>\n    <span class=\"text-yellow-500 flex justify-center\">\n\n      <router-link :to=\"'historiqueDemande'\" class=\"\n          px-6\n          py-2\n          mt-3\n          font-medium\n          tracking-wide\n          text-white\n          bg-indigo-600\n          hover:bg-indigo-900\n          focus:outline-none\n           animate__animated animate__shakeX animate__delay-1s mobilehistorique\n        \">\n        Historique\n        <i class=\"bi bi-box2\"></i>\n      </router-link>\n    </span>\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.1.1/css/all.css\"\n      integrity=\"sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ\" crossorigin=\"anonymous\">\n\n    <div class=\"mt-8 \">\n      <div class=\"mt-6\">\n        <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\n          <div class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\">\n            <div class=\"flex flex-col mt-3 text-center sm:flex-row\">\n              <div class=\"flex\">\n                <div class=\"relative\">\n                  <select class=\"\n                  block\n                  w-full\n                  h-full\n                  px-4\n                  py-2\n                  pr-8\n                  leading-tight\n                  text-gray-700\n                  bg-white\n                  border border-gray-400\n                  rounded-l\n                  appearance-none\n                  focus:outline-none focus:bg-white focus:border-gray-500\n                \" v-model=\"perPage\" @change=\"ChangePage(this.currentPage)\">\n                    <option value=\"5\">5</option>\n                    <option value=\"10\">10</option>\n                    <option value=\"20\">20</option>\n                  </select>\n\n                  <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n                    <svg class=\"w-4 h-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                      <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                    </svg>\n                  </div>\n                </div>\n                <div class=\"relative\">\n                  <select v-model=\"depart\" @change=\"ChangePage(this.currentPage)\" class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \" aria-label=\"Default select example\">\n                    <option value=\"\" class=\"font-semibold\" selected>depart</option>\n                    <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                      --{{ v.nomVille }}--\n                    </option>\n                  </select>\n\n                  <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n                    <svg class=\"w-4 h-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                      <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                    </svg>\n                  </div>\n\n                </div>\n                <div class=\"relative\">\n                  <select v-model=\"arrive\" @change=\"ChangePage(this.currentPage)\" class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \" aria-label=\"Default select example\">\n                    <option value=\"\" class=\"font-semibold\" selected>Arrive</option>\n                    <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                      --{{ v.nomVille }}--\n                    </option>\n                  </select>\n\n                  <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n                    <svg class=\"w-4 h-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                      <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                    </svg>\n                  </div>\n                </div>\n                <div class=\"relative\">\n\n\n                  <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n                    <svg class=\"w-4 h-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                      <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n              <div class=\"relative\">\n                <input type=\"date\" v-model=\"date\" @change=\"ChangePage(this.currentPage)\" class=\"\n                form-select\n                appearance-none\n                block\n                w-full\n                px-3\n                py-1.5\n                text-base\n                font-semibold\n                text-gray-700\n                bg-white bg-clip-padding bg-no-repeat\n                border border-solid border-gray-300\n                rounded\n                transition\n                ease-in-out\n                m-0\n                focus:text-gray-700\n                focus:bg-white\n                focus:border-blue-600\n                focus:outline-none\n              \" aria-label=\"Default select example\" />\n              </div>\n              <div class=\"relative\">\n                <select class=\"\n                  block\n                  w-full\n                  h-full\n                  px-4\n                  py-2\n                  pr-8\n                  leading-tight\n                  text-gray-700\n                  bg-white\n                  border border-gray-400\n                  rounded-l\n                  appearance-none\n                  focus:outline-none focus:bg-white focus:border-gray-500\n                \" v-model=\"datedemande\" @change=\"ChangePage(this.currentPage)\">\n\n                  <option value=''>All</option>\n                  <option :value=\"this.today\">today</option>\n                </select>\n\n                <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n                  <svg class=\"w-4 h-4 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n                    <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                  </svg>\n                </div>\n              </div>\n              <div class=\"relative\">\n                <input v-model=\"num\" placeholder=\"numéro demande\"\n                  class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                  @keyup=\"searchfunction(this.searchby)\" />\n\n                <div class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \">\n\n                </div>\n\n              </div>\n            </div>\n\n            <table id=\"example\" class=\"min-w-full leading-normal\">\n              <thead>\n                <tr>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Numero\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Description\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Adress depart\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Destination\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Fichiers\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Date\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Etat\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\">\n                    Paramétres\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(demande, index) in demandes\" :key=\"index\">\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.idDemande }}\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <p class=\"text-gray-900 whitespace-nowrap\">\n                          {{ demande.idDemandeNavigation.description }}\n                          <br>\n                          {{ \"Poids:\" + demande.idDemandeNavigation.poids }}\n                          <br>\n                          {{ \"Largeur:\" + demande.idDemandeNavigation.largeur }}\n                          <br>\n                          {{ \"Hauteur:\" + demande.idDemandeNavigation.hauteur }}\n                        </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.adressdepart }}\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.adressarrive }}\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <modal-demande-files :u=\"demande\"></modal-demande-files>\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idDemandeNavigation.date.substr(0, 10) }}\n                      </div>\n                    </div>\n                  </td>\n\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ demande.idEtatNavigation.etat }}\n                      </div>\n                    </div>\n                  </td>\n                  <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                    <span class=\"text-black-500 flex justify-center\">\n                      <modal-layout-offre :tabledemande=\"demande\" :demandeid=\"demande.idDemande\"></modal-layout-offre>\n                      <form @submit.prevent=\"refuserdemande(demande)\">\n                        <span class=\"text-orange-500 flex justify-center\">\n                          <button class=\"mx-2 px-2 rounded-md\">\n                            <i class=\"bi bi-file-excel-fill\"></i> </button>\n                        </span>\n                      </form>\n\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"\n                flex flex-col\n                items-center\n                px-2\n                py-2\n                bg-white\n                border-t\n                xs:flex-row xs:justify-between\n              \">\n              <div class=\"inline-flex xs:mt-0\">\n                <!-- PAGINATION -->\n                <pagination-vue :current=\"currentPage\" :total=\"this.long\" :per-page=\"perPage\"\n                  @page-changed=\"ChangePage\"></pagination-vue>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n//import Breadcrumb from \"../../partials/Breadcrumb.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport ModalDemandeFiles from \"/src/views/Transporteur/Demandes/ModalDemandeFiles.vue\";;\nimport ModalLayoutOffre from \"/src/views/Transporteur/Offres/ModalLayoutOffre.vue\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport url from \"../../../store/Api\";\nexport default {\n  components: {\n    ModalLayoutOffre,\n    PaginationVue,\n    ModalDemandeFiles\n  },\n  data() {\n    return {\n      demandes: [],\n      datedemande: '',\n      num: '',\n      today: new Date().getFullYear() + \"-0\" + (new Date().getMonth() + 1) + \"-\" + new Date().getDate(),\n      open: ref(false),\n      description: \"\",\n      depart: \"\",\n      arrive: \"\",\n      long: '',\n      success: false,\n      villes: [],\n      currentPage: 1,\n      date: '',\n      perPage: 5,\n      total: '',\n      refus: '',\n    };\n  },\n\n  created() {\n    //get etatdemandedevis where etat=refusé\n    axios\n      .get(\n        url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\"\n      )\n      .then((response) => {\n        this.refus = response.data.idEtat;\n      }),\n\n      axios\n        .get(url + \"villes\")\n        .then((resp) => (this.villes = resp.data));\n    axios\n      .get(\n        url + \"DemandeDevis/\" +\n        localStorage.getItem(\"idtransporteur\") +\n        \"/transporteur\"\n\n      )\n      .then((response) => {\n\n        this.long = response.data.length;\n      })\n      .catch((error) => console.log(error));\n\n\n    axios\n      .get(\n        url + \"DemandeDevis/\" +\n        localStorage.getItem(\"idtransporteur\") +\n        \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage\n\n      )\n      .then((response) => {\n\n        this.demandes = response.data;\n      })\n      .catch((error) => console.log(error));\n\n  },\n  methods: {\n\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n\n      axios\n        .get(\n          url + \"DemandeDevis/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage\n          + \"&search=\" + this.num\n          + \"&depart=\" + this.depart\n          + \"&arrive=\" + this.arrive + \"&date=\" + this.date + \"&today=\" + this.datedemande\n\n\n        )\n        .then((response) => {\n\n          this.demandes = response.data;\n        })\n        .catch((error) => console.log(error));\n\n    },\n    searchfunction(mot) {\n      axios\n        .get(\n          url + \"DemandeDevis/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage\n          + \"&search=\" + this.num\n\n\n\n        )\n        .then((response) => {\n\n          this.demandes = response.data;\n        })\n        .catch((error) => console.log(error));\n    },\n    refuserdemande(demande) {\n      this.$swal({\n        title: \"Voulez vous refuser cette demande ?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\",\n      }).then((result) => {\n        if (result.value) {\n          axios\n            .put(url + \"DemandeDevis/\" + demande.idDemandeDevis, {\n              idDemandeDevis: demande.idDemandeDevis,\n              date: demande.date,\n              idIntermediaire: demande.idIntermediaire,\n              idDemande: demande.idDemande,\n              idTransporteur: demande.idTransporteur,\n              idEtat: this.refus,\n            }).then(() => {\n              this.close()\n            })\n\n          this.$swal(\n            \"supprimer!\",\n            \"Demande refusée\",\n            \"reussi\"\n          );\n        }\n      });\n\n\n\n    },\n    close() {\n      axios\n        .get(\n          url + \"EtatDemandeDevis/EtatDemandeDevis?etat=Refuse\"\n        )\n        .then((response) => {\n          this.refus = response.data.idEtat;\n        }),\n\n        axios\n          .get(url + \"villes\")\n          .then((resp) => (this.villes = resp.data));\n      axios\n        .get(\n          url + \"DemandeDevis/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/transporteur\"\n\n        )\n        .then((response) => {\n\n          this.long = response.data.length;\n        })\n        .catch((error) => console.log(error));\n\n\n      axios\n        .get(\n          url + \"DemandeDevis/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/transporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage\n\n        )\n        .then((response) => {\n\n          this.demandes = response.data;\n        })\n        .catch((error) => console.log(error));\n\n    }\n  },\n};\n</script>\n<style>\n.modal {\n  transition: opacity 0.25s ease;\n}\n\n@media only screen and (max-width: 991px) {\n  .mobilehistorique {\n    position: relative;\n    left: 105px;\n    top: -72px;\n    height: 40px;\n    width: 150px;\n  }\n}\n\n.mobilehistorique {\n  position: absolute;\n  right: 600px;\n  top: 40px;\n  height: 50px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}
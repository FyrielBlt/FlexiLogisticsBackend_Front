{"ast":null,"code":"import axios from \"axios\";\nimport Url from \"../../store/Api\";\nexport default {\n  props: [\"client\", \"id\"],\n\n  data() {\n    return {\n      open: false,\n      imageFile: [],\n      name: 'ff',\n      active: \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\"\n    };\n  },\n\n  methods: {\n    uploadFilee(event) {\n      this.imageFile = event.dataTransfer.files[0];\n      this.name = event.dataTransfer.files[0];\n      this.active = \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md bg-gray-200\";\n      console.log(this.imageFile);\n    },\n\n    upload() {\n      // console.log(this.imageFile);\n      let facture = new FormData();\n      facture.append(\"etatFacture\", \"Non payé\");\n      facture.append(\"idDemandeLivraison\", this.id);\n      facture.append(\"factureFile\", \"\"); //facture.append(\"PayementFile\",null);\n\n      facture.append(\"imageFile\", this.imageFile);\n      facture.append(\"SrcFactureFile\", \"\");\n      axios.post(Url + \"FactureClients\", facture, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      }).then(res => {\n        // this.file=res.data;\n        this.open = false;\n        console.log(res.data);\n        this.$emit(\"f\", true);\n      });\n    },\n\n    dragFile(e) {\n      this.imageFile = e.dataTransfer.files[0];\n      this.active = \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md bg-gray-200\";\n      console.log(this.imageFile);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqMA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,iBAAhB;AACA,eAAe;AACbC,OAAK,EAAE,CAAC,QAAD,EAAW,IAAX,CADM;;AAGbC,MAAI,GAAG;AACL,WAAO;AACLC,UAAI,EAAE,KADD;AAELC,eAAS,EAAE,EAFN;AAGLC,UAAI,EAAC,IAHA;AAILC,YAAM,EACJ;AALG,KAAP;AAOD,GAXY;;AAYbC,SAAO,EAAE;AACPC,eAAW,CAACC,KAAD,EAAQ;AAChB,WAAKL,SAAL,GAAiBK,KAAK,CAACC,YAAN,CAAmBC,KAAnB,CAAyB,CAAzB,CAAjB;AACA,WAAKN,IAAL,GAAYI,KAAK,CAACC,YAAN,CAAmBC,KAAnB,CAAyB,CAAzB,CAAZ;AACD,WAAKL,MAAL,GACE,uGADF;AAGAM,aAAO,CAACC,GAAR,CAAY,KAAKT,SAAjB;AACD,KARM;;AASPU,UAAM,GAAG;AACR;AACG,UAAIC,OAAM,GAAI,IAAIC,QAAJ,EAAd;AACAD,aAAO,CAACE,MAAR,CAAe,aAAf,EAA6B,UAA7B;AACAF,aAAO,CAACE,MAAR,CAAe,oBAAf,EAAoC,KAAKC,EAAzC;AACAH,aAAO,CAACE,MAAR,CAAe,aAAf,EAA6B,EAA7B,EALK,CAML;;AACAF,aAAO,CAACE,MAAR,CAAe,WAAf,EAA4B,KAAKb,SAAjC;AACAW,aAAO,CAACE,MAAR,CAAe,gBAAf,EAAiC,EAAjC;AACDlB,WAAI,CACAoB,IADJ,CACSnB,GAAE,GAAI,gBADf,EACiCe,OADjC,EAC0C;AACrCK,eAAO,EAAE;AACPC,uBAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADpB;AAD4B,OAD1C,EAMIC,IANJ,CAMSC,GAAG,IAAE;AACV;AACK,aAAKtB,IAAL,GAAY,KAAZ;AACJS,eAAO,CAACC,GAAR,CAAYY,GAAG,CAACvB,IAAhB;AACC,aAAKwB,KAAL,CAAW,GAAX,EAAgB,IAAhB;AACF,OAXJ;AAYF,KA9BM;;AA+BPC,YAAQ,CAACC,CAAD,EAAI;AACV,WAAKxB,SAAL,GAAiBwB,CAAC,CAAClB,YAAF,CAAeC,KAAf,CAAqB,CAArB,CAAjB;AACA,WAAKL,MAAL,GACE,uGADF;AAGAM,aAAO,CAACC,GAAR,CAAY,KAAKT,SAAjB;AACD;;AArCM;AAZI,CAAf","names":["axios","Url","props","data","open","imageFile","name","active","methods","uploadFilee","event","dataTransfer","files","console","log","upload","facture","FormData","append","id","post","headers","Authorization","localStorage","getItem","then","res","$emit","dragFile","e"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\components\\Intermediaire\\DragDrop.vue"],"sourcesContent":["<!-- component -->\n<template>\n  <!-- {{client}} -->\n  <a\n    style=\"cursor: pointer\"\n    @click=\"open = true\"\n    v-if=\"client == null\"\n    target=\"_blank\"\n  >\n    <span\n      class=\"\n        inline-flex\n        px-2\n        text-xs\n        font-semibold\n        leading-5\n        text-yellow-800\n        bg-yellow-100\n        rounded-full\n      \"\n    >\n      Upload File</span\n    ></a\n  >\n  <a v-else :href=\"client.srcFactureFile\" target=\"_blank\">\n    <span\n      class=\"\n        inline-flex\n        px-2\n        text-xs\n        font-semibold\n        leading-5\n        text-blue-800\n        bg-blue-100\n        rounded-full\n      \"\n    >\n      Download</span\n    ></a\n  >\n\n  <div\n    :class=\"`modal ${\n      !open && 'opacity-0 pointer-events-none'\n    } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`\"\n  >\n    <div\n      @click=\"open = false\"\n      class=\"absolute w-full h-full bg-gray-900 opacity-50 modal-overlay\"\n    ></div>\n\n    <div\n      class=\"\n        z-50\n        w-11/12\n        mx-auto\n        overflow-y-auto\n        bg-white\n        rounded\n        shadow-lg\n        modal-container\n        md:max-w-md\n      \"\n    >\n      <div\n        class=\"\n          absolute\n          top-0\n          right-0\n          z-50\n          flex flex-col\n          items-center\n          mt-4\n          mr-4\n          text-sm text-white\n          cursor-pointer\n          modal-close\n        \"\n      >\n        <svg\n          class=\"text-white fill-current\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 18 18\"\n        >\n          <path\n            d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\"\n          />\n        </svg>\n        <span class=\"text-sm\">(Esc)</span>\n      </div>\n\n      <!-- Add margin if you want to see some of the overlay behind the modal-->\n      <div class=\"px-6 py-4 text-left modal-content\">\n        <!--Title-->\n\n        <div @drop=\"dragFile\">\n          <label class=\"block text-sm font-medium text-gray-700\">\n            Cover photo\n          </label>\n          <div @dragover.prevent @drop.prevent :class=\"active\">\n            <div class=\"space-y-1 text-center\">\n              <svg\n                class=\"mx-auto h-12 w-12 text-gray-400\"\n                stroke=\"currentColor\"\n                fill=\"none\"\n                viewBox=\"0 0 48 48\"\n                aria-hidden=\"true\"\n              >\n                <path\n                  d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\"\n                  stroke-width=\"2\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n              <div class=\"flex text-sm text-gray-600\">\n                <label\n                  for=\"file-upload\"\n                  class=\"\n                    relative\n                    cursor-pointer\n                    bg-white\n                    rounded-md\n                    font-medium\n                    text-indigo-600\n                    hover:text-indigo-500\n                    focus-within:outline-none\n                    focus-within:ring-2\n                    focus-within:ring-offset-2\n                    focus-within:ring-indigo-500\n                  \"\n                >\n                  <span>Upload a file</span>\n                  <input\n                    multiple\n                    id=\"file-upload\"\n                    name=\"file-upload\"\n                    type=\"file\"\n                    class=\"sr-only\"\n                    @change=\"uploadFilee($event)\"\n                  />\n                </label>\n                <p class=\"pl-1\">or {{ name }} and drop </p>\n              </div>\n              <div class=\"text-xs text-gray-500\">\n                <div>\n                  <ul>\n                    <li>{{ imageFile.name }}</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!--Footer-->\n        <div class=\"flex justify-end pt-2\">\n          <button\n            @click=\"open = false\"\n            class=\"\n              p-3\n              px-6\n              py-3\n              mr-2\n              text-indigo-500\n              bg-transparent\n              rounded-lg\n              hover:bg-gray-100 hover:text-indigo-400\n              focus:outline-none\n            \"\n          >\n            Close\n          </button>\n          <button\n            @click=\"upload()\"\n            class=\"\n              px-6\n              py-3\n              font-medium\n              tracking-wide\n              text-white\n              bg-indigo-600\n              rounded-md\n              hover:bg-indigo-500\n              focus:outline-none\n            \"\n          >\n            Upload\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport Url from \"../../store/Api\";\nexport default {\n  props: [\"client\", \"id\"],\n\n  data() {\n    return {\n      open: false,\n      imageFile: [],\n      name:'ff',\n      active:\n        \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\",\n    };\n  },\n  methods: {\n    uploadFilee(event) {\n       this.imageFile = event.dataTransfer.files[0];\n       this.name = event.dataTransfer.files[0];\n      this.active =\n        \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md bg-gray-200\";\n\n      console.log(this.imageFile);\n    },\n    upload() {\n     // console.log(this.imageFile);\n        let facture = new FormData();\n        facture.append(\"etatFacture\",\"Non payé\");\n        facture.append(\"idDemandeLivraison\",this.id);\n        facture.append(\"factureFile\",\"\");\n        //facture.append(\"PayementFile\",null);\n        facture.append(\"imageFile\", this.imageFile);\n        facture.append(\"SrcFactureFile\", \"\");\n       axios\n          .post(Url + \"FactureClients\", facture, {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n            },\n          })\n          .then(res=>{\n           // this.file=res.data;\n                this.open = false;\n            console.log(res.data);\n             this.$emit(\"f\", true);\n          });\n    },\n    dragFile(e) {\n      this.imageFile = e.dataTransfer.files[0];\n      this.active =\n        \"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md bg-gray-200\";\n\n      console.log(this.imageFile);\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}
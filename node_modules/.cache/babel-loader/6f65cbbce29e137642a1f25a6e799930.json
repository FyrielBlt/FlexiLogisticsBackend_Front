{"ast":null,"code":"import axios from \"axios\";\nimport url from \"../../../store/Api\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport ModalTrajetUpdate from \"/src/views/Transporteur/Trajets/ModalLayoutTrajetUpdate.vue\";\nexport default {\n  components: {\n    PaginationVue,\n    ModalTrajetUpdate\n  },\n\n  data() {\n    return {\n      long: \"\",\n      codevehicule: \"\",\n      dateheure: \"\",\n      Destination: \"\",\n      departadress: \"\",\n      searchby: \"\",\n      open: false,\n      iddestination: \"\",\n      iddepart: \"\",\n      camions: [],\n      idtransporteur: \"\",\n      currentPage: 1,\n      perPage: 5,\n      total: \"\",\n      villes: [],\n      arrive: \"\",\n      depart: \"\",\n      date: \"\",\n      listcamions: [],\n      today: new Date().toISOString().substr(0, 10) + \"T00:00:00.000\"\n    };\n  },\n\n  created() {\n    axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n    axios.get(url + \"camions/\" + localStorage.getItem(\"idtransporteur\")).then(resp => this.listcamions = resp.data); // liste trajets de ce transporteur\n\n    axios;\n    axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\").then(response => {\n      this.long = response.data.length;\n    }).catch(error => console.log(error));\n    axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n      this.camions = response.data;\n    }).catch(error => console.log(error));\n  },\n\n  methods: {\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n      axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&depart=\" + this.depart + \"&arrive=\" + this.arrive + \"&date2=\" + this.date + \"&search=\" + this.searchby).then(response => {\n        this.camions = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    reload() {\n      axios.get(url + \"villes\").then(resp => this.villes = resp.data);\n      axios.get(url + \"camions/\" + localStorage.getItem(\"idtransporteur\")).then(resp => this.listcamions = resp.data); // liste trajets de ce transporteur\n\n      axios;\n      axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\").then(response => {\n        this.long = response.data.length;\n      }).catch(error => console.log(error));\n      axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n        this.camions = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    ajouterTrajet() {\n      axios.get(url + \"Trajets/\" + this.codevehicule + \"/camion\" + \"?date=\" + this.dateheure.toString().substr(0, 10)).then(resp => {\n        if (resp.data.length != 0) {\n          this.sucess = false;\n          this.$swal({\n            position: \"top-end\",\n            icon: \"error\",\n            toast: true,\n            title: \"Camion occupé dans ce date\",\n            showConfirmButton: false,\n            timer: 2000\n          });\n        } else {\n          if (this.departadress != \"\" && this.Destination != \"\" && this.departadress != this.Destination && this.dateheure != \"\" && this.dateheure >= this.today) {\n            axios.get(url + \"Villes/\" + this.departadress + \"/ville\").then(response => {\n              this.iddepart = response.data.idVille;\n              axios.get(url + \"Villes/\" + this.Destination + \"/ville\").then(response => {\n                axios.post(url + \"Trajets\", {\n                  idVille1: this.iddepart,\n                  idVille2: response.data.idVille,\n                  idcamion: this.codevehicule,\n                  date: this.dateheure.toString().substr(0, 10),\n                  heurdepart: this.dateheure.toString().substr(11, 16)\n                }).then(() => {\n                  this.$swal({\n                    position: \"top-end\",\n                    icon: \"success\",\n                    toast: true,\n                    title: \"Trajet ajouté pour ce camion\",\n                    showConfirmButton: false,\n                    timer: 2000\n                  });\n                  this.reload();\n                });\n              });\n            });\n          } else if (this.departadress != \"\" && this.Destination != \"\" && this.departadress == this.Destination && this.dateheure != \"\" && this.dateheure >= this.today) {\n            this.$swal({\n              position: \"top-end\",\n              icon: \"error\",\n              toast: true,\n              title: \"depart et arrive ne peuvent pas etre identique\",\n              showConfirmButton: false,\n              timer: 2000\n            });\n          }\n        }\n      });\n    },\n\n    searchfunction(mot) {\n      axios;\n      axios.get(url + \"Trajets/\" + localStorage.getItem(\"idtransporteur\") + \"/idtransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + this.searchby).then(response => {\n        this.camions = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    supprimertrajet(id) {\n      this.$swal({\n        title: \"vous êtes sûr?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\"\n      }).then(result => {\n        if (result.value) {\n          axios.delete(url + \"Trajets/\" + id).then(() => {\n            this.$swal({\n              position: \"top-end\",\n              icon: \"success\",\n              toast: true,\n              title: \"Trajet supprimé\",\n              showConfirmButton: false,\n              timer: 2000\n            });\n            this.reload();\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","url","PaginationVue","ModalTrajetUpdate","components","data","long","codevehicule","dateheure","Destination","departadress","searchby","open","iddestination","iddepart","camions","idtransporteur","currentPage","perPage","total","villes","arrive","depart","date","listcamions","today","Date","toISOString","substr","created","get","then","resp","localStorage","getItem","response","length","catch","error","console","log","methods","ChangePage","NumPage","reload","ajouterTrajet","toString","sucess","$swal","position","icon","toast","title","showConfirmButton","timer","idVille","post","idVille1","idVille2","idcamion","heurdepart","searchfunction","mot","supprimertrajet","id","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","value","delete"],"sourceRoot":"","sources":["C:\\Users\\Karim Omrane\\Desktop\\PFE FI\\FRONT\\src\\views\\Transporteur\\Trajets\\Trajets.vue"],"sourcesContent":["<template>\n  <div>\n    <button @click=\"open = true\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"30\"\n        height=\"25\"\n        fill=\"currentColor\"\n        class=\"bi bi-plus-circle-fill\"\n        viewBox=\"0 0 16 16\"\n      >\n        <path\n          d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z\"\n        />\n      </svg>\n    </button>\n    <div\n      :class=\"`modal ${\n        !open && 'opacity-0 pointer-events-none'\n      } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`\"\n    >\n      <div\n        @click=\"open = false\"\n        class=\"absolute w-full h-full bg-gray-900 opacity-50 modal-overlay\"\n      ></div>\n\n      <div\n        class=\"z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded shadow-lg modal-container md:max-w-md\"\n      >\n        <div\n          class=\"absolute top-0 right-0 z-50 flex flex-col items-center mt-4 mr-4 text-sm text-white cursor-pointer modal-close\"\n        >\n          <svg\n            class=\"text-white fill-current\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 18 18\"\n          >\n            <path\n              d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\"\n            />\n          </svg>\n          <span class=\"text-sm\">(Esc)</span>\n        </div>\n\n        <!-- Add margin if you want to see some of the overlay behind the modal-->\n        <div class=\"px-6 py-4 text-center modal-content\">\n            <p class=\"text-2xl font-bold\">Ajouter camion</p>\n          <!--Body-->\n         \n                <form @submit.prevent=\"ajouterTrajet\">\n                    \n                   <div class=\"relative block mt-2 sm:mt-0\">\n<span>Code véhicule :</span>\n              <select\n                        required\n                        v-model=\"codevehicule\"\n                class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n :class=\"[\n                    codevehicule === ''\n                      ? ' focus:bg-red-100  focus:border-red-800 '\n                      : ' focus:bg-green-100  focus:border-green-800 ',\n                  ]\" \n                      >\n                        <option\n                          v-for=\"column in this.listcamions\"\n                          :key=\"column\"\n                          :value=\"column.idcamion\"\n                        >\n                          {{ column.codevehicule }}\n                        </option>\n                      </select>   \n \n               \n              </div>\n                     <div class=\"relative block mt-2 sm:mt-0\">\n<span> Ville départ: </span>\n                <select\n                        v-model=\"departadress\"\n                        required\n                          class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n :class=\"[\n                    departadress === ''\n                      ? ' focus:bg-red-100  focus:border-red-800 '\n                      : ' focus:bg-green-100  focus:border-green-800 ',\n                  ]\" \n                      >\n                        <option v-for=\"column in this.villes\" :key=\"column\">\n                          {{ column.nomVille }}\n                        </option>\n                      </select>\n\n               \n              </div>\n                      <div class=\"relative block mt-2 sm:mt-0\">\n<span>Destination: </span>\n                <select\n                        v-model=\"Destination\"\n                        required\n                          class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n :class=\"[\n                    Destination=== ''\n                      ? ' focus:bg-red-100  focus:border-red-800 '\n                      : ' focus:bg-green-100  focus:border-green-800 ',\n                  ]\" \n                      >\n                        <option v-for=\"column in this.villes\" :key=\"column\">\n                          {{ column.nomVille }}\n                        </option>\n                      </select>\n\n               \n              </div>\n                    <div class=\"relative block mt-2 sm:mt-0\">\n\n                <span>Date arrive :</span>\n\n                <input\n                 class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n :class=\"[\n                    dateheure=== ''\n                      ? ' focus:bg-red-100  focus:border-red-800 '\n                      : ' focus:bg-green-100  focus:border-green-800 ',\n                  ]\" \n                        required\n                        type=\"datetime-local\"\n                        width=\"300px\"\n                        v-model=\"dateheure\"\n                        :min=\"this.today\"\n                      />\n              </div>\n                    \n                    <div class=\"flex justify-end mt-4\">\n                      <button\n                        class=\"px-2 py-3 font-medium tracking-wide text-white bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none\"\n                      >\n                        Ajouter\n                      </button>\n                    </div>\n                  </form>\n              </div>\n            </div>\n          </div>\n        \n    <!-- Breadcrumb -->\n    <Breadcrumb breadcrumb=\"Blank\" />\n    <div class=\"mt-8\">\n      <div class=\"mt-6\">\n        <div class=\"flex flex-col mt-3 text-center sm:flex-row\">\n          <div class=\"flex\">\n            <div class=\"relative\">\n              <select\n                class=\"block w-full h-full px-4 py-2 pr-8 leading-tight text-gray-700 bg-white border border-gray-400 rounded-l appearance-none focus:outline-none focus:bg-white focus:border-gray-500\"\n                v-model=\"perPage\"\n                @change=\"ChangePage(this.currentPage)\"\n              >\n                <option value=\"5\">5</option>\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n              </select>\n\n              <div\n                class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n            </div>\n          </div>\n          <div class=\"relative\">\n            <select\n              v-model=\"depart\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\n              aria-label=\"Default select example\"\n            >\n              <option value=\"\" class=\"font-semibold\" selected>Depart</option>\n              <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                --{{ v.nomVille }}--\n              </option>\n            </select>\n            <div\n              class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\n            >\n              <svg\n                class=\"w-4 h-4 fill-current\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path\n                  d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                />\n              </svg>\n            </div>\n          </div>\n          <div class=\"relative\">\n            <select\n              v-model=\"arrive\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\n              aria-label=\"Default select example\"\n            >\n              <option value=\"\" class=\"font-semibold\" selected>Arrivé</option>\n              <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\n                --{{ v.nomVille }}--\n              </option>\n            </select>\n            <div\n              class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\n            >\n              <svg\n                class=\"w-4 h-4 fill-current\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path\n                  d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                />\n              </svg>\n            </div>\n          </div>\n          <div class=\"relative\">\n            <input\n              type=\"date\"\n              v-model=\"date\"\n              @change=\"ChangePage(this.currentPage)\"\n              class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\n              aria-label=\"Default select example\"\n            />\n          </div>\n          <div class=\"relative\">\n            <input\n              v-model=\"searchby\"\n              placeholder=\"code véhicule\"\n              class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n              @keyup=\"searchfunction(this.searchby)\"\n            />\n\n            <div\n              class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\n            ></div>\n          </div>\n        </div>\n        <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\n          <div\n            class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\"\n          >\n            <table id=\"example\" class=\"min-w-full leading-normal\">\n              <thead>\n                <tr>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    N\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Code Véhicule\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Chauffeur\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Depart\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Arrive\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Date depart\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                    Heure depart\n                  </th>\n                  <th\n                    class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                  >\n                     Paramétres\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"(u, index) in camions\" :key=\"index\">\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    {{ index + 1 }}\n                  </td>\n\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <p class=\"text-gray-900 whitespace-nowrap\">\n                          {{ u.idCamionNavigation.codevehicule }}\n                        </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <div\n                          v-if=\"\n                            u.idCamionNavigation.idchauffeurNavigation != null\n                          \"\n                        >\n                          {{\n                            u.idCamionNavigation.idchauffeurNavigation\n                              .iduserNavigation.nom\n                          }}\n                        </div>\n                        <div\n                          v-if=\"\n                            u.idCamionNavigation.idchauffeurNavigation == null\n                          \"\n                        >\n                          <span class=\"\n                      inline-flex\n                      px-2\n                      text-xs\n                      font-semibold\n                      leading-5\n                      text-red-800\n                      bg-red-100\n                      rounded-full\n                    \">Affecter chauffeur</span>\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        <p class=\"text-gray-900 whitespace-nowrap\">\n                          {{ u.idVille1Navigation.nomVille }}\n                        </p>\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <div class=\"flex items-center\">\n                      <div class=\"ml-3\">\n                        {{ u.idVille2Navigation.nomVille }}\n                      </div>\n                    </div>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <p class=\"text-gray-900 whitespace-nowrap\">\n                      {{ u.date.substr(0, 10) }}\n                    </p>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                    <p class=\"text-gray-900 whitespace-nowrap\">\n                      {{ u.heurdepart }}\n                    </p>\n                  </td>\n                  <td\n                    class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\n                  >\n                     <span class=\"text-black-500 flex \">\n                    <modal-trajet-update :trajettable=\"u\"></modal-trajet-update>\n                    <form @submit.prevent=\"supprimertrajet(u.idTrajet)\">\n                         <span class=\"text-orange-500 flex justify-center\">\n                     <button\n                            class=\"mx-2 px-2 rounded-md\"\n                          >\n                         <i class=\"bi bi-trash3-fill\"></i>\n                          </button>\n                           </span>\n                      \n                    </form>\n                                      </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <div\n              class=\"flex flex-col items-center px-2 py-2 bg-white border-t xs:flex-row xs:justify-between\"\n            >\n              <div class=\"inline-flex xs:mt-0\">\n                <!-- PAGINATION -->\n                <pagination-vue\n                  :current=\"currentPage\"\n                  :total=\"this.long\"\n                  :per-page=\"perPage\"\n                  @page-changed=\"ChangePage\"\n                ></pagination-vue>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport url from \"../../../store/Api\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport ModalTrajetUpdate from \"/src/views/Transporteur/Trajets/ModalLayoutTrajetUpdate.vue\";\nexport default {\n  components: {\n    PaginationVue,\n    ModalTrajetUpdate,\n  },\n  data() {\n    return {\n      long: \"\",\n      codevehicule: \"\",\n      dateheure: \"\",\n      Destination: \"\",\n      departadress: \"\",\n      searchby: \"\",\n      open: false,\n      iddestination: \"\",\n      iddepart: \"\",\n      camions: [],\n      idtransporteur: \"\",\n      currentPage: 1,\n      perPage: 5,\n      total: \"\",\n      villes: [],\n      arrive: \"\",\n      depart: \"\",\n      date: \"\",\n      listcamions: [],\n      today: new Date().toISOString().substr(0, 10) + \"T00:00:00.000\",\n    };\n  },\n  created() {\n    axios\n      .get(url+\"villes\")\n      .then((resp) => (this.villes = resp.data));\n\n    axios\n      .get(\n        url+\"camions/\" +\n          localStorage.getItem(\"idtransporteur\")\n      )\n      .then((resp) => (this.listcamions = resp.data));\n    // liste trajets de ce transporteur\n    axios;\n    axios\n      .get(\n        url+\"Trajets/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/idtransporteur\"\n      )\n      .then((response) => {\n        this.long = response.data.length;\n      })\n      .catch((error) => console.log(error));\n\n    axios\n      .get(\n        url+\"Trajets/\" +\n          localStorage.getItem(\"idtransporteur\") +\n          \"/idtransporteur\" +\n          \"?page=\" +\n          this.currentPage +\n          \"&quantityPage=\" +\n          this.perPage\n      )\n      .then((response) => {\n        this.camions = response.data;\n      })\n      .catch((error) => console.log(error));\n  },\n\n  methods: {\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n\n      axios\n        .get(\n          url+\"Trajets/\" +\n            localStorage.getItem(\"idtransporteur\") +\n            \"/idtransporteur\" +\n            \"?page=\" +\n            this.currentPage +\n            \"&quantityPage=\" +\n            this.perPage +\n            \"&depart=\" +\n            this.depart +\n            \"&arrive=\" +\n            this.arrive +\n            \"&date2=\" +\n            this.date +\n            \"&search=\" +\n            this.searchby\n        )\n        .then((response) => {\n          this.camions = response.data;\n        })\n        .catch((error) => console.log(error));\n    },\n    reload() {\n      axios\n        .get(url+\"villes\")\n        .then((resp) => (this.villes = resp.data));\n\n      axios\n        .get(\n          url+\"camions/\" +\n            localStorage.getItem(\"idtransporteur\")\n        )\n        .then((resp) => (this.listcamions = resp.data));\n      // liste trajets de ce transporteur\n      axios;\n\n      axios\n        .get(\n          url+\"Trajets/\" +\n            localStorage.getItem(\"idtransporteur\") +\n            \"/idtransporteur\"\n        )\n        .then((response) => {\n          this.long = response.data.length;\n        })\n        .catch((error) => console.log(error));\n\n      axios\n        .get(\n          url+\"Trajets/\" +\n            localStorage.getItem(\"idtransporteur\") +\n            \"/idtransporteur\" +\n            \"?page=\" +\n            this.currentPage +\n            \"&quantityPage=\" +\n            this.perPage\n        )\n        .then((response) => {\n          this.camions = response.data;\n        })\n        .catch((error) => console.log(error));\n    },\n    ajouterTrajet() {\n      axios\n        .get(\n          url+\"Trajets/\" +\n            this.codevehicule +\n            \"/camion\" +\n            \"?date=\" +\n            this.dateheure.toString().substr(0, 10)\n        )\n        .then((resp) => {\n          if (resp.data.length != 0) {\n            this.sucess = false;\n            this.$swal({\n              position: \"top-end\",\n              icon: \"error\",\n              toast: true,\n              title: \"Camion occupé dans ce date\",\n              showConfirmButton: false,\n              timer: 2000,\n            });\n          } else {\n            if (\n              this.departadress != \"\" &&\n              this.Destination != \"\" &&\n              this.departadress != this.Destination &&\n              this.dateheure != \"\" &&\n              this.dateheure >= this.today\n            ) {\n              axios\n                .get(\n                  url+\"Villes/\" +\n                    this.departadress +\n                    \"/ville\"\n                )\n                .then((response) => {\n                  this.iddepart = response.data.idVille;\n                  axios\n                    .get(\n                      url+\"Villes/\" +\n                        this.Destination +\n                        \"/ville\"\n                    )\n                    .then((response) => {\n                      axios\n                        .post(url+\"Trajets\", {\n                          idVille1: this.iddepart,\n                          idVille2: response.data.idVille,\n                          idcamion: this.codevehicule,\n                          date: this.dateheure.toString().substr(0, 10),\n                          heurdepart: this.dateheure.toString().substr(11, 16),\n                        })\n                        .then(() => {\n                          this.$swal({\n                            position: \"top-end\",\n                            icon: \"success\",\n                            toast: true,\n                            title: \"Trajet ajouté pour ce camion\",\n                            showConfirmButton: false,\n                            timer: 2000,\n                          });\n                          this.reload();\n                        });\n                    });\n                });\n            } else if (\n              this.departadress != \"\" &&\n              this.Destination != \"\" &&\n              this.departadress == this.Destination &&\n              this.dateheure != \"\" &&\n              this.dateheure >= this.today\n            ) {\n              this.$swal({\n                position: \"top-end\",\n                icon: \"error\",\n                toast: true,\n                title: \"depart et arrive ne peuvent pas etre identique\",\n                showConfirmButton: false,\n                timer: 2000,\n              });\n            }\n          }\n        });\n    },\n    searchfunction(mot) {\n      axios;\n      axios\n        .get(\n          url+\"Trajets/\" +\n            localStorage.getItem(\"idtransporteur\") +\n            \"/idtransporteur\" +\n            \"?page=\" +\n            this.currentPage +\n            \"&quantityPage=\" +\n            this.perPage +\n            \"&search=\" +\n            this.searchby\n        )\n        .then((response) => {\n          this.camions = response.data;\n        })\n        .catch((error) => console.log(error));\n    },\n    supprimertrajet(id) {\n      this.$swal({\n        title: \"vous êtes sûr?\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Supprimer\",\n        cancelButtonText: \"Annuler\",\n      }).then((result) => {\n        if (result.value) {\n          axios.delete(url+\"Trajets/\" + id).then(() => {\n            this.$swal({\n              position: \"top-end\",\n              icon: \"success\",\n              toast: true,\n              title: \"Trajet supprimé\",\n              showConfirmButton: false,\n              timer: 2000,\n            });\n            this.reload();\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n"]},"metadata":{},"sourceType":"module"}
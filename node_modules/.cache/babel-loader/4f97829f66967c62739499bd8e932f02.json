{"ast":null,"code":"import { defineComponent } from \"vue\"; // import Breadcrumb from \"../../partials/Breadcrumb.vue\";\n\nimport axios from \"axios\";\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport ModalLayoutOffreUpdate from \"/src/views/Transporteur/Offres/ModalLayoutOffreUpdate.vue\";\nimport ModalOffreFichier from \"/src/views/Transporteur/Offres/ModalOffreFichier.vue\";\nexport default defineComponent({\n  components: {\n    // Breadcrumb\n    ModalLayoutOffreUpdate,\n    PaginationVue,\n    ModalOffreFichier\n  },\n\n  data() {\n    return {\n      offres: [],\n      valide: \"\",\n      villes: [],\n      imageFile: null,\n      currentPage: 1,\n      searchby: \"\",\n      date: \"\",\n      perPage: 5,\n      total: \"\",\n      long: \"\",\n      depart: \"\",\n      arrive: \"\",\n      etat: \"\",\n      nondispo: \"\",\n      hrefa: \"\"\n    };\n  },\n\n  created() {\n    axios.get(\"http://localhost:5000/api/EtatOffres/offre?offre=Nontraite\").then(response => {\n      this.nondispo = response.data;\n    });\n    axios.get(\"http://localhost:5000/api/EtatOffres/offre?offre=livre\").then(response => {\n      this.valide = response.data.idEtat;\n    });\n    axios.get(\"http://localhost:5000/api/villes\").then(resp => this.villes = resp.data);\n    axios.get(\"http://localhost:5000/api/Transporteurs/\" + localStorage.getItem(\"iduser\") + \"/iduser\").then(response => {\n      axios.get(\"http://localhost:5000/api/offres/\" + response.data.idTransporteur + \"/offrestransporteur\" + \"?etat=Livre\").then(resp => {\n        this.long = resp.data.length;\n      });\n    });\n    axios.get(\"http://localhost:5000/api/offres/\" + localStorage.getItem(\"idtransporteur\") + \"/offrestransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&etat=Livre\").then(resp => {\n      this.offres = resp.data;\n    });\n  },\n\n  methods: {\n    FileSelected(event, table) {\n      this.imageFile = event.target.files[0];\n      let user = new FormData();\n      user.append(\"etatFacture\", 1);\n      user.append(\"idOffre\", table.idOffre);\n      user.append(\"factureFile\", \"\");\n      user.append(\"payementFile\", \"\");\n      user.append(\"notification\", \"\");\n      user.append(\"imageFile\", this.imageFile);\n      user.append(\"srcPayementFile\", \"\");\n      axios.post(\"http://localhost:5000/api/FactureTransporteurs\", user);\n    },\n\n    searchfunction(mot) {\n      axios.get(\"http://localhost:5000/api/offres/\" + localStorage.getItem(\"idtransporteur\") + \"/offrestransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&&depart=\" + this.depart + \"&arrive=\" + this.arrive + \"&date=\" + this.date + \"&etat=Livre\" + \"&search=\" + this.searchby).then(resp => {\n        this.offres = resp.data;\n      });\n    },\n\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n      axios.get(\"http://localhost:5000/api/offres/\" + localStorage.getItem(\"idtransporteur\") + \"/offrestransporteur\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&&depart=\" + this.depart + \"&arrive=\" + this.arrive + \"&date=\" + this.date + \"&etat=\" + this.etat).then(resp => {\n        this.offres = resp.data;\n      });\n    },\n\n    valider(table) {\n      if (result.value) {\n        axios.put(\"http://localhost:5000/api/Offres/\" + table.idOffre, {\n          idOffre: table.idOffre,\n          description: table.description,\n          date: table.date,\n          heurearrive: table.heurearrive,\n          datecreation: table.datecreation,\n          idEtat: this.valide.idEtat,\n          prix: table.prix,\n          prixFinale: table.prixFinale,\n          idTransporteur: localStorage.getItem(\"idtransporteur\"),\n          idDemande: table.idDemande\n        }).then(() => {\n          this.close();\n        });\n      }\n    }\n\n  }\n});","map":{"version":3,"mappings":"AAuSA,SAASA,eAAT,QAAgC,KAAhC,C,CACA;;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,4DAA1B;AACA,OAAOC,sBAAP,MAAmC,2DAAnC;AACA,OAAOC,iBAAP,MAA8B,sDAA9B;AACA,eAAeJ,eAAe,CAAC;AAC7BK,YAAU,EAAE;AACV;AACAF,0BAFU;AAGVD,iBAHU;AAIVE;AAJU,GADiB;;AAO7BE,MAAI,GAAG;AACL,WAAO;AACLC,YAAM,EAAE,EADH;AAELC,YAAM,EAAE,EAFH;AAGLC,YAAM,EAAE,EAHH;AAILC,eAAS,EAAE,IAJN;AAKLC,iBAAW,EAAE,CALR;AAMLC,cAAQ,EAAE,EANL;AAOLC,UAAI,EAAE,EAPD;AAQLC,aAAO,EAAE,CARJ;AASLC,WAAK,EAAE,EATF;AAULC,UAAI,EAAE,EAVD;AAWLC,YAAM,EAAE,EAXH;AAYLC,YAAM,EAAE,EAZH;AAaLC,UAAI,EAAE,EAbD;AAcLC,cAAQ,EAAE,EAdL;AAeLC,WAAK,EAAE;AAfF,KAAP;AAiBD,GAzB4B;;AA0B7BC,SAAO,GAAG;AACRrB,SAAI,CACDsB,GADH,CACO,4DADP,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,WAAKL,QAAL,GAAgBK,QAAQ,CAACnB,IAAzB;AACD,KAJH;AAKAL,SAAI,CACDsB,GADH,CACO,wDADP,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,WAAKjB,MAAL,GAAciB,QAAQ,CAACnB,IAAT,CAAcoB,MAA5B;AACD,KAJH;AAKAzB,SAAI,CACDsB,GADH,CACO,kCADP,EAEGC,IAFH,CAESG,IAAD,IAAW,KAAKlB,MAAL,GAAckB,IAAI,CAACrB,IAFtC;AAGAL,SAAI,CACDsB,GADH,CAEI,6CACEK,YAAY,CAACC,OAAb,CAAqB,QAArB,CADF,GAEE,SAJN,EAMGL,IANH,CAMSC,QAAD,IAAc;AAClBxB,WAAI,CACDsB,GADH,CAEI,sCACEE,QAAQ,CAACnB,IAAT,CAAcwB,cADhB,GAEE,qBAFF,GAGE,aALN,EAOGN,IAPH,CAOSG,IAAD,IAAU;AACd,aAAKX,IAAL,GAAYW,IAAI,CAACrB,IAAL,CAAUyB,MAAtB;AACD,OATH;AAUD,KAjBH;AAmBA9B,SAAI,CACDsB,GADH,CAEI,sCACEK,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,qBAFF,GAGE,QAHF,GAIE,KAAKlB,WAJP,GAKE,gBALF,GAME,KAAKG,OANP,GAOE,aATN,EAWGU,IAXH,CAWSG,IAAD,IAAU;AACd,WAAKpB,MAAL,GAAcoB,IAAI,CAACrB,IAAnB;AACD,KAbH;AAcD,GAzE4B;;AA0E7B0B,SAAO,EAAE;AACPC,gBAAY,CAACC,KAAD,EAAQC,KAAR,EAAe;AACzB,WAAKzB,SAAL,GAAiBwB,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAjB;AACA,UAAIC,IAAG,GAAI,IAAIC,QAAJ,EAAX;AACAD,UAAI,CAACE,MAAL,CAAY,aAAZ,EAA2B,CAA3B;AACAF,UAAI,CAACE,MAAL,CAAY,SAAZ,EAAuBL,KAAK,CAACM,OAA7B;AACAH,UAAI,CAACE,MAAL,CAAY,aAAZ,EAA2B,EAA3B;AACAF,UAAI,CAACE,MAAL,CAAY,cAAZ,EAA4B,EAA5B;AACAF,UAAI,CAACE,MAAL,CAAY,cAAZ,EAA4B,EAA5B;AACAF,UAAI,CAACE,MAAL,CAAY,WAAZ,EAAyB,KAAK9B,SAA9B;AACA4B,UAAI,CAACE,MAAL,CAAY,iBAAZ,EAA+B,EAA/B;AACAvC,WAAK,CAACyC,IAAN,CAAW,gDAAX,EAA6DJ,IAA7D;AACD,KAZM;;AAcPK,kBAAc,CAACC,GAAD,EAAM;AAClB3C,WAAI,CACDsB,GADH,CAEI,sCACEK,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,qBAFF,GAGE,QAHF,GAIE,KAAKlB,WAJP,GAKE,gBALF,GAME,KAAKG,OANP,GAOE,WAPF,GAQE,KAAKG,MARP,GASE,UATF,GAUE,KAAKC,MAVP,GAWE,QAXF,GAYE,KAAKL,IAZP,GAaE,aAbF,GAcE,UAdF,GAeE,KAAKD,QAjBX,EAmBGY,IAnBH,CAmBSG,IAAD,IAAU;AACd,aAAKpB,MAAL,GAAcoB,IAAI,CAACrB,IAAnB;AACD,OArBH;AAsBD,KArCM;;AAsCPuC,cAAU,CAACC,OAAD,EAAU;AAClB,WAAKnC,WAAL,GAAmBmC,OAAnB;AACA,WAAKhC,OAAL,GAAe,KAAKA,OAApB;AACAb,WAAI,CACDsB,GADH,CAEI,sCACEK,YAAY,CAACC,OAAb,CAAqB,gBAArB,CADF,GAEE,qBAFF,GAGE,QAHF,GAIE,KAAKlB,WAJP,GAKE,gBALF,GAME,KAAKG,OANP,GAOE,WAPF,GAQE,KAAKG,MARP,GASE,UATF,GAUE,KAAKC,MAVP,GAWE,QAXF,GAYE,KAAKL,IAZP,GAaE,QAbF,GAcE,KAAKM,IAhBX,EAkBGK,IAlBH,CAkBSG,IAAD,IAAU;AACd,aAAKpB,MAAL,GAAcoB,IAAI,CAACrB,IAAnB;AACD,OApBH;AAqBD,KA9DM;;AA+DPyC,WAAO,CAACZ,KAAD,EAAQ;AACb,UAAIa,MAAM,CAACC,KAAX,EAAkB;AAChBhD,aAAI,CACDiD,GADH,CACO,sCAAsCf,KAAK,CAACM,OADnD,EAC4D;AACxDA,iBAAO,EAAEN,KAAK,CAACM,OADyC;AAExDU,qBAAW,EAAEhB,KAAK,CAACgB,WAFqC;AAGxDtC,cAAI,EAAEsB,KAAK,CAACtB,IAH4C;AAIxDuC,qBAAW,EAAEjB,KAAK,CAACiB,WAJqC;AAKxDC,sBAAY,EAAElB,KAAK,CAACkB,YALoC;AAMxD3B,gBAAM,EAAE,KAAKlB,MAAL,CAAYkB,MANoC;AAOxD4B,cAAI,EAAEnB,KAAK,CAACmB,IAP4C;AAQxDC,oBAAU,EAAEpB,KAAK,CAACoB,UARsC;AASxDzB,wBAAc,EAAEF,YAAY,CAACC,OAAb,CAAqB,gBAArB,CATwC;AAUxD2B,mBAAS,EAAErB,KAAK,CAACqB;AAVuC,SAD5D,EAaGhC,IAbH,CAaQ,MAAM;AACV,eAAKiC,KAAL;AACD,SAfH;AAgBF;AACD;;AAlFM;AA1EoB,CAAD,CAA9B","names":["defineComponent","axios","PaginationVue","ModalLayoutOffreUpdate","ModalOffreFichier","components","data","offres","valide","villes","imageFile","currentPage","searchby","date","perPage","total","long","depart","arrive","etat","nondispo","hrefa","created","get","then","response","idEtat","resp","localStorage","getItem","idTransporteur","length","methods","FileSelected","event","table","target","files","user","FormData","append","idOffre","post","searchfunction","mot","ChangePage","NumPage","valider","result","value","put","description","heurearrive","datecreation","prix","prixFinale","idDemande","close"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\pfe\\frontfinal\\src\\views\\Transporteur\\FactureTransporteur\\Factures.vue"],"sourcesContent":["<template>\r\n  <!-- Breadcrumb -->\r\n  <!-- <Breadcrumb breadcrumb=\"Offre Récu\" /> -->\r\n  <div class=\"mt-6\">\r\n    <h2 class=\"text-xl font-semibold leading-tight text-gray-700\">\r\n      Facture offres\r\n    </h2>\r\n    <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\r\n      <div class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\">\r\n        <div class=\"flex flex-col mt-3 text-center sm:flex-row\">\r\n          <div class=\"flex\">\r\n            <div class=\"relative\">\r\n              <select\r\n                class=\"block w-full h-full px-4 py-2 pr-8 leading-tight text-gray-700 bg-white border border-gray-400 rounded-l appearance-none focus:outline-none focus:bg-white focus:border-gray-500\"\r\n                v-model=\"perPage\"\r\n                @change=\"ChangePage(this.currentPage)\"\r\n              >\r\n                <option value=\"5\">5</option>\r\n                <option value=\"10\">10</option>\r\n                <option value=\"20\">20</option>\r\n              </select>\r\n\r\n              <div\r\n                class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\r\n              >\r\n                <svg\r\n                  class=\"w-4 h-4 fill-current\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path\r\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n            <div class=\"relative\">\r\n              <select\r\n                v-model=\"depart\"\r\n                @change=\"ChangePage(this.currentPage)\"\r\n                class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\r\n                aria-label=\"Default select example\"\r\n              >\r\n                <option value=\"\" class=\"font-semibold\" selected>depart</option>\r\n                <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\r\n                  --{{ v.nomVille }}--\r\n                </option>\r\n              </select>\r\n\r\n              <div\r\n                class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\r\n              >\r\n                <svg\r\n                  class=\"w-4 h-4 fill-current\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path\r\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n            <div class=\"relative\">\r\n              <select\r\n                v-model=\"arrive\"\r\n                @change=\"ChangePage(this.currentPage)\"\r\n                class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\r\n                aria-label=\"Default select example\"\r\n              >\r\n                <option value=\"\" class=\"font-semibold\" selected>Arrive</option>\r\n                <option v-for=\"v in villes\" :key=\"v\" :value=\"v.nomVille\">\r\n                  --{{ v.nomVille }}--\r\n                </option>\r\n              </select>\r\n\r\n              <div\r\n                class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\r\n              >\r\n                <svg\r\n                  class=\"w-4 h-4 fill-current\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path\r\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n            <div class=\"relative\">\r\n              <div\r\n                class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\r\n              >\r\n                <svg\r\n                  class=\"w-4 h-4 fill-current\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path\r\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative\">\r\n            <input\r\n              type=\"date\"\r\n              v-model=\"date\"\r\n              @change=\"ChangePage(this.currentPage)\"\r\n              class=\"form-select appearance-none block w-full px-3 py-1.5 text-base font-semibold text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none\"\r\n              aria-label=\"Default select example\"\r\n            />\r\n          </div>\r\n          <div class=\"relative\">\r\n            <select\r\n              class=\"block w-full h-full px-4 py-2 pr-8 leading-tight text-gray-700 bg-white border border-gray-400 rounded-l appearance-none focus:outline-none focus:bg-white focus:border-gray-500\"\r\n              v-model=\"etat\"\r\n              @change=\"ChangePage(this.currentPage)\"\r\n            >\r\n              <option value=\"\">Tout</option>\r\n              <option value=\"Accepte\">Accepté</option>\r\n              <option value=\"Refuse\">Réfusé</option>\r\n              <option value=\"Non traite\">Non traité</option>\r\n              <option value=\"En cours de traitement\">\r\n                EN cours de traitement\r\n              </option>\r\n            </select>\r\n\r\n            <div\r\n              class=\"absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 pointer-events-none\"\r\n            >\r\n              <svg\r\n                class=\"w-4 h-4 fill-current\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n              >\r\n                <path\r\n                  d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div class=\"relative block mt-2 sm:mt-0\">\r\n            <span class=\"absolute inset-y-0 left-0 flex items-center pl-2\">\r\n              <svg\r\n                viewBox=\"0 0 24 24\"\r\n                class=\"w-4 h-4 text-gray-500 fill-current\"\r\n              >\r\n                <path\r\n                  d=\"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z\"\r\n                />\r\n              </svg>\r\n            </span>\r\n\r\n            <input\r\n              v-model=\"searchby\"\r\n              placeholder=\"prix/num offre/num demande\"\r\n              class=\"block w-full py-2 pl-8 pr-6 text-xm text-gray-700 placeholder-gray-400 bg-white border border-b border-gray-400 rounded-l rounded-r appearance-none sm:rounded-l-none focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\r\n              @keyup=\"searchfunction(this.searchby)\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <table id=\"example\" class=\"min-w-full leading-normal\">\r\n          <thead>\r\n            <tr>\r\n              <th\r\n                class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\r\n              >\r\n                Numéro offre\r\n              </th>\r\n              <th\r\n                class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\r\n              >\r\n                Numéro Demande\r\n              </th>\r\n              <th\r\n                class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\r\n              >\r\n                Facture envoyé\r\n              </th>\r\n              <th\r\n                class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\r\n              >\r\n                Reçu payement\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(u, index) in offres\" :key=\"index\">\r\n              <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\r\n                <div class=\"flex items-center\">\r\n                  <div class=\"ml-3\">\r\n                    <p class=\"text-gray-900 whitespace-nowrap\">\r\n                      {{ u.idOffre }}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\r\n                <div class=\"flex items-center\">\r\n                  <div class=\"ml-3\">\r\n                    <p class=\"text-gray-900 whitespace-nowrap\">\r\n                      {{ u.idDemandeNavigation.idDemande }}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td\r\n                class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\r\n                style=\"padding: 30px 49px\"\r\n                v-if=\"u.factureTransporteur.length > 0\"\r\n              >\r\n                <a\r\n                  v-if=\"u.factureTransporteur[0].factureFile != null\"\r\n                  :href=\"u.factureTransporteur[0].srcFactureFile\"\r\n                  target=\" _blank\"\r\n                  class=\"bg-black ml-20 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\r\n                >\r\n                  Download\r\n                </a>\r\n                <input\r\n                  v-if=\"u.factureTransporteur[0].factureFile == null\"\r\n                  type=\"file\"\r\n                  id=\"image\"\r\n                  multiple=\"multiple\"\r\n                  @change=\"FileSelected($event, u)\"\r\n                />\r\n              </td>\r\n              <td\r\n                class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\r\n                v-if=\"u.factureTransporteur.length > 0\"\r\n              >\r\n                <p class=\"text-gray-900 whitespace-nowrap\">\r\n                  <a\r\n                    v-if=\"u.factureTransporteur[0].payementFile != null\"\r\n                    :href=\"u.factureTransporteur[0].srcPayementFile\"\r\n                    target=\" _blank\"\r\n                    class=\"bg-black ml-20 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\r\n                  >\r\n                    Download\r\n                  </a>\r\n                  <a\r\n                    v-if=\"u.factureTransporteur[0].payementFile == null\"\r\n                    href=\"\"\r\n                    >paiement en attente</a\r\n                  >\r\n                </p>\r\n              </td>\r\n              <td\r\n                class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\r\n                v-if=\"(u.factureTransporteur.length = 0)\"\r\n              >\r\n                <p class=\"text-gray-900 whitespace-nowrap\">\r\n                  <a>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"image\"\r\n                      multiple=\"multiple\"\r\n                      @change=\"FileSelected($event, u)\"\r\n                    />\r\n                  </a>\r\n                </p>\r\n              </td>\r\n              <td\r\n                class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\"\r\n                v-if=\"(u.factureTransporteur.length = 0)\"\r\n              >\r\n                <p class=\"text-gray-900 whitespace-nowrap\">\r\n                  <a>paiement en attente</a>\r\n                </p>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div\r\n          class=\"flex flex-col items-center px-2 py-2 bg-white border-t xs:flex-row xs:justify-between\"\r\n        >\r\n          <div class=\"inline-flex xs:mt-0\">\r\n            <!-- PAGINATION -->\r\n            <pagination-vue\r\n              :current=\"currentPage\"\r\n              :total=\"this.long\"\r\n              :per-page=\"perPage\"\r\n              @page-changed=\"ChangePage\"\r\n            ></pagination-vue>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\n// import Breadcrumb from \"../../partials/Breadcrumb.vue\";\r\nimport axios from \"axios\";\r\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\r\nimport ModalLayoutOffreUpdate from \"/src/views/Transporteur/Offres/ModalLayoutOffreUpdate.vue\";\r\nimport ModalOffreFichier from \"/src/views/Transporteur/Offres/ModalOffreFichier.vue\";\r\nexport default defineComponent({\r\n  components: {\r\n    // Breadcrumb\r\n    ModalLayoutOffreUpdate,\r\n    PaginationVue,\r\n    ModalOffreFichier,\r\n  },\r\n  data() {\r\n    return {\r\n      offres: [],\r\n      valide: \"\",\r\n      villes: [],\r\n      imageFile: null,\r\n      currentPage: 1,\r\n      searchby: \"\",\r\n      date: \"\",\r\n      perPage: 5,\r\n      total: \"\",\r\n      long: \"\",\r\n      depart: \"\",\r\n      arrive: \"\",\r\n      etat: \"\",\r\n      nondispo: \"\",\r\n      hrefa: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    axios\r\n      .get(\"http://localhost:5000/api/EtatOffres/offre?offre=Nontraite\")\r\n      .then((response) => {\r\n        this.nondispo = response.data;\r\n      });\r\n    axios\r\n      .get(\"http://localhost:5000/api/EtatOffres/offre?offre=livre\")\r\n      .then((response) => {\r\n        this.valide = response.data.idEtat;\r\n      });\r\n    axios\r\n      .get(\"http://localhost:5000/api/villes\")\r\n      .then((resp) => (this.villes = resp.data));\r\n    axios\r\n      .get(\r\n        \"http://localhost:5000/api/Transporteurs/\" +\r\n          localStorage.getItem(\"iduser\") +\r\n          \"/iduser\"\r\n      )\r\n      .then((response) => {\r\n        axios\r\n          .get(\r\n            \"http://localhost:5000/api/offres/\" +\r\n              response.data.idTransporteur +\r\n              \"/offrestransporteur\" +\r\n              \"?etat=Livre\"\r\n          )\r\n          .then((resp) => {\r\n            this.long = resp.data.length;\r\n          });\r\n      });\r\n\r\n    axios\r\n      .get(\r\n        \"http://localhost:5000/api/offres/\" +\r\n          localStorage.getItem(\"idtransporteur\") +\r\n          \"/offrestransporteur\" +\r\n          \"?page=\" +\r\n          this.currentPage +\r\n          \"&quantityPage=\" +\r\n          this.perPage +\r\n          \"&etat=Livre\"\r\n      )\r\n      .then((resp) => {\r\n        this.offres = resp.data;\r\n      });\r\n  },\r\n  methods: {\r\n    FileSelected(event, table) {\r\n      this.imageFile = event.target.files[0];\r\n      let user = new FormData();\r\n      user.append(\"etatFacture\", 1);\r\n      user.append(\"idOffre\", table.idOffre);\r\n      user.append(\"factureFile\", \"\");\r\n      user.append(\"payementFile\", \"\");\r\n      user.append(\"notification\", \"\");\r\n      user.append(\"imageFile\", this.imageFile);\r\n      user.append(\"srcPayementFile\", \"\");\r\n      axios.post(\"http://localhost:5000/api/FactureTransporteurs\", user);\r\n    },\r\n\r\n    searchfunction(mot) {\r\n      axios\r\n        .get(\r\n          \"http://localhost:5000/api/offres/\" +\r\n            localStorage.getItem(\"idtransporteur\") +\r\n            \"/offrestransporteur\" +\r\n            \"?page=\" +\r\n            this.currentPage +\r\n            \"&quantityPage=\" +\r\n            this.perPage +\r\n            \"&&depart=\" +\r\n            this.depart +\r\n            \"&arrive=\" +\r\n            this.arrive +\r\n            \"&date=\" +\r\n            this.date +\r\n            \"&etat=Livre\" +\r\n            \"&search=\" +\r\n            this.searchby\r\n        )\r\n        .then((resp) => {\r\n          this.offres = resp.data;\r\n        });\r\n    },\r\n    ChangePage(NumPage) {\r\n      this.currentPage = NumPage;\r\n      this.perPage = this.perPage;\r\n      axios\r\n        .get(\r\n          \"http://localhost:5000/api/offres/\" +\r\n            localStorage.getItem(\"idtransporteur\") +\r\n            \"/offrestransporteur\" +\r\n            \"?page=\" +\r\n            this.currentPage +\r\n            \"&quantityPage=\" +\r\n            this.perPage +\r\n            \"&&depart=\" +\r\n            this.depart +\r\n            \"&arrive=\" +\r\n            this.arrive +\r\n            \"&date=\" +\r\n            this.date +\r\n            \"&etat=\" +\r\n            this.etat\r\n        )\r\n        .then((resp) => {\r\n          this.offres = resp.data;\r\n        });\r\n    },\r\n    valider(table) {\r\n      if (result.value) {\r\n        axios\r\n          .put(\"http://localhost:5000/api/Offres/\" + table.idOffre, {\r\n            idOffre: table.idOffre,\r\n            description: table.description,\r\n            date: table.date,\r\n            heurearrive: table.heurearrive,\r\n            datecreation: table.datecreation,\r\n            idEtat: this.valide.idEtat,\r\n            prix: table.prix,\r\n            prixFinale: table.prixFinale,\r\n            idTransporteur: localStorage.getItem(\"idtransporteur\"),\r\n            idDemande: table.idDemande,\r\n          })\r\n          .then(() => {\r\n            this.close();\r\n          });\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}
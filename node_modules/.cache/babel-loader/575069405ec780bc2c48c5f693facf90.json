{"ast":null,"code":"import axios from \"axios\";\nimport { ref } from 'vue'; // import Vue from \"vue\";\n// import VueSimpleAlert from \"vue-simple-alert\";\n\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport ModalLayoutChauffeurUpdate from \"/src/views/Transporteur/Chauffeurs/ModalLayoutChauffeurUpdate.vue\";\nexport default {\n  components: {\n    ModalLayoutChauffeurUpdate,\n    PaginationVue\n  },\n\n  data() {\n    return {\n      open: ref(false),\n      chauffeurs: [],\n      imageFile: null,\n      camions: [],\n      currentPage: 1,\n      perPage: 5,\n      searchby: '',\n      long: '',\n      camion: '',\n      open: false,\n      nom: '',\n      prenom: '',\n      email: '',\n      motdepasse: '',\n      codevehicule: '',\n      cinchauffeur: '',\n      sucess: false,\n      error: false,\n      nextpage: 1,\n      idchauffeur: '',\n      camion: [],\n      error: '',\n      iduser: '',\n      i: 0,\n      chauffeurscamions: []\n    };\n  },\n\n  created() {\n    axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\").then(response => {\n      this.long = response.data.length;\n    }).catch(error => console.log(error));\n    axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n      this.chauffeurs = response.data;\n    }).catch(error => console.log(error)); // inserer dans la table chauffeurscamions les camions qui n'ont pas un chauffeur\n\n    axios.get(\"http://localhost:5000/api/Transporteurs/\" + localStorage.getItem(\"iduser\") + \"/iduser\").then(resp => {\n      axios.get(\"http://localhost:5000/api/Camions/\" + resp.data.idTransporteur).then(response => {\n        response.data.forEach(element => {\n          if (element.idchauffeur == null) {\n            this.chauffeurscamions[this.i] = element;\n            this.i = this.i + 1;\n          }\n        });\n      }).catch(error => console.log(error));\n    }); // inserer dans iduser le dernier id d'un user dans la BD\n  },\n\n  methods: {\n    close() {\n      axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\").then(response => {\n        this.long = response.data.length;\n      }).catch(error => console.log(error));\n      axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n        this.chauffeurs = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    FileSelected(event) {\n      this.imageFile = event.target.files[0];\n      console.log(this.imageFile);\n    },\n\n    searchfunction(mot) {\n      axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage + \"&search=\" + mot).then(response => {\n        this.chauffeurs = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    ChangePage(NumPage) {\n      this.currentPage = NumPage;\n      this.perPage = this.perPage;\n      axios.get(\"http://localhost:5000/api/Chauffeurs/\" + localStorage.getItem(\"societe\") + \"/chauffeurs\" + \"?page=\" + this.currentPage + \"&quantityPage=\" + this.perPage).then(response => {\n        this.chauffeurs = response.data;\n      }).catch(error => console.log(error));\n    },\n\n    supprimerchauffeur(id) {\n      this.$swal({\n        title: \"$titleWarnignBox\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#36c6d3\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"$confrimBtn\",\n        cancelButtonText: \"$cancelBtn\"\n      }).then(result => {\n        if (result.value) {\n          axios.get(\"http://localhost:5000/api/Chauffeurs/\" + id + \"/idchauffeur\").then(resp => {\n            axios.put(\"http://localhost:5000/api/Camions/\" + 1008, {\n              idcamion: this.camiontable.idcamion,\n              idtransporteur: this.camiontable.idtransporteur,\n              idchauffeur: null,\n              codevehicule: this.camiontable.codevehicule,\n              idtype: this.camiontable.idtypeNavigation.idtype\n            }).then(() => {\n              axios.delete(\"http://localhost:5000/api/Chauffeurs/\" + id);\n            });\n          }).then(() => {\n            this.close();\n          });\n          this.$swal(\"Deleted!\", \"Your imaginary file has been deleted.\", \"success\");\n          console.log(\"good\");\n        } else if (result.dismiss == \"cancel\") {\n          this.$swal(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\");\n          console.log(\"cancel\");\n        }\n      });\n    },\n\n    ajouterChauffeur() {\n      if (this.nom != '' && this.prenom != '' && this.email != '' && this.cinchauffeur != '' && this.motdepasse != '') {\n        let user = new FormData();\n        user.append(\"Nom\", this.nom);\n        user.append(\"Prenom\", this.prenom);\n        user.append(\"Email\", this.email);\n        user.append(\"Motdepasse\", this.password);\n        user.append(\"image\", \"\");\n        user.append(\"ImageFile\", this.imageFile);\n        user.append(\"ImageSrc\", \"\");\n        axios.post(\"http://localhost:5000/api/Users\", user, {}).then(response => {\n          axios.get(\"http://localhost:5000/api/Users\").then(response => {\n            this.iduser = response.data[response.data.length - 1].idUser;\n          }).then(() => {\n            axios.post(\"http://localhost:5000/api/Chauffeurs/\" + this.email, {\n              Cinchauffeur: this.cinchauffeur,\n              Idsociete: localStorage.getItem('societe'),\n              Iduser: this.iduser\n            }).then(() => {\n              this.sucess = true;\n              this.close();\n            }).catch(() => {\n              this.sucess = false;\n              this.error = \"CIN DOIT ETRE UNIQUE\"; // si l 'email est correct l'utilisateur sera stocké dans la table user meme si la cin \n              //n'est pas unique dnc on doit le supprimer\n\n              axios.delete(\"http://localhost:5000/api/Users/\" + this.iduser);\n            });\n          }).catch(() => {\n            this.sucess = false;\n            this.error = \"EMAIL DOIT ETRE UNIQUE\";\n          });\n        });\n      } else {\n        this.sucess = false;\n        this.error = \"veuillez remplir tout les champs\";\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","ref","PaginationVue","ModalLayoutChauffeurUpdate","components","data","open","chauffeurs","imageFile","camions","currentPage","perPage","searchby","long","camion","nom","prenom","email","motdepasse","codevehicule","cinchauffeur","sucess","error","nextpage","idchauffeur","iduser","i","chauffeurscamions","created","get","localStorage","getItem","then","response","length","catch","console","log","resp","idTransporteur","forEach","element","methods","close","FileSelected","event","target","files","searchfunction","mot","ChangePage","NumPage","supprimerchauffeur","id","$swal","title","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","value","put","idcamion","camiontable","idtransporteur","idtype","idtypeNavigation","delete","dismiss","ajouterChauffeur","user","FormData","append","password","post","idUser","Cinchauffeur","Idsociete","Iduser"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\frontfinal\\src\\views\\Transporteur\\Chauffeurs\\Chauffeurs.vue"],"sourcesContent":["<template>\n<div>\n    <!-- ADD CHAUFFEUR -->\n    <Breadcrumb breadcrumb=\"Modal\" />\n     <button @click=\"open = true\"\n>  \n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"25\" fill=\"currentColor\" class=\"bi bi-plus-circle-fill\" viewBox=\"0 0 16 16\">\n  <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z\"/>\n</svg>        \n  </button>\n\n    <div\n      :class=\"`modal ${\n        !open && 'opacity-0 pointer-events-none'\n      } z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center`\"\n    >\n      <div\n        @click=\"open = false\"\n        class=\"absolute w-full h-full bg-gray-900 opacity-50 modal-overlay\"\n      ></div>\n\n      <div\n        class=\"z-50 w-11/12 mx-auto overflow-y-auto bg-white rounded shadow-lg modal-container md:max-w-md\"\n      >\n        <div\n          class=\"absolute top-0 right-0 z-50 flex flex-col items-center mt-4 mr-4 text-sm text-white cursor-pointer modal-close\"\n        >\n          <svg\n            class=\"text-white fill-current\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"18\"\n            height=\"18\"\n            viewBox=\"0 0 18 18\"\n          >\n            <path\n              d=\"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z\"\n            />\n          </svg>\n          <span class=\"text-sm\">(Esc)</span>\n        </div>\n\n        <!-- Add margin if you want to see some of the overlay behind the modal-->\n        <div class=\"px-6 py-4 text-left modal-content\">\n          <!--Title-->\n          <div class=\"flex items-center justify-between pb-3\">\n            <p class=\"text-2xl font-bold\">Ajouter Chauffeur</p>\n          </div>\n          <!--Body-->\n          <div class=\"mt-8\">\n      <div class=\"mt-4\">\n        <div class=\"p-6 bg-white rounded-md shadow-md\">    \n            <div class=\"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2\">\n              <form  @submit.prevent=\"ajouterChauffeur\">\n                 <div>\n                <label class=\"text-gray-700\" for=\"image\">Photo de Profil</label>\n                <input\n                  class=\"\n                    w-full\n                    mt-2\n                    border-gray-200\n                    rounded-md\n                    focus:border-indigo-600\n                    focus:ring\n                    focus:ring-opacity-40\n                    focus:ring-indigo-500\n                  \"\n                  id=\"image\"\n                  type=\"file\"\n                  required\n                  @change=\"FileSelected($event)\"\n                />\n              </div>\n                <div>\n                <label class=\"text-gray-700\" for=\"username\">nom</label>\n                <input\n                  class=\"w-full mt-2 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\"\n                  type=\"text\"\n                  v-model=\"nom\" required\n                />\n              </div>\n              <div>\n                <label class=\"text-gray-700\" for=\"username\">prenom</label>\n                <input\n                  class=\"w-full mt-2 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\"\n                  type=\"text\"\n                  v-model=\"prenom\"\n                  required\n                />\n              </div>\n<div>\n                <label class=\"text-gray-700\" for=\"username\">cin</label>\n                <input\n                  class=\"w-full mt-2 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\"\n                  type=\"text\"\n                  v-model=\"cinchauffeur\"\n                  required\n                />\n              </div>\n              <div>\n                <label class=\"text-gray-700\" for=\"emailAddress\"\n                  >email</label\n                >\n                <input\n                  class=\"w-full mt-2 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\"\n                   type=\"email\"\n                  v-model=\"email\"\n                  required\n                />\n              </div>\n              <div>\n                <label class=\"text-gray-700\" for=\"password\">motdepasse</label>\n                <input\n                  class=\"w-full mt-2 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\"\n                  type=\"text\"\n                  v-model=\"motdepasse\"\n                  required\n                />\n              </div>\n              <div class=\"flex justify-end mt-4\">\n              \n             <button \n                class=\"px-4 py-2 text-gray-200 bg-gray-800 rounded-md hover:bg-gray-700 focus:outline-none focus:bg-gray-700\"\n              >\n                Save\n              </button>\n            </div>\n              </form>\n              \n\n            </div>\n\n            \n          \n            <div  class=\"px-4 py-2 -mx-3\">\n              <div class=\"mx-3\">\n                <span class=\"font-semibold text-red-500\">{{this.error}}</span>\n              </div>\n            </div>\n          <div v-if=\"this.sucess==true\" class=\"px-4 py-2 -mx-3\">\n              <div class=\"mx-3\">\n                <span class=\"font-semibold text-green-500\">Chauffeur Ajouté</span>\n                <p class=\"text-sm text-gray-600\">\n                  Ajout réussi!\n                </p>\n              </div>\n            </div>\n        </div>\n        </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  <!-- Breadcrumb -->\n  <Breadcrumb breadcrumb=\"Blank\" />\n  <div class=\"mt-8\">\n    <div class=\"mt-6\">\n       <div class=\"flex flex-col mt-3 text-center sm:flex-row\">\n          <div class=\"flex\">\n            <div class=\"relative\">\n              <select\n                class=\"\n                  block\n                  w-full\n                  h-full\n                  px-4\n                  py-2\n                  pr-8\n                  leading-tight\n                  text-gray-700\n                  bg-white\n                  border border-gray-400\n                  rounded-l\n                  appearance-none\n                  focus:outline-none focus:bg-white focus:border-gray-500\n                \"\n                v-model=\"perPage\"\n                @change=\"ChangePage(this.currentPage)\"\n              >\n                <option value=\"5\">5</option>\n                <option value=\"10\">10</option>\n                <option value=\"20\">20</option>\n              </select>\n\n              <div\n                class=\"\n                  absolute\n                  inset-y-0\n                  right-0\n                  flex\n                  items-center\n                  px-2\n                  text-gray-700\n                  pointer-events-none\n                \"\n              >\n                <svg\n                  class=\"w-4 h-4 fill-current\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path\n                    d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                  />\n                </svg>\n              </div>\n            </div>\n\n          \n          </div>\n\n          <div class=\"relative block mt-2 sm:mt-0\">\n            <span class=\"absolute inset-y-0 left-0 flex items-center pl-2\">\n              <svg\n                viewBox=\"0 0 24 24\"\n                class=\"w-4 h-4 text-gray-500 fill-current\"\n              >\n                <path\n                  d=\"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z\"\n                />\n              </svg>\n            </span>\n\n            <input\n            v-model=\"searchby\"\n              placeholder=\"Search\"\n              class=\"\n                block\n                w-full\n                py-2\n                pl-8\n                pr-6\n                text-xm text-gray-700\n                placeholder-gray-400\n                bg-white\n                border border-b border-gray-400\n                rounded-l rounded-r\n                appearance-none\n                sm:rounded-l-none\n                focus:bg-white\n                focus:placeholder-gray-600\n                focus:text-gray-700\n                focus:outline-none\n              \"\n              @keyup=\"searchfunction(this.searchby)\"\n            />\n          </div>\n        </div>\n      <div class=\"px-4 py-4 -mx-4 overflow-x-auto sm:-mx-8 sm:px-8\">\n        \n        <div class=\"inline-block min-w-full overflow-hidden rounded-lg shadow\">\n          <table id=\"example\" class=\"min-w-full leading-normal\">\n            <thead>\n              <tr>\n                <th\n                  class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                >\n                  Cin\n                </th>\n                <th\n                  class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                >\n                 Nom\n                </th>\n                <th\n                  class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                >\n                  Email\n                </th>\n               \n               \n                <th\n                  class=\"px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200\"\n                >\n                  Settings\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"(u, index) in chauffeurs\" :key=\"index\">\n                <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                  <div class=\"flex items-center\">\n                    <div class=\"ml-3\">\n                      <p class=\"text-gray-900 whitespace-nowrap\">\n                        {{ u.cinchauffeur}}\n                      </p>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                  <div class=\"flex items-center\">\n                    <div class=\"flex-shrink-0 w-10 h-10\">\n                      <img\n                        class=\"w-full h-full rounded-full\"\n                        src=\"https://picsum.photos/id/1016/384/234\"\n                        alt=\"profile pic\"\n                      />\n                    </div>\n                    <div class=\"ml-3\">\n                      <p class=\"text-gray-900 whitespace-nowrap\">\n                        {{\n                          u.iduserNavigation.nom +\n                          \" \" +\n                          u.iduserNavigation.prenom\n                        }}\n                      </p>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                  <p class=\"text-gray-900 whitespace-nowrap\">\n                    {{ u.iduserNavigation.email }}\n                  </p>\n                </td>\n                \n                \n                <td class=\"px-5 py-5 text-sm bg-white border-b border-gray-200\">\n                  <div class=\"flex justify-around\">\n                    <span class=\"text-yellow-500 flex justify-center\">\n                      <modal-layout-chauffeur-update\n                        :userss=\"u\"\n                      ></modal-layout-chauffeur-update>\n                      <form @submit.prevent=\"supprimerchauffeur(u.idchauffeur)\">\n <button \n                        class=\"mx-2 px-2 rounded-md\"\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          class=\"h-5 w-5 text-red-700\"\n                          viewBox=\"0 0 20 20\"\n                          fill=\"currentColor\"\n                        >\n                          <path\n                            fill-rule=\"evenodd\"\n                            d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\"\n                            clip-rule=\"evenodd\"\n                          />\n                        </svg>\n                      </button>\n                      </form>\n                      \n                    </span>\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n                       <div\n              class=\"\n                flex flex-col\n                items-center\n                px-2\n                py-2\n                bg-white\n                border-t\n                xs:flex-row xs:justify-between\n              \"\n            >\n              <div class=\"inline-flex xs:mt-0\">\n              <!-- PAGINATION -->\n                <pagination-vue\n                  :current=\"currentPage\"\n                  :total=\"this.long\"\n                  :per-page=\"perPage\"\n                  @page-changed=\"ChangePage\"\n                ></pagination-vue>\n              </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n<script>\nimport axios from \"axios\";\nimport { ref } from 'vue'\n// import Vue from \"vue\";\n// import VueSimpleAlert from \"vue-simple-alert\";\n\n\nimport PaginationVue from \"/src/components/Intermediaire/pagination/PaginationVue.vue\";\nimport ModalLayoutChauffeurUpdate from \"/src/views/Transporteur/Chauffeurs/ModalLayoutChauffeurUpdate.vue\";\nexport default {\n  components: {\n    ModalLayoutChauffeurUpdate,\n    PaginationVue,\n  },\n  data() {\n    return {\n      open : ref(false),\n      chauffeurs: [],\n      imageFile: null,\n      camions: [],\n      currentPage:1,\n      perPage:5,\n      searchby:'',\n      long:'',\n      camion:'',\n      open:false,\n       nom:'',\n      prenom:'',\n      email:'',\n      motdepasse:'',\n      codevehicule:'',\n       cinchauffeur:'',\n      sucess:false,\n      error:false,\n      nextpage:1,\n      idchauffeur:'',\n      camion:[],\n      error:'',\n      iduser:'',\n      i:0,\n      chauffeurscamions:[]\n    };\n  },\n  created() {\n    axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n      )\n      .then((response) => {\n        this.long = response.data.length;\n      })\n      .catch((error) => console.log(error));\n    axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n           +\"?page=\"+this.currentPage+\n            \"&quantityPage=\"+this.perPage\n         \n      )\n      .then((response) => {\n        this.chauffeurs = response.data;\n      })\n      .catch((error) => console.log(error));\n        // inserer dans la table chauffeurscamions les camions qui n'ont pas un chauffeur\n        axios\n      .get(\n        \"http://localhost:5000/api/Transporteurs/\" +\n          localStorage.getItem(\"iduser\") +\n          \"/iduser\"\n      ).then((resp)=>{\n      axios\n      .get(\"http://localhost:5000/api/Camions/\"+resp.data.idTransporteur)\n      .then((response) =>{\n       response.data.forEach(element => {\n          if (element.idchauffeur==null){\n               this.chauffeurscamions[this.i]=element\n               this.i=this.i+1;\n          }\n      });\n      }\n      )\n      .catch((error) => console.log(error)) \n      })\n    // inserer dans iduser le dernier id d'un user dans la BD\n  },\n  methods: {\n    close(){\n       axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n      )\n      .then((response) => {\n        this.long = response.data.length;\n      })\n      .catch((error) => console.log(error));\n    axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n           +\"?page=\"+this.currentPage+\n            \"&quantityPage=\"+this.perPage\n         \n      )\n      .then((response) => {\n        this.chauffeurs = response.data;\n      })\n      .catch((error) => console.log(error));\n    },\n     FileSelected(event) {\n      this.imageFile = event.target.files[0];\n      console.log(this.imageFile)\n    },\n    searchfunction(mot){\n      axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n          +\"?page=\"+this.currentPage+\n            \"&quantityPage=\"+this.perPage+\"&search=\"+mot\n      )\n      .then((response) => {\n        this.chauffeurs = response.data;\n      })\n      .catch((error) => console.log(error));\n    },\n      ChangePage(NumPage) {\n        this.currentPage=NumPage;\n        this.perPage=this.perPage;\n         axios\n      .get(\n        \"http://localhost:5000/api/Chauffeurs/\" +\n          localStorage.getItem(\"societe\") +\n          \"/chauffeurs\"\n          +\"?page=\"+this.currentPage+\n            \"&quantityPage=\"+this.perPage\n      )\n      .then((response) => {\n        this.chauffeurs = response.data;\n      })\n      .catch((error) => console.log(error));\n      },\n    supprimerchauffeur(id){\n   this.$swal({\n    title: \"$titleWarnignBox\",\n    type: \"warning\",\n    showCancelButton: true,\n    confirmButtonColor: \"#36c6d3\",\n    cancelButtonColor: \"#d33\",\n    confirmButtonText: \"$confrimBtn\",\n    cancelButtonText: \"$cancelBtn\",\n  }).then((result) =>  {\n    if (result.value) {\n         axios.get(\"http://localhost:5000/api/Chauffeurs/\"+id+\"/idchauffeur\")\n         .then((resp)=>{\n             axios\n          .put(\n            \"http://localhost:5000/api/Camions/\" + 1008,\n            {\n              idcamion: this.camiontable.idcamion,\n              idtransporteur: this.camiontable.idtransporteur,\n              idchauffeur:null,\n              codevehicule: this.camiontable.codevehicule,\n              idtype: this.camiontable.idtypeNavigation.idtype,\n            }\n          ).then(()=>{\n            axios.delete(\"http://localhost:5000/api/Chauffeurs/\"+id)\n          })\n         })\n         \n\n.then(()=>{\n  \n  this.close()\n })\n      this.$swal(\n        \"Deleted!\",\n        \"Your imaginary file has been deleted.\",\n        \"success\"\n      )\n      console.log(\"good\");\n    } else if (result.dismiss == \"cancel\") {\n      this.$swal(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\")\n      console.log(\"cancel\");\n    }\n  });\n\n      \n    },\n      ajouterChauffeur () {\n        \n      if(this.nom!=''&&this.prenom!=''&&this.email!=''&&this.cinchauffeur!=''\n       && this.motdepasse!=''){\n         let user = new FormData();\n      user.append(\"Nom\", this.nom);\n      user.append(\"Prenom\", this.prenom);\n      user.append(\"Email\", this.email);\n      user.append(\"Motdepasse\", this.password);\n      user.append(\"image\",\"\");\n      user.append(\"ImageFile\", this.imageFile);\n      user.append(\"ImageSrc\", \"\");\n      axios\n        .post( \"http://localhost:5000/api/Users\" , user, {\n        })\n       .then((response) =>{\n       axios\n      .get(\"http://localhost:5000/api/Users\")\n      .then((response) =>{\n      this.iduser=response.data[response.data.length-1].idUser\n      }\n      )\n      .then(() => {\n       axios.post(\"http://localhost:5000/api/Chauffeurs/\"+this.email,{\n       Cinchauffeur: this.cinchauffeur,\n       Idsociete:localStorage.getItem('societe'),\n       Iduser: this.iduser,\n      })  \n      .then(()=>{\n       this.sucess=true \n        this.close()\n      })\n      .catch(()=>{\n      this.sucess=false\n      this.error=\"CIN DOIT ETRE UNIQUE\"\n      // si l 'email est correct l'utilisateur sera stocké dans la table user meme si la cin \n//n'est pas unique dnc on doit le supprimer\n      axios.delete(\"http://localhost:5000/api/Users/\" + this.iduser)\n})\n      }) .catch(()=>{\n      this.sucess=false\n      this.error=\"EMAIL DOIT ETRE UNIQUE\"\n}) \n       })\n       }\n      else {\n        this.sucess=false\n        this.error=\"veuillez remplir tout les champs\"\n      }\n      },\n    }}\n</script>\n<style>\n.affect {\n  font-weight: bold;\n  color: red;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
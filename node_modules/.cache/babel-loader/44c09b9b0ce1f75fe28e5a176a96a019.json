{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex items-center justify-center h-screen px-6 bg-white r\"\n};\nconst _hoisted_2 = {\n  class: \"w-full max-w-sm p-6 rounded-md shadow-md\",\n  style: {\n    \"opacity\": \"0.9\",\n    \"background-color\": \"#d2d7e0\"\n  }\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"flex items-center justify-center\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"flex items-center\"\n}, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  version: \"1.1\",\n  id: \"Icons\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\n  x: \"0px\",\n  y: \"0px\",\n  viewBox: \"0 0 32 32\",\n  style: {\n    \"enable-background\": \"new 0 0 32 32\"\n  },\n  \"xml:space\": \"preserve\"\n}, [/*#__PURE__*/_createElementVNode(\"polyline\", {\n  class: \"st0\",\n  points: \"2,9 19,9 19,24 10,24 \"\n}), /*#__PURE__*/_createElementVNode(\"circle\", {\n  class: \"st0\",\n  cx: \"24\",\n  cy: \"24\",\n  r: \"2\"\n}), /*#__PURE__*/_createElementVNode(\"circle\", {\n  class: \"st0\",\n  cx: \"8\",\n  cy: \"24\",\n  r: \"2\"\n}), /*#__PURE__*/_createElementVNode(\"polyline\", {\n  class: \"st0\",\n  points: \"19,24 19,13 25,13 29,18 29,24 26,24 \"\n}), /*#__PURE__*/_createElementVNode(\"line\", {\n  class: \"st0\",\n  x1: \"4\",\n  y1: \"13\",\n  x2: \"13\",\n  y2: \"13\"\n}), /*#__PURE__*/_createElementVNode(\"line\", {\n  class: \"st0\",\n  x1: \"2\",\n  y1: \"17\",\n  x2: \"11\",\n  y2: \"17\"\n}), /*#__PURE__*/_createElementVNode(\"rect\", {\n  x: \"-288\",\n  y: \"-432\",\n  class: \"st3\",\n  width: \"536\",\n  height: \"680\"\n})]), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"mx-2 text-2xl font-semibold\",\n  style: {\n    \"color\": \"#385183\"\n  }\n}, \"P F E 2022\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"block\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-sm text-gray-700\"\n}, \"Email\", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = {\n  class: \"block mt-3\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-sm text-gray-700\"\n}, \"Password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"flex items-center justify-between mt-4\"\n}, [/*#__PURE__*/_createCommentVNode(\" <div>\\r\\n            <label class=\\\"inline-flex items-center\\\">\\r\\n              <input\\r\\n                type=\\\"checkbox\\\"\\r\\n                class=\\\"\\r\\n                  text-indigo-600\\r\\n                  border-gray-200\\r\\n                  rounded-md\\r\\n                  focus:border-indigo-600\\r\\n                  focus:ring\\r\\n                  focus:ring-opacity-40\\r\\n                  focus:ring-indigo-500\\r\\n                \\\"\\r\\n              />\\r\\n              <span class=\\\"mx-2 text-sm text-gray-600\\\">Remember me</span>\\r\\n            </label>\\r\\n          </div> \"), /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"block text-sm text-indigo-700 fontme hover:underline\",\n  href: \"#\"\n}, \"Forgot your password?\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mt-6\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"w-full px-4 py-2 text-sm text-center text-white bg-indigo-600 rounded-md focus:outline-none hover:bg-indigo-500\"\n}, \" Sign in \")], -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", {\n    class: \"mt-4\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => _ctx.login && _ctx.login(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"label\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"block w-full mt-1 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.email = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.email]])]), _createElementVNode(\"label\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    class: \"block w-full mt-1 border-gray-200 rounded-md focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.password = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.password]])]), _hoisted_8, _hoisted_9], 32\n  /* HYDRATE_EVENTS */\n  )])]);\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","version","id","xmlns","x","y","viewBox","points","cx","cy","r","x1","y1","x2","y2","width","height","_createCommentVNode","href","type","_createElementBlock","_hoisted_3","onSubmit","_ctx","_hoisted_5","$event","_hoisted_7","_hoisted_8","_hoisted_9"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\pfe\\frontfinal\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"flex items-center justify-center h-screen px-6 bg-white r\" >\r\n    <div class=\"w-full max-w-sm p-6  rounded-md shadow-md \" style=\"opacity: 0.9;  background-color: #d2d7e0;\">\r\n      <div class=\"flex items-center justify-center\">\r\n      <div class=\"flex items-center\">\r\n          <svg\r\n            version=\"1.1\"\r\n            id=\"Icons\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            viewBox=\"0 0 32 32\"\r\n            style=\"enable-background: new 0 0 32 32\"\r\n            xml:space=\"preserve\"\r\n          >\r\n            <polyline class=\"st0\" points=\"2,9 19,9 19,24 10,24 \" />\r\n            <circle class=\"st0\" cx=\"24\" cy=\"24\" r=\"2\" />\r\n            <circle class=\"st0\" cx=\"8\" cy=\"24\" r=\"2\" />\r\n            <polyline\r\n              class=\"st0\"\r\n              points=\"19,24 19,13 25,13 29,18 29,24 26,24 \"\r\n            />\r\n            <line class=\"st0\" x1=\"4\" y1=\"13\" x2=\"13\" y2=\"13\" />\r\n            <line class=\"st0\" x1=\"2\" y1=\"17\" x2=\"11\" y2=\"17\" />\r\n            <rect x=\"-288\" y=\"-432\" class=\"st3\" width=\"536\" height=\"680\" />\r\n          </svg>\r\n\r\n          <span class=\"mx-2 text-2xl font-semibold \"  style=\"color:#385183\">P F E 2022</span>\r\n        </div>\r\n      </div>\r\n\r\n      <form class=\"mt-4\" @submit.prevent=\"login\">\r\n        <label class=\"block\">\r\n          <span class=\"text-sm text-gray-700\">Email</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"\r\n              block\r\n              w-full\r\n              mt-1\r\n              border-gray-200\r\n              rounded-md\r\n              focus:border-indigo-600\r\n              focus:ring\r\n              focus:ring-opacity-40\r\n              focus:ring-indigo-500\r\n            \"\r\n            v-model=\"email\"\r\n          />\r\n        </label>\r\n\r\n        <label class=\"block mt-3\">\r\n          <span class=\"text-sm text-gray-700\">Password</span>\r\n          <input\r\n            type=\"password\"\r\n            class=\"\r\n              block\r\n              w-full\r\n              mt-1\r\n              border-gray-200\r\n              rounded-md\r\n              focus:border-indigo-600\r\n              focus:ring\r\n              focus:ring-opacity-40\r\n              focus:ring-indigo-500\r\n            \"\r\n            v-model=\"password\"\r\n          />\r\n        </label>\r\n\r\n        <div class=\"flex items-center justify-between mt-4\">\r\n          <!-- <div>\r\n            <label class=\"inline-flex items-center\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"\r\n                  text-indigo-600\r\n                  border-gray-200\r\n                  rounded-md\r\n                  focus:border-indigo-600\r\n                  focus:ring\r\n                  focus:ring-opacity-40\r\n                  focus:ring-indigo-500\r\n                \"\r\n              />\r\n              <span class=\"mx-2 text-sm text-gray-600\">Remember me</span>\r\n            </label>\r\n          </div> -->\r\n\r\n          <div>\r\n            <a\r\n              class=\"block text-sm text-indigo-700 fontme hover:underline\"\r\n              href=\"#\"\r\n              >Forgot your password?</a\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"mt-6\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"\r\n              w-full\r\n              px-4\r\n              py-2\r\n              text-sm text-center text-white\r\n              bg-indigo-600\r\n              rounded-md\r\n              focus:outline-none\r\n              hover:bg-indigo-500\r\n            \"\r\n          >\r\n            Sign in\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script >\r\nimport { defineComponent } from \"vue\";\r\nimport axios from \"axios\";\r\nexport default defineComponent({\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n  },\r\n  \r\n  methods: {\r\n    login() {\r\n      axios\r\n        .post(\"http://localhost:5000/api/login\", {\r\n          Email: this.email,\r\n          Motdepasse: this.password,\r\n        })\r\n        .then((response) => {\r\n          //console.log(response.data);\r\n\r\n          localStorage.setItem(\"type\", response.data.type);\r\n\r\n          if (localStorage.getItem(\"type\") == \"intermediaire\") {\r\n            localStorage.setItem(\"token\", response.data.type.token);\r\n            localStorage.setItem(\r\n              \"id\",\r\n              response.data.validUser.intermediaire[0].idIntermediaire\r\n            );\r\n            localStorage.setItem(\r\n              \"idRole\",\r\n              response.data.validUser.intermediaire[0].idRole\r\n            );\r\n              localStorage.setItem(\r\n              \"jwt\",\r\n             \"foo.bar.baz\"\r\n            );\r\n            console.log(localStorage.getItem(\"jwt\"));\r\n\r\n            this.$router.push({ name: \"Intermediaire\" });\r\n             Swal.fire({\r\n  icon: 'success',\r\n  title: 'Hello '+response.data.validUser.nom +\" \"+response.data.validUser.prenom,\r\n  text: 'Welcome',\r\n \r\n})\r\n          } else if (localStorage.getItem(\"type\") == \"transporteur\") {\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            localStorage.setItem(\"idtransporteur\", response.data.validUser.transporteur[0].idTransporteur);\r\n            localStorage.setItem(\"iduser\", response.data.validUser.idUser);\r\n            localStorage.setItem(\"name\", response.data.validUser.nom);\r\n            localStorage.setItem(\"prenom\", response.data.validUser.prenom);\r\n            localStorage.setItem(\"email\", response.data.validUser.email);\r\n            localStorage.setItem(\"societe\", response.data.validUser.societe);\r\n            localStorage.setItem(\"image\", response.data.validUser.image);\r\n            localStorage.setItem(\"jwtt\", 't');\r\n            this.$router.push({ name: \"DashboardTransporteur\" });\r\n             Swal.fire({\r\n  icon: 'success',\r\n  title: 'Hello '+response.data.validUser.nom +\" \"+response.data.validUser.prenom,\r\n  text: 'Welcome',\r\n \r\n})\r\n          } else if (localStorage.getItem(\"type\") == \"\") {\r\n            this.$router.push({ name: \"Login\" });\r\n          } else {\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            localStorage.setItem(\"iduser\", response.data.validUser.idUser);\r\n            localStorage.setItem(\"name\", response.data.validUser.nom);\r\n            localStorage.setItem(\"prenom\", response.data.validUser.prenom);\r\n            localStorage.setItem(\"email\", response.data.validUser.email);\r\n            localStorage.setItem(\"societe\", response.data.validUser.societe);\r\n            localStorage.setItem(\"image\", response.data.validUser.image);\r\n            localStorage.setItem(\"clientid\", response.data.validUser.client[0].idclient);\r\n            localStorage.setItem(\"jwtc\", 'c');\r\n            this.$router.push({ name: \"DashboardClient\" });\r\n          }\r\n\r\n          //  console.log(localStorage.getItem(\"type\"));\r\n        //   else if(localStorage.getItem(\"type\")==\"\"){\r\n        //    this.$router.push({ name:\"Login\"});         \r\n        //   }\r\n        //   else{\r\n        //     this.$router.push({ name:\"DashboardClient\"});\r\n        //   }\r\n          \r\n        //  console.log(localStorage.getItem(\"type\"));\r\n         }).catch(()=>{\r\n           Swal.fire({\r\n  icon: 'error',\r\n  title: 'Oops...',\r\n  text: 'Something went wrong!',\r\n \r\n})\r\n         });\r\n    },\r\n  },\r\n});\r\n</script>\r\n<style>\r\n.r{\r\n\r\n background-image: url('../assets/malek.png');\r\n background-repeat:no-repeat;\r\n background-position:50% 50%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}